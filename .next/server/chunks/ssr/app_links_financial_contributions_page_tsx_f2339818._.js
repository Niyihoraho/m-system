module.exports=[58313,a=>{"use strict";a.s(["default",()=>ar],58313);var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(87532),f=a.i(69520),g=a.i(15618),h=a.i(24569),i=a.i(81560),j=a.i(90166),k=a.i(46842),l=a.i(39793),m=a.i(51131),n=a.i(87853),o=a.i(19040),p=a.i(64443),q=a.i(48501),r=a.i(7554),s=a.i(70121),t=a.i(50104),u=a.i(30553),v=a.i(24050),w=a.i(25152),x=a.i(7827),y=a.i(3688),z=a.i(77994),A=a.i(77192),B="Radio",[C,D]=(0,t.createContextScope)(B),[E,F]=C(B),G=c.forwardRef((a,d)=>{let{__scopeRadio:e,name:f,checked:g=!1,required:h,disabled:i,value:j="on",onCheck:k,form:l,...m}=a,[n,o]=c.useState(null),p=(0,s.useComposedRefs)(d,a=>o(a)),q=c.useRef(!1),t=!n||l||!!n.closest("form");return(0,b.jsxs)(E,{scope:e,checked:g,disabled:i,children:[(0,b.jsx)(u.Primitive.button,{type:"button",role:"radio","aria-checked":g,"data-state":K(g),"data-disabled":i?"":void 0,disabled:i,value:j,...m,ref:p,onClick:(0,r.composeEventHandlers)(a.onClick,a=>{g||k?.(),t&&(q.current=a.isPropagationStopped(),q.current||a.stopPropagation())})}),t&&(0,b.jsx)(J,{control:n,bubbles:!q.current,name:f,value:j,checked:g,required:h,disabled:i,form:l,style:{transform:"translateX(-100%)"}})]})});G.displayName=B;var H="RadioIndicator",I=c.forwardRef((a,c)=>{let{__scopeRadio:d,forceMount:e,...f}=a,g=F(H,d);return(0,b.jsx)(A.Presence,{present:e||g.checked,children:(0,b.jsx)(u.Primitive.span,{"data-state":K(g.checked),"data-disabled":g.disabled?"":void 0,...f,ref:c})})});I.displayName=H;var J=c.forwardRef(({__scopeRadio:a,control:d,checked:e,bubbles:f=!0,...g},h)=>{let i=c.useRef(null),j=(0,s.useComposedRefs)(i,h),k=(0,z.usePrevious)(e),l=(0,y.useSize)(d);return c.useEffect(()=>{let a=i.current;if(!a)return;let b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[k,e,f]),(0,b.jsx)(u.Primitive.input,{type:"radio","aria-hidden":!0,defaultChecked:e,...g,tabIndex:-1,ref:j,style:{...g.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function K(a){return a?"checked":"unchecked"}J.displayName="RadioBubbleInput";var L=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],M="RadioGroup",[N,O]=(0,t.createContextScope)(M,[v.createRovingFocusGroupScope,D]),P=(0,v.createRovingFocusGroupScope)(),Q=D(),[R,S]=N(M),T=c.forwardRef((a,c)=>{let{__scopeRadioGroup:d,name:e,defaultValue:f,value:g,required:h=!1,disabled:i=!1,orientation:j,dir:k,loop:l=!0,onValueChange:m,...n}=a,o=P(d),p=(0,x.useDirection)(k),[q,r]=(0,w.useControllableState)({prop:g,defaultProp:f??null,onChange:m,caller:M});return(0,b.jsx)(R,{scope:d,name:e,required:h,disabled:i,value:q,onValueChange:r,children:(0,b.jsx)(v.Root,{asChild:!0,...o,orientation:j,dir:p,loop:l,children:(0,b.jsx)(u.Primitive.div,{role:"radiogroup","aria-required":h,"aria-orientation":j,"data-disabled":i?"":void 0,dir:p,...n,ref:c})})})});T.displayName=M;var U="RadioGroupItem",V=c.forwardRef((a,d)=>{let{__scopeRadioGroup:e,disabled:f,...g}=a,h=S(U,e),i=h.disabled||f,j=P(e),k=Q(e),l=c.useRef(null),m=(0,s.useComposedRefs)(d,l),n=h.value===g.value,o=c.useRef(!1);return c.useEffect(()=>{let a=a=>{L.includes(a.key)&&(o.current=!0)},b=()=>o.current=!1;return document.addEventListener("keydown",a),document.addEventListener("keyup",b),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",b)}},[]),(0,b.jsx)(v.Item,{asChild:!0,...j,focusable:!i,active:n,children:(0,b.jsx)(G,{disabled:i,required:h.required,checked:n,...k,...g,name:h.name,ref:m,onCheck:()=>h.onValueChange(g.value),onKeyDown:(0,r.composeEventHandlers)(a=>{"Enter"===a.key&&a.preventDefault()}),onFocus:(0,r.composeEventHandlers)(g.onFocus,()=>{o.current&&l.current?.click()})})})});V.displayName=U;var W=c.forwardRef((a,c)=>{let{__scopeRadioGroup:d,...e}=a,f=Q(d);return(0,b.jsx)(I,{...f,...e,ref:c})});W.displayName="RadioGroupIndicator";var X=a.i(9615),X=X,Y=a.i(97895);let Z=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(T,{className:(0,Y.cn)("grid gap-2",a),...c,ref:d}));Z.displayName=T.displayName;let $=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(V,{ref:d,className:(0,Y.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...c,children:(0,b.jsx)(W,{className:"flex items-center justify-center",children:(0,b.jsx)(X.default,{className:"h-2.5 w-2.5 fill-current text-current"})})}));$.displayName=V.displayName;var _=a.i(63743),aa=a.i(70106);(0,aa.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);let ab=(0,aa.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var ac=a.i(50522);let ad=(0,aa.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var ae=a.i(34157),ae=ae;function af({children:a,onContributionAdded:d}){let[e,f]=c.useState(!1),[h,i]=c.useState(!1),[j,k]=c.useState({}),[l,r]=c.useState(!1),[s,t]=c.useState(1),[u,v]=c.useState([]),[w,x]=c.useState([]),[y,z]=c.useState([]),[A,B]=c.useState({userType:"external",contributor:{name:"",email:"",phone:"",memberId:""},amount:"",method:"mobile_money",designationId:"",paymentMethod:"",paymentProvider:"",currency:"RWF"});c.useEffect(()=>{e&&(C(),D(),E())},[e]);let C=async()=>{try{let a=await fetch("/api/members"),b=await a.json();v(b.members||[])}catch(a){console.error("Error fetching members:",a)}},D=async()=>{try{let a=await fetch("/api/designations"),b=await a.json();x(b)}catch(a){console.error("Error fetching designations:",a)}},E=async()=>{try{let a=await fetch("/api/payment-providers"),b=await a.json();z(b)}catch(a){console.error("Error fetching payment providers:",a)}},F=(a,b)=>{if(a.includes(".")){let[c,d]=a.split(".");B(a=>({...a,[c]:{...a[c],[d]:b}}))}else B(c=>({...c,[a]:b}));j[a]&&k(b=>({...b,[a]:""})),l&&r(!1)},G=a=>{let b={};return 1===a?A.userType||(b.userType="Please select user type"):2===a?(A.contributor.name.trim()||(b["contributor.name"]="Name is required"),"internal"!==A.userType||A.contributor.memberId||(b["contributor.memberId"]="Please select a member for internal user"),"external"!==A.userType||A.contributor.email||(b["contributor.email"]="Email is required for external users")):3===a?((!A.amount||isNaN(Number(A.amount))||0>=Number(A.amount))&&(b.amount="Valid amount is required"),A.method||(b.method="Payment method is required")):4!==a||A.paymentProvider||(b.paymentProvider="Payment provider is required"),k(b),0===Object.keys(b).length},H=async a=>{if(a.preventDefault(),G(s)){i(!0);try{console.log("Creating contribution data:",A);let a=await fetch("/api/contributions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userType:A.userType,contributor:{name:A.contributor.name,email:A.contributor.email||null,phone:A.contributor.phone||null,memberId:A.contributor.memberId?Number(A.contributor.memberId):null},amount:Number(A.amount),method:A.method,designationId:A.designationId?Number(A.designationId):null,status:"pending",paymentMethod:A.paymentMethod,paymentProvider:A.paymentProvider?Number(A.paymentProvider):null,currency:A.currency})}),b=await a.json();console.log("API response:",{status:a.status,data:b}),a.ok?(r(!0),k({}),B({userType:"external",contributor:{name:"",email:"",phone:"",memberId:""},amount:"",method:"mobile_money",designationId:"",paymentMethod:"",paymentProvider:"",currency:"RWF"}),t(1),d&&d(),setTimeout(()=>{f(!1),r(!1)},1500)):(console.error("API Error:",b),k({general:b.error||"Failed to create contribution"}))}catch(a){console.error("Error creating contribution:",a),k({general:"An unexpected error occurred"})}finally{i(!1)}}};return(0,b.jsxs)(_.Sheet,{open:e,onOpenChange:f,children:[(0,b.jsx)(_.SheetTrigger,{asChild:!0,children:a}),(0,b.jsx)(_.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,b.jsxs)(_.SheetHeader,{className:"pb-8 text-center",children:[(0,b.jsxs)(_.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(g.Plus,{className:"h-6 w-6 text-primary"})}),"Add New Contribution"]}),(0,b.jsx)(_.SheetDescription,{className:"text-lg text-muted-foreground",children:"Process a new contribution through our multi-step form."})]}),(0,b.jsxs)(n.Card,{className:"shadow-lg",children:[(0,b.jsxs)(n.CardHeader,{className:"pb-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Contribution Process"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Complete all steps to process the contribution"})]}),(0,b.jsx)("div",{className:"flex items-center justify-center mt-6",children:Array.from({length:4},(a,b)=>b+1).map(a=>(0,b.jsxs)(c.Fragment,{children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:`flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ${a<=s?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"}`,children:a<s?(0,b.jsx)(ae.default,{className:"h-4 w-4"}):a}),(0,b.jsx)("div",{className:"ml-2 text-sm font-medium",children:(a=>{switch(a){case 1:return"User Type";case 2:return"Contributor Information";case 3:return"Contribution Details";case 4:return"Payment Provider";default:return""}})(a)})]}),a<4&&(0,b.jsx)("div",{className:"flex-1 h-px bg-border mx-4 min-w-[50px]"})]},a))})]}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("form",{onSubmit:H,className:"flex flex-col gap-6",children:[j.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),1===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Select User Type"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose whether this is an internal or external contributor"})]}),(0,b.jsxs)(Z,{value:A.userType,onValueChange:a=>F("userType",a),className:"flex flex-col gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,b.jsx)($,{value:"internal",id:"internal"}),(0,b.jsxs)(p.Label,{htmlFor:"internal",className:"flex-1 cursor-pointer",children:[(0,b.jsx)("div",{className:"font-medium",children:"Internal User"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"Existing member making a contribution"})]})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,b.jsx)($,{value:"external",id:"external"}),(0,b.jsxs)(p.Label,{htmlFor:"external",className:"flex-1 cursor-pointer",children:[(0,b.jsx)("div",{className:"font-medium",children:"External User"}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"New contributor not in our system"})]})]})]}),j.userType&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.userType})]}),2===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Contributor Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"internal"===A.userType?"Select an existing member":"Enter contributor details"})]}),"internal"===A.userType?(0,b.jsx)("div",{className:"space-y-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"memberId",className:"text-sm font-medium",children:"Select Member *"}),(0,b.jsxs)(q.Select,{value:A.contributor.memberId,onValueChange:a=>F("contributor.memberId",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select a member"})}),(0,b.jsx)(q.SelectContent,{children:u.map(a=>(0,b.jsxs)(q.SelectItem,{value:a.id.toString(),children:[a.firstname," ",a.secondname," ",a.email&&`(${a.email})`]},a.id))})]}),j["contributor.memberId"]&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j["contributor.memberId"]})]})}):(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name *"}),(0,b.jsx)(o.Input,{id:"name",placeholder:"Enter contributor name",className:"h-11",value:A.contributor.name,onChange:a=>F("contributor.name",a.target.value),required:!0}),j["contributor.name"]&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j["contributor.name"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address *"}),(0,b.jsx)(o.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:A.contributor.email,onChange:a=>F("contributor.email",a.target.value),required:!0}),j["contributor.email"]&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j["contributor.email"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),(0,b.jsx)(o.Input,{id:"phone",placeholder:"Enter phone number",className:"h-11",value:A.contributor.phone,onChange:a=>F("contributor.phone",a.target.value)})]})]})]}),3===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Contribution Details"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter the contribution amount and designation"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"amount",className:"text-sm font-medium",children:"Contribution Amount (RWF) *"}),(0,b.jsx)(o.Input,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:A.amount,onChange:a=>F("amount",a.target.value),required:!0}),j.amount&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.amount})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"method",className:"text-sm font-medium",children:"Payment Method *"}),(0,b.jsxs)(q.Select,{value:A.method,onValueChange:a=>F("method",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select payment method"})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,b.jsx)(q.SelectItem,{value:"bank_transfer",children:"Bank Transfer"}),(0,b.jsx)(q.SelectItem,{value:"card",children:"Card Payment"}),(0,b.jsx)(q.SelectItem,{value:"worldremit",children:"WorldRemit"})]})]}),j.method&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.method})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"designationId",className:"text-sm font-medium",children:"Designation (Optional)"}),(0,b.jsxs)(q.Select,{value:A.designationId,onValueChange:a=>F("designationId",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select a designation (optional)"})}),(0,b.jsx)(q.SelectContent,{children:w.map(a=>(0,b.jsxs)(q.SelectItem,{value:a.id.toString(),children:[a.name," ",a.targetAmount&&`(Target: ${a.targetAmount.toLocaleString()} RWF)`]},a.id))})]})]})]})]}),4===s&&(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Payment Provider"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select the payment provider for processing"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"paymentProvider",className:"text-sm font-medium",children:"Payment Provider *"}),(0,b.jsxs)(q.Select,{value:A.paymentProvider,onValueChange:a=>F("paymentProvider",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select payment provider"})}),(0,b.jsx)(q.SelectContent,{children:y.map(a=>(0,b.jsxs)(q.SelectItem,{value:a.id.toString(),children:[a.name," (",a.provider,")"]},a.id))})]}),j.paymentProvider&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.paymentProvider})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"currency",className:"text-sm font-medium",children:"Currency"}),(0,b.jsx)(o.Input,{id:"currency",value:A.currency,onChange:a=>F("currency",a.target.value),className:"h-11",disabled:!0})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[s>1&&(0,b.jsxs)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{t(a=>Math.max(a-1,1))},disabled:h,children:[(0,b.jsx)(ad,{className:"mr-2 h-4 w-4"}),"Previous"]}),s<4?(0,b.jsxs)(m.Button,{type:"button",className:"flex-1 h-11",onClick:()=>{G(s)&&t(a=>Math.min(a+1,4))},disabled:h,children:["Next",(0,b.jsx)(ac.ChevronRight,{className:"ml-2 h-4 w-4"})]}):(0,b.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:h||l,children:h?"Processing...":l?"✅ Contribution Created!":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(ab,{className:"mr-2 h-4 w-4"}),"Create Contribution"]})}),(0,b.jsx)(m.Button,{type:"button",variant:"outline",className:"h-11",onClick:()=>f(!1),disabled:h,children:"Cancel"})]})]})})]})]})})]})}var ag=a.i(73570),ah=a.i(33508);function ai({isOpen:a,onClose:d,onConfirm:e,contributionAmount:f,contributorName:g,isLoading:h=!1}){let[k,l]=c.useState(!1),o=async()=>{l(!0);try{await e()}finally{l(!1)}};return(0,b.jsx)(_.Sheet,{open:a,onOpenChange:d,children:(0,b.jsx)(_.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-md py-8",children:[(0,b.jsxs)(_.SheetHeader,{className:"pb-8 text-center",children:[(0,b.jsxs)(_.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl text-destructive",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:(0,b.jsx)(ag.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),"Delete Contribution"]}),(0,b.jsx)(_.SheetDescription,{className:"text-lg text-muted-foreground",children:"This action cannot be undone. This will permanently delete the contribution record."})]}),(0,b.jsxs)(n.Card,{className:"shadow-lg border-destructive/20",children:[(0,b.jsx)(n.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Confirm Deletion"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to delete this contribution?"})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)("div",{className:"p-4 bg-muted/50 border border-border rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(j.DollarSign,{className:"h-5 w-5 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:g}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Amount: ",f.toLocaleString()," RWF"]})]})]})}),(0,b.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(ag.AlertTriangle,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-destructive",children:"Warning: This action cannot be undone"}),(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete the contribution from ",(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:['"',g,'"']})," for ",(0,b.jsxs)("span",{className:"font-semibold text-foreground",children:[f.toLocaleString()," RWF"]}),"."]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"This contribution will be permanently removed from the system. Any associated receipts and payment records will also be deleted."})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsxs)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:d,disabled:k||h,children:[(0,b.jsx)(ah.X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,b.jsx)(m.Button,{type:"button",variant:"destructive",className:"flex-1 h-11",onClick:o,disabled:k||h,children:k||h?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Deleting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Contribution"]})})]})]})})]})]})})})}function aj({contribution:a,isOpen:d,onClose:e,onContributionUpdated:f}){let[g,i]=c.useState(!1),[l,r]=c.useState({}),[s,t]=c.useState(!1),[u,v]=c.useState([]),[w,x]=c.useState([]),[y,z]=c.useState([]),[A,B]=c.useState({amount:"",method:"mobile_money",designationId:"",status:"pending",contributor:{name:"",email:"",phone:"",memberId:""}});c.useEffect(()=>{a&&B({amount:a.amount.toString(),method:a.method,designationId:a.contributiondesignation?.id.toString()||"",status:a.status,contributor:{name:a.contributor.name,email:a.contributor.email||"",phone:a.contributor.phone||"",memberId:a.contributor.memberId?.toString()||""}})},[a]),c.useEffect(()=>{d&&(C(),D(),E())},[d]);let C=async()=>{try{let a=await fetch("/api/members"),b=await a.json();v(b.members||[])}catch(a){console.error("Error fetching members:",a)}},D=async()=>{try{let a=await fetch("/api/designations"),b=await a.json();x(b)}catch(a){console.error("Error fetching designations:",a)}},E=async()=>{try{let a=await fetch("/api/payment-providers"),b=await a.json();z(b)}catch(a){console.error("Error fetching payment providers:",a)}},F=(a,b)=>{if(a.includes(".")){let[c,d]=a.split(".");B(a=>({...a,[c]:{...a[c],[d]:b}}))}else B(c=>({...c,[a]:b}));l[a]&&r(b=>({...b,[a]:""})),s&&t(!1)},G=async b=>{if((b.preventDefault(),a)&&(()=>{let a={};return(!A.amount||isNaN(Number(A.amount))||0>=Number(A.amount))&&(a.amount="Valid amount is required"),A.method||(a.method="Payment method is required"),A.status||(a.status="Status is required"),A.contributor.name.trim()||(a["contributor.name"]="Contributor name is required"),r(a),0===Object.keys(a).length})()){i(!0);try{console.log("Updating contribution data:",A);let b=await fetch(`/api/contributions/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({contributor:{id:a.contributor.id,name:A.contributor.name,email:A.contributor.email||null,phone:A.contributor.phone||null,memberId:A.contributor.memberId?Number(A.contributor.memberId):null},amount:Number(A.amount),method:A.method,designationId:A.designationId?Number(A.designationId):null,status:A.status})}),c=await b.json();console.log("API response:",{status:b.status,data:c}),b.ok?(t(!0),r({}),f&&f(),setTimeout(()=>{e(),t(!1)},1500)):(console.error("API Error:",c),r({general:c.error||"Failed to update contribution"}))}catch(a){console.error("Error updating contribution:",a),r({general:"An unexpected error occurred"})}finally{i(!1)}}};return a?(0,b.jsx)(_.Sheet,{open:d,onOpenChange:e,children:(0,b.jsx)(_.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,b.jsxs)(_.SheetHeader,{className:"pb-8 text-center",children:[(0,b.jsxs)(_.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(h.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Contribution"]}),(0,b.jsx)(_.SheetDescription,{className:"text-lg text-muted-foreground",children:"Update the contribution information below."})]}),(0,b.jsxs)(n.Card,{className:"shadow-lg",children:[(0,b.jsx)(n.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Contribution Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below to modify this contribution"})]})}),(0,b.jsx)(n.CardContent,{children:(0,b.jsxs)("form",{onSubmit:G,className:"flex flex-col gap-6",children:[l.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:l.general}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contribution Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(p.Label,{htmlFor:"amount",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(j.DollarSign,{className:"h-4 w-4"}),"Amount (RWF) *"]}),(0,b.jsx)(o.Input,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:A.amount,onChange:a=>F("amount",a.target.value),required:!0}),l.amount&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:l.amount})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"method",className:"text-sm font-medium",children:"Payment Method *"}),(0,b.jsxs)(q.Select,{value:A.method,onValueChange:a=>F("method",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select payment method"})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,b.jsx)(q.SelectItem,{value:"bank_transfer",children:"Bank Transfer"}),(0,b.jsx)(q.SelectItem,{value:"card",children:"Card Payment"}),(0,b.jsx)(q.SelectItem,{value:"worldremit",children:"WorldRemit"})]})]}),l.method&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:l.method})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"designationId",className:"text-sm font-medium",children:"Designation (Optional)"}),(0,b.jsxs)(q.Select,{value:A.designationId,onValueChange:a=>F("designationId",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select a designation (optional)"})}),(0,b.jsx)(q.SelectContent,{children:w.map(a=>(0,b.jsxs)(q.SelectItem,{value:a.id.toString(),children:[a.name," ",a.targetAmount&&`(Target: ${a.targetAmount.toLocaleString()} RWF)`]},a.id))})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),(0,b.jsxs)(q.Select,{value:A.status,onValueChange:a=>F("status",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"pending",children:"Pending"}),(0,b.jsx)(q.SelectItem,{value:"completed",children:"Completed"}),(0,b.jsx)(q.SelectItem,{value:"failed",children:"Failed"}),(0,b.jsx)(q.SelectItem,{value:"refunded",children:"Refunded"}),(0,b.jsx)(q.SelectItem,{value:"processing",children:"Processing"}),(0,b.jsx)(q.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),l.status&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:l.status})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contributor Information"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(p.Label,{htmlFor:"contributorName",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(k.User,{className:"h-4 w-4"}),"Contributor Name *"]}),(0,b.jsx)(o.Input,{id:"contributorName",placeholder:"Enter contributor name",className:"h-11",value:A.contributor.name,onChange:a=>F("contributor.name",a.target.value),required:!0}),l["contributor.name"]&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:l["contributor.name"]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"contributorEmail",className:"text-sm font-medium",children:"Email Address"}),(0,b.jsx)(o.Input,{id:"contributorEmail",type:"email",placeholder:"Enter email address",className:"h-11",value:A.contributor.email,onChange:a=>F("contributor.email",a.target.value)})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"contributorPhone",className:"text-sm font-medium",children:"Phone Number"}),(0,b.jsx)(o.Input,{id:"contributorPhone",placeholder:"Enter phone number",className:"h-11",value:A.contributor.phone,onChange:a=>F("contributor.phone",a.target.value)})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(p.Label,{htmlFor:"memberId",className:"text-sm font-medium",children:"Associated Member (Optional)"}),(0,b.jsxs)(q.Select,{value:A.contributor.memberId,onValueChange:a=>F("contributor.memberId",a),children:[(0,b.jsx)(q.SelectTrigger,{className:"h-11",children:(0,b.jsx)(q.SelectValue,{placeholder:"Select a member (optional)"})}),(0,b.jsx)(q.SelectContent,{children:u.map(a=>(0,b.jsxs)(q.SelectItem,{value:a.id.toString(),children:[a.firstname," ",a.secondname," ",a.email&&`(${a.email})`]},a.id))})]})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,b.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:e,disabled:g,children:"Cancel"}),(0,b.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:g||s,children:g?"Updating...":s?"✅ Updated Successfully!":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.Edit,{className:"mr-2 h-4 w-4"}),"Update Contribution"]})})]})]})})]})]})})}):null}var ak=a.i(42247),al=a.i(7379),am=a.i(14727);let an={mobile_money:"Mobile Money",bank_transfer:"Bank Transfer",card:"Card Payment",worldremit:"WorldRemit"},ao={pending:"Pending",completed:"Completed",failed:"Failed",refunded:"Refunded",processing:"Processing",cancelled:"Cancelled"},ap={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",failed:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",refunded:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",processing:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"},aq={mobile_money:"bg-blue-100 text-blue-800",bank_transfer:"bg-green-100 text-green-800",card:"bg-purple-100 text-purple-800",worldremit:"bg-orange-100 text-orange-800"};function ar(){let[a,m]=(0,c.useState)(""),[n,o]=(0,c.useState)([]),[p,q]=(0,c.useState)(!0),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)({isOpen:!1,contributionId:null,contributorName:"",contributionAmount:0}),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(null),z=async()=>{try{q(!0),s(null);let a=await d.default.get("/api/contributions");o(a.data)}catch(a){console.error("Error fetching contributions:",a),s("Failed to fetch contributions. Please try again.")}finally{q(!1)}},A=()=>{u({isOpen:!1,contributionId:null,contributorName:"",contributionAmount:0})},B=async()=>{if(t.contributionId){w(!0);try{let a=await d.default.delete(`/api/contributions/${t.contributionId}`);200===a.status&&(o(a=>a.filter(a=>a.id!==t.contributionId)),A(),console.log("Contribution deleted successfully"))}catch(a){console.error("Error deleting contribution:",a),alert("Failed to delete contribution. Please try again.")}finally{w(!1)}}};(0,c.useEffect)(()=>{z()},[]);let C=n.filter(b=>{if(!a)return!0;let c=a.toLowerCase();return b.contributor.name?.toLowerCase().includes(c)||b.contributor.email?.toLowerCase().includes(c)||b.contributor.phone?.includes(a)||b.contributiondesignation?.name?.toLowerCase().includes(c)||b.member?.firstname?.toLowerCase().includes(c)||b.member?.secondname?.toLowerCase().includes(c)||b.member?.email?.toLowerCase().includes(c)||b.transactionId?.toLowerCase().includes(c)||b.paymenttransaction?.externalId?.toLowerCase().includes(c)||b.paymenttransaction?.paymentgateway?.name?.toLowerCase().includes(c)||an[b.method]?.toLowerCase().includes(c)||ao[b.status]?.toLowerCase().includes(c)});return(0,b.jsxs)(am.SidebarProvider,{children:[(0,b.jsx)(l.AppSidebar,{}),(0,b.jsxs)(am.SidebarInset,{children:[(0,b.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,b.jsx)(am.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(al.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,b.jsx)(ak.Breadcrumb,{children:(0,b.jsxs)(ak.BreadcrumbList,{children:[(0,b.jsx)(ak.BreadcrumbItem,{className:"hidden md:block",children:(0,b.jsx)(ak.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,b.jsx)(ak.BreadcrumbSeparator,{className:"hidden md:block"}),(0,b.jsx)(ak.BreadcrumbItem,{children:(0,b.jsx)(ak.BreadcrumbLink,{href:"/links/financial",children:"Financial Management"})}),(0,b.jsx)(ak.BreadcrumbSeparator,{}),(0,b.jsx)(ak.BreadcrumbItem,{children:(0,b.jsx)(ak.BreadcrumbPage,{children:"Contributions"})})]})})]})}),(0,b.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,b.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Contributions Management"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage financial contributions and their processing across the organization"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(e.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search contributions...",value:a,onChange:a=>m(a.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,b.jsxs)("button",{onClick:z,disabled:p,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(f.RefreshCw,{className:`w-4 h-4 ${p?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:p?"Loading...":"Refresh"})]})]}),(0,b.jsx)(af,{onContributionAdded:z,children:(0,b.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add New Contribution"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Add Contribution"})]})})]}),r&&(0,b.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,b.jsx)("span",{className:"text-sm",children:r})]}),(0,b.jsx)("button",{onClick:z,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[p?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(f.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{children:"Loading contributions..."})]})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Contributor"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount & Method"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Designation"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-card divide-y divide-border",children:C.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,b.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsx)(k.User,{className:"h-4 w-4 text-muted-foreground"})})}),(0,b.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-foreground truncate",children:a.contributor.name}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[a.contributor.email&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:a.contributor.email}),(0,b.jsx)("span",{children:"•"})]}),(0,b.jsx)("span",{children:a.contributor.phone})]}),a.member&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Member: ",a.member.firstname," ",a.member.secondname]})]})]})}),(0,b.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-foreground flex items-center gap-1",children:[(0,b.jsx)(j.DollarSign,{className:"w-3 h-3"}),(0,b.jsxs)("span",{children:[a.amount.toLocaleString()," RWF"]})]}),(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:an[a.method]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()})]}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:a.contributiondesignation?(0,b.jsxs)("div",{className:"text-sm text-foreground",children:[(0,b.jsx)("div",{className:"font-medium",children:a.contributiondesignation.name}),a.contributiondesignation.targetAmount&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Target: ",a.contributiondesignation.targetAmount.toLocaleString()," RWF"]})]}):(0,b.jsx)("div",{className:"text-sm text-muted-foreground",children:"No designation"})}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${ap[a.status]}`,children:ao[a.status]}),(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${aq[a.method]}`,children:an[a.method]})]})}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{onClick:()=>{y(a)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,b.jsx)(h.Edit,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{var b;return b=a.id,void u({isOpen:!0,contributionId:b,contributorName:a.contributor.name,contributionAmount:a.amount})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,b.jsx)(i.Trash2,{className:"w-4 h-4"})})]})})]},a.id))})]})}),!p&&0===C.length&&!r&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(j.DollarSign,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No contributions found"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:a?"No contributions match your search criteria.":"No contributions have been recorded yet."}),!a&&(0,b.jsx)(af,{onContributionAdded:z,children:(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(g.Plus,{className:"w-4 h-4"}),"Add First Contribution"]})})]}),!p&&C.length>0&&(0,b.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,b.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:C.length})," contributions"]})})})]})]})})]}),(0,b.jsx)(ai,{isOpen:t.isOpen,onClose:A,onConfirm:B,contributorName:t.contributorName,contributionAmount:t.contributionAmount,isLoading:v}),(0,b.jsx)(aj,{contribution:x,onContributionUpdated:z,isOpen:null!==x,onClose:()=>{y(null)}})]})}}];

//# sourceMappingURL=app_links_financial_contributions_page_tsx_f2339818._.js.map