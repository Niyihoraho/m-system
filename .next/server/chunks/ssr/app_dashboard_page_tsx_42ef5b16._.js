module.exports=[20731,a=>{"use strict";a.s(["default",()=>u],20731);var b=a.i(87924),c=a.i(18402),d=a.i(50944),e=a.i(72131),f=a.i(39793),g=a.i(89130),h=a.i(42247),i=a.i(7379),j=a.i(14727),k=a.i(3314),l=a.i(67900),m=a.i(24987),n=a.i(60246),o=a.i(69769),p=a.i(23436),q=a.i(90669);let r=(0,a.i(70106).default)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]);var s=a.i(41675),t=a.i(68922);function u(){let{data:a,status:u}=(0,c.useSession)(),v=(0,d.useRouter)(),[w,x]=(0,e.useState)(null),[y,z]=(0,e.useState)(!0),[A,B]=(0,e.useState)([]),[C,D]=(0,e.useState)(!0),[E,F]=(0,e.useState)(null),[G,H]=(0,e.useState)({totalMembers:0,activeMembers:0,newThisMonth:0,recentActivity:0});(0,e.useEffect)(()=>{"unauthenticated"===u&&v.push("/")},[u,v]),(0,e.useEffect)(()=>{(async()=>{if("loading"!==u&&a?.user?.id)try{z(!0);let a=await fetch("/api/members/current-user-scope");if(a.ok){let b=await a.json();x(b.scope)}else console.error("Failed to fetch user scope")}catch(a){console.error("Error fetching user scope:",a)}finally{z(!1)}})()},[a,u]);let I=async()=>{try{D(!0),F(null),console.log("Starting to fetch members...");let[a]=await Promise.all([fetch("/api/members"),new Promise(a=>setTimeout(a,500))]);if(a.ok){let b=await a.json();console.log("Members fetched successfully:",b),B(b.members||[])}else throw Error("Failed to fetch members")}catch(a){console.error("Error fetching members:",a),F("Failed to fetch members. Please try again.")}finally{console.log("Setting loading to false"),D(!1)}};(0,e.useEffect)(()=>{"authenticated"===u&&I()},[u]),(0,e.useEffect)(()=>{if(A.length>0){let a=new Date,b=new Date(a.getFullYear(),a.getMonth(),1),c=new Date(a.getTime()-6048e5),d=A.filter(a=>"active"===a.status).length,e=A.filter(a=>new Date(a.createdAt)>=b).length,f=A.filter(a=>new Date(a.updatedAt)>=c).length;H({totalMembers:A.length,activeMembers:d,newThisMonth:e,recentActivity:f})}},[A]);let J=w?({superadmin:{title:"Super Administrator",subtitle:"Full system access",icon:k.Shield,color:"text-red-600"},national:{title:"National Administrator",subtitle:"National level access",icon:k.Shield,color:"text-blue-600"},region:{title:"Region Administrator",subtitle:w.region?`Region: ${w.region.name}`:"Region access",icon:m.MapPin,color:"text-green-600"},university:{title:"University Administrator",subtitle:w.university?`${w.university.name}`:"University access",icon:l.Building2,color:"text-purple-600"},smallgroup:{title:"Small Group Leader",subtitle:w.smallGroup?`${w.smallGroup.name} - ${w.university?.name}`:"Small group access",icon:p.Church,color:"text-orange-600"},alumnismallgroup:{title:"Alumni Group Leader",subtitle:w.alumniGroup?`${w.alumniGroup.name}`:"Alumni group access",icon:o.GraduationCap,color:"text-indigo-600"}})[w.scope]||{title:"User",subtitle:"Standard access",icon:n.Users,color:"text-muted-foreground"}:{title:"Loading...",subtitle:"",icon:k.Shield,color:"text-muted-foreground"},K=J.icon;return"loading"===u?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):"unauthenticated"===u?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Redirecting..."}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"Please wait while we redirect you to the login page."})]})}):(0,b.jsxs)(j.SidebarProvider,{children:[(0,b.jsx)(f.AppSidebar,{}),(0,b.jsxs)(j.SidebarInset,{children:[(0,b.jsxs)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,b.jsx)(j.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(i.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,b.jsx)(h.Breadcrumb,{children:(0,b.jsxs)(h.BreadcrumbList,{children:[(0,b.jsx)(h.BreadcrumbItem,{className:"hidden md:block",children:(0,b.jsx)(h.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,b.jsx)(h.BreadcrumbSeparator,{className:"hidden md:block"}),(0,b.jsx)(h.BreadcrumbItem,{children:(0,b.jsx)(h.BreadcrumbPage,{children:"Welcome"})})]})})]}),(0,b.jsxs)("div",{className:"ml-auto px-4 flex items-center gap-4",children:[!y&&w&&(0,b.jsxs)("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1 bg-muted/50 rounded-lg border border-border/20",children:[(0,b.jsx)(K,{className:`w-4 h-4 ${J.color}`}),(0,b.jsx)("span",{className:"text-sm font-medium text-foreground",children:J.title})]}),(0,b.jsx)(g.LogoutButton,{})]})]}),(0,b.jsxs)("div",{className:"flex flex-1 flex-col gap-4 p-4 pt-0",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-card via-card to-muted/20 rounded-lg shadow-sm border border-border/50 p-4",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row gap-4",children:[(0,b.jsx)("div",{className:"flex-1",children:(0,b.jsxs)("div",{className:"mb-3",children:[(0,b.jsx)("h1",{className:"text-xl font-bold text-foreground mb-2",children:"Welcome to GBUR Management System"}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-primary/20 to-primary/10 border border-primary/20 flex items-center justify-center",children:(0,b.jsx)("span",{className:"text-sm font-bold text-primary",children:(a?.user?.name||"U").charAt(0).toUpperCase()})}),(0,b.jsx)("div",{children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Hello, ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:a?.user?.name||"User"}),"!"]})})]})]})}),(0,b.jsx)("div",{className:"lg:w-72",children:(0,b.jsxs)("div",{className:"bg-gradient-to-br from-primary/8 via-primary/5 to-primary/10 border border-primary/30 rounded-lg p-3 shadow-sm",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/15 rounded-lg border border-primary/20",children:(0,b.jsx)(K,{className:`w-4 h-4 ${J.color}`})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-foreground text-sm",children:"Your Role"}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Current access level"})]})]}),y?(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("div",{className:"h-4 bg-muted animate-pulse rounded w-3/4"}),(0,b.jsx)("div",{className:"h-3 bg-muted animate-pulse rounded w-1/2"})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:`font-semibold text-sm ${J.color} mb-1`,children:J.title}),(0,b.jsx)("p",{className:"text-xs text-muted-foreground mb-2",children:J.subtitle}),w&&(0,b.jsxs)("div",{className:"space-y-1",children:[w.region&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(m.MapPin,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground",children:w.region.name})]}),w.university&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(l.Building2,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground",children:w.university.name})]}),w.smallGroup&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(p.Church,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground",children:w.smallGroup.name})]}),w.alumniGroup&&(0,b.jsxs)("div",{className:"flex items-center gap-2 text-xs",children:[(0,b.jsx)(o.GraduationCap,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-foreground",children:w.alumniGroup.name})]})]})]})]})})]})}),(0,b.jsxs)("div",{className:"grid auto-rows-min gap-4 md:grid-cols-2 lg:grid-cols-4",children:[(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-950/50 dark:to-blue-900/50 border border-blue-200 dark:border-blue-800 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-blue-600 dark:text-blue-400",children:"Total Members"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-blue-900 dark:text-blue-100",children:G.totalMembers})]}),(0,b.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:(0,b.jsx)(n.Users,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})})]})}),(0,b.jsx)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 dark:from-green-950/50 dark:to-green-900/50 border border-green-200 dark:border-green-800 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:"Active Members"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-green-900 dark:text-green-100",children:G.activeMembers})]}),(0,b.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:(0,b.jsx)(q.Activity,{className:"w-5 h-5 text-green-600 dark:text-green-400"})})]})}),(0,b.jsx)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-950/50 dark:to-purple-900/50 border border-purple-200 dark:border-purple-800 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-purple-600 dark:text-purple-400",children:"New This Month"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-purple-900 dark:text-purple-100",children:G.newThisMonth})]}),(0,b.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:(0,b.jsx)(r,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})})]})}),(0,b.jsx)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-950/50 dark:to-orange-900/50 border border-orange-200 dark:border-orange-800 rounded-xl p-4",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-orange-600 dark:text-orange-400",children:"Recent Updates"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-orange-900 dark:text-orange-100",children:G.recentActivity})]}),(0,b.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:(0,b.jsx)(s.Calendar,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})})]})})]}),(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border/50 p-4",children:[(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Quick Actions"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Common tasks based on your access level"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsx)(t.AllowOnly,{scopes:"superadmin",children:(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-red-100 dark:bg-red-900/50 rounded-lg",children:(0,b.jsx)(k.Shield,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"System Administration"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage users and system settings"})]})]})})}),(0,b.jsx)(t.AllowOnly,{scopes:["region","university"],children:(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg",children:(0,b.jsx)(l.Building2,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"Manage Organizations"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Add and manage universities/regions"})]})]})})}),(0,b.jsx)(t.AllowOnly,{scopes:"smallgroup",children:(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-orange-100 dark:bg-orange-900/50 rounded-lg",children:(0,b.jsx)(p.Church,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"Small Group Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage your small group members"})]})]})})}),(0,b.jsx)(t.AllowOnly,{scopes:"alumnismallgroup",children:(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/50 rounded-lg",children:(0,b.jsx)(o.GraduationCap,{className:"w-5 h-5 text-indigo-600 dark:text-indigo-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"Alumni Management"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Manage alumni group members"})]})]})})}),(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-green-100 dark:bg-green-900/50 rounded-lg",children:(0,b.jsx)(n.Users,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"View Members"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Browse and search member directory"})]})]})}),(0,b.jsx)("div",{className:"p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg",children:(0,b.jsx)(q.Activity,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h4",{className:"font-medium text-foreground",children:"Reports"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Generate and view reports"})]})]})})]})]})]})]})]})}}];

//# sourceMappingURL=app_dashboard_page_tsx_42ef5b16._.js.map