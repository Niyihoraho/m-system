module.exports=[68664,a=>{"use strict";a.s(["default",()=>ay],68664);var b=a.i(87924),c=a.i(72131),d=a.i(75003),e=a.i(83490),f=a.i(87532),g=a.i(69520),h=a.i(17371),i=a.i(24569),j=a.i(81560),k=a.i(77156),l=a.i(60246),m=a.i(92258),n=a.i(63519),o=a.i(41675);let p=(0,a.i(70106).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var q=a.i(39793),r=a.i(40695),s=a.i(53071),t=a.i(3130),u=a.i(5522),v=a.i(17171),w=a.i(87682),x=a.i(46842),y=a.i(43108),z=a.i(3314),A=a.i(56757);let B=A.z.object({name:A.z.string().min(1,"Name is required").max(255,"Name cannot exceed 255 characters"),username:A.z.string().min(3,"Username must be at least 3 characters").max(50,"Username cannot exceed 50 characters"),email:A.z.string().email("Invalid email address").max(255,"Email cannot exceed 255 characters"),password:A.z.string().min(6,"Password must be at least 6 characters").max(100,"Password cannot exceed 100 characters"),confirmPassword:A.z.string().min(6,"Password confirmation is required"),contact:A.z.string().max(20,"Contact cannot exceed 20 characters").optional().or(A.z.literal("")).or(A.z.null()),status:A.z.enum(["active","inactive","suspended"]).optional().default("active")}).refine(a=>a.password===a.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),C=A.z.object({id:A.z.string().min(1,"User ID is required"),name:A.z.string().min(1,"Name is required").max(255,"Name cannot exceed 255 characters").optional(),username:A.z.string().min(3,"Username must be at least 3 characters").max(50,"Username cannot exceed 50 characters").optional(),email:A.z.string().email("Invalid email address").max(255,"Email cannot exceed 255 characters").optional(),password:A.z.string().min(6,"Password must be at least 6 characters").max(100,"Password cannot exceed 100 characters").optional(),contact:A.z.string().max(20,"Contact cannot exceed 20 characters").optional().or(A.z.literal("")).or(A.z.null()),status:A.z.enum(["active","inactive","suspended"]).optional()});function D({children:a,onUserAdded:d}){let[e,f]=c.useState(!1),[g,i]=c.useState(!1),[j,k]=c.useState({}),[l,o]=c.useState(!1),[p,q]=c.useState({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),A=(a,b)=>{q(c=>({...c,[a]:b})),j[a]&&k(b=>({...b,[a]:""})),l&&o(!1)},C=async a=>{if(a.preventDefault(),(()=>{try{return B.parse(p),k({}),!0}catch(b){let a={};return b.errors&&b.errors.forEach(b=>{a[b.path[0]]=b.message}),k(a),!1}})()){i(!0),k({});try{let a=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),b=await a.json();if(!a.ok){if(b.details&&Array.isArray(b.details)){let a={};b.details.forEach(b=>{a[b.path[0]]=b.message}),k(a)}else k({general:b.error||"Failed to create user"});return}o(!0),q({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),setTimeout(()=>{d?.(),f(!1),o(!1)},1500)}catch(a){console.error("Error creating user:",a),k({general:"Failed to create user. Please try again."})}finally{i(!1)}}};return(0,b.jsxs)(s.Sheet,{open:e,onOpenChange:f,children:[(0,b.jsx)(s.SheetTrigger,{asChild:!0,children:a}),(0,b.jsxs)(s.SheetContent,{className:"w-full sm:max-w-2xl h-full flex flex-col",children:[(0,b.jsxs)(s.SheetHeader,{className:"flex-shrink-0",children:[(0,b.jsxs)(s.SheetTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(h.UserPlus,{className:"h-5 w-5"}),"Add New User"]}),(0,b.jsx)(s.SheetDescription,{children:"Create a new user account with appropriate permissions and access levels."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,b.jsxs)(t.Card,{className:"shadow-lg",children:[(0,b.jsx)(t.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"User Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new user"})]})}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:C,className:"flex flex-col gap-6",children:[j.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),l&&(0,b.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:"User created successfully!"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"User Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.User,{className:"h-4 w-4"}),"Full Name *"]}),(0,b.jsx)(u.Input,{id:"name",placeholder:"Enter full name",className:"h-11",value:p.name,onChange:a=>A("name",a.target.value),required:!0}),j.name&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"username",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.User,{className:"h-4 w-4"}),"Username *"]}),(0,b.jsx)(u.Input,{id:"username",placeholder:"Enter username",className:"h-11",value:p.username,onChange:a=>A("username",a.target.value),required:!0}),j.username&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.username})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(m.Mail,{className:"h-4 w-4"}),"Email Address *"]}),(0,b.jsx)(u.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:p.email,onChange:a=>A("email",a.target.value),required:!0}),j.email&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"contact",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(n.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,b.jsx)(u.Input,{id:"contact",placeholder:"Enter contact number",className:"h-11",value:p.contact,onChange:a=>A("contact",a.target.value)}),j.contact&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.contact})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"status",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(z.Shield,{className:"h-4 w-4"}),"Status"]}),(0,b.jsxs)(w.Select,{value:p.status,onValueChange:a=>A("status",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(w.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(w.SelectItem,{value:"suspended",children:"Suspended"})]})]}),j.status&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.status})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Security"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"password",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(y.Lock,{className:"h-4 w-4"}),"Password *"]}),(0,b.jsx)(u.Input,{id:"password",type:"password",placeholder:"Enter password (min 6 characters)",className:"h-11",value:p.password,onChange:a=>A("password",a.target.value),required:!0}),j.password&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.password})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"confirmPassword",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(y.Lock,{className:"h-4 w-4"}),"Confirm Password *"]}),(0,b.jsx)(u.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm password",className:"h-11",value:p.confirmPassword,onChange:a=>A("confirmPassword",a.target.value),required:!0}),j.confirmPassword&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.confirmPassword})]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,b.jsx)(r.Button,{type:"submit",className:"flex-1 h-11",disabled:g,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating User..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.UserPlus,{className:"h-4 w-4 mr-2"}),"Create User"]})}),(0,b.jsx)(r.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{f(!1),q({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),k({}),o(!1)},disabled:g,children:"Cancel"})]})]})})]})})]})]})}A.z.object({userId:A.z.string().min(1,"User ID is required"),regionId:A.z.number().int().positive().optional().or(A.z.null()),universityId:A.z.number().int().positive().optional().or(A.z.null()),smallGroupId:A.z.number().int().positive().optional().or(A.z.null()),alumniGroupId:A.z.number().int().positive().optional().or(A.z.null()),scope:A.z.enum(["superadmin","national","region","university","smallgroup","alumnismallgroup"]).default("superadmin")});var E=a.i(50104),F=a.i(70121),G=a.i(97942),H=a.i(7554),I=a.i(11011),J="AlertDialog",[K,L]=(0,E.createContextScope)(J,[G.createDialogScope]),M=(0,G.createDialogScope)(),N=a=>{let{__scopeAlertDialog:c,...d}=a,e=M(c);return(0,b.jsx)(G.Root,{...e,...d,modal:!0})};N.displayName=J,c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,b.jsx)(G.Trigger,{...f,...e,ref:c})}).displayName="AlertDialogTrigger";var O=a=>{let{__scopeAlertDialog:c,...d}=a,e=M(c);return(0,b.jsx)(G.Portal,{...e,...d})};O.displayName="AlertDialogPortal";var P=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,b.jsx)(G.Overlay,{...f,...e,ref:c})});P.displayName="AlertDialogOverlay";var Q="AlertDialogContent",[R,S]=K(Q),T=(0,I.createSlottable)("AlertDialogContent"),U=c.forwardRef((a,d)=>{let{__scopeAlertDialog:e,children:f,...g}=a,h=M(e),i=c.useRef(null),j=(0,F.useComposedRefs)(d,i),k=c.useRef(null);return(0,b.jsx)(G.WarningProvider,{contentName:Q,titleName:V,docsSlug:"alert-dialog",children:(0,b.jsx)(R,{scope:e,cancelRef:k,children:(0,b.jsxs)(G.Content,{role:"alertdialog",...h,...g,ref:j,onOpenAutoFocus:(0,H.composeEventHandlers)(g.onOpenAutoFocus,a=>{a.preventDefault(),k.current?.focus({preventScroll:!0})}),onPointerDownOutside:a=>a.preventDefault(),onInteractOutside:a=>a.preventDefault(),children:[(0,b.jsx)(T,{children:f}),(0,b.jsx)(aa,{contentRef:i})]})})})});U.displayName=Q;var V="AlertDialogTitle",W=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,b.jsx)(G.Title,{...f,...e,ref:c})});W.displayName=V;var X="AlertDialogDescription",Y=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,b.jsx)(G.Description,{...f,...e,ref:c})});Y.displayName=X;var Z=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,f=M(d);return(0,b.jsx)(G.Close,{...f,...e,ref:c})});Z.displayName="AlertDialogAction";var $="AlertDialogCancel",_=c.forwardRef((a,c)=>{let{__scopeAlertDialog:d,...e}=a,{cancelRef:f}=S($,d),g=M(d),h=(0,F.useComposedRefs)(c,f);return(0,b.jsx)(G.Close,{...g,...e,ref:h})});_.displayName=$;var aa=({contentRef:a})=>{let b=`\`${Q}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Q}\` by passing a \`${X}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Q}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return c.useEffect(()=>{document.getElementById(a.current?.getAttribute("aria-describedby"))||console.warn(b)},[b,a]),null},ab=a.i(97895);let ac=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(P,{className:(0,ab.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...c,ref:d}));ac.displayName=P.displayName;let ad=c.forwardRef(({className:a,...c},d)=>(0,b.jsxs)(O,{children:[(0,b.jsx)(ac,{}),(0,b.jsx)(U,{ref:d,className:(0,ab.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...c})]}));ad.displayName=U.displayName;let ae=({className:a,...c})=>(0,b.jsx)("div",{className:(0,ab.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...c});ae.displayName="AlertDialogHeader";let af=({className:a,...c})=>(0,b.jsx)("div",{className:(0,ab.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...c});af.displayName="AlertDialogFooter";let ag=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(W,{ref:d,className:(0,ab.cn)("text-lg font-semibold",a),...c}));ag.displayName=W.displayName;let ah=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Y,{ref:d,className:(0,ab.cn)("text-sm text-muted-foreground",a),...c}));ah.displayName=Y.displayName;let ai=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(Z,{ref:d,className:(0,ab.cn)((0,r.buttonVariants)(),a),...c}));ai.displayName=Z.displayName;let aj=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(_,{ref:d,className:(0,ab.cn)((0,r.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",a),...c}));aj.displayName=_.displayName;var ak=a.i(73570);function al({isOpen:a,onClose:c,onConfirm:d,userName:e,isLoading:f=!1}){return(0,b.jsx)(N,{open:a,onOpenChange:c,children:(0,b.jsxs)(ad,{className:"sm:max-w-md",children:[(0,b.jsxs)(ae,{children:[(0,b.jsxs)(ag,{className:"flex items-center gap-2",children:[(0,b.jsx)(ak.AlertTriangle,{className:"h-5 w-5 text-destructive"}),"Delete User"]}),(0,b.jsxs)(ah,{className:"text-left",children:["Are you sure you want to delete ",(0,b.jsx)("span",{className:"font-semibold text-foreground",children:e}),"? This action cannot be undone and will permanently remove the user and all associated data."]})]}),(0,b.jsxs)(af,{className:"flex-col sm:flex-row gap-2",children:[(0,b.jsx)(aj,{onClick:c,disabled:f,className:"w-full sm:w-auto",children:"Cancel"}),(0,b.jsx)(ai,{onClick:d,disabled:f,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",children:f?(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Deleting..."]}):(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(j.Trash2,{className:"h-4 w-4"}),"Delete User"]})})]})]})})}function am({user:a,onUserUpdated:d,isOpen:e,onClose:f}){let[g,h]=c.useState(!1),[j,k]=c.useState({}),[l,o]=c.useState(!1),[p,q]=c.useState({id:"",name:"",username:"",email:"",password:"",contact:"",status:"active"});c.useEffect(()=>{a&&q({id:a.id,name:a.name||"",username:a.username||"",email:a.email||"",password:"",contact:a.contact||"",status:a.status||"active"})},[a]);let A=(a,b)=>{q(c=>({...c,[a]:b})),j[a]&&k(b=>({...b,[a]:""})),l&&o(!1)},B=async a=>{if(a.preventDefault(),(()=>{try{return C.parse(p),k({}),!0}catch(b){let a={};return b.errors&&b.errors.forEach(b=>{a[b.path[0]]=b.message}),k(a),!1}})()){h(!0),k({});try{let a=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),b=await a.json();if(!a.ok){if(b.details&&Array.isArray(b.details)){let a={};b.details.forEach(b=>{a[b.path[0]]=b.message}),k(a)}else k({general:b.error||"Failed to update user"});return}o(!0),setTimeout(()=>{d?.(),f(),o(!1)},1500)}catch(a){console.error("Error updating user:",a),k({general:"Failed to update user. Please try again."})}finally{h(!1)}}},D=()=>{f(),q({id:"",name:"",username:"",email:"",password:"",contact:"",status:"active"}),k({}),o(!1)};return a?(0,b.jsx)(s.Sheet,{open:e,onOpenChange:D,children:(0,b.jsxs)(s.SheetContent,{className:"w-full sm:max-w-2xl h-full flex flex-col",children:[(0,b.jsxs)(s.SheetHeader,{className:"flex-shrink-0",children:[(0,b.jsxs)(s.SheetTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(i.Edit,{className:"h-5 w-5"}),"Edit User"]}),(0,b.jsx)(s.SheetDescription,{children:"Update user information and permissions."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,b.jsxs)(t.Card,{className:"shadow-lg",children:[(0,b.jsx)(t.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"User Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below"})]})}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:B,className:"flex flex-col gap-6",children:[j.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),l&&(0,b.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:"User updated successfully!"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"User Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.User,{className:"h-4 w-4"}),"Full Name *"]}),(0,b.jsx)(u.Input,{id:"name",placeholder:"Enter full name",className:"h-11",value:p.name,onChange:a=>A("name",a.target.value),required:!0}),j.name&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.name})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"username",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(x.User,{className:"h-4 w-4"}),"Username *"]}),(0,b.jsx)(u.Input,{id:"username",placeholder:"Enter username",className:"h-11",value:p.username,onChange:a=>A("username",a.target.value),required:!0}),j.username&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.username})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(m.Mail,{className:"h-4 w-4"}),"Email Address *"]}),(0,b.jsx)(u.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:p.email,onChange:a=>A("email",a.target.value),required:!0}),j.email&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"contact",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(n.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,b.jsx)(u.Input,{id:"contact",placeholder:"Enter contact number",className:"h-11",value:p.contact,onChange:a=>A("contact",a.target.value)}),j.contact&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.contact})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"status",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(z.Shield,{className:"h-4 w-4"}),"Status"]}),(0,b.jsxs)(w.Select,{value:p.status,onValueChange:a=>A("status",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(w.SelectContent,{children:[(0,b.jsx)(w.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(w.SelectItem,{value:"inactive",children:"Inactive"}),(0,b.jsx)(w.SelectItem,{value:"suspended",children:"Suspended"})]})]}),j.status&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.status})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Security"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"password",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(y.Lock,{className:"h-4 w-4"}),"New Password (leave blank to keep current password)"]}),(0,b.jsx)(u.Input,{id:"password",type:"password",placeholder:"Enter new password (min 6 characters)",className:"h-11",value:p.password,onChange:a=>A("password",a.target.value)}),j.password&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.password})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,b.jsx)(r.Button,{type:"submit",className:"flex-1 h-11",disabled:g,children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating User..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Edit,{className:"h-4 w-4 mr-2"}),"Update User"]})}),(0,b.jsx)(r.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:D,disabled:g,children:"Cancel"})]})]})})]})})]})}):null}var an=a.i(24987),ao=a.i(67900),ap=a.i(69769);function aq({children:a,userId:d,userName:f,existingRole:g,onRoleAssigned:h}){let[i,j]=c.useState(!1),[k,m]=c.useState(!1),[n,o]=c.useState({}),[p,q]=c.useState(!1),[u,x]=c.useState([]),[y,A]=c.useState([]),[B,C]=c.useState([]),[D,E]=c.useState([]),[F,G]=c.useState({userId:d,regionId:g?.regionId?.toString()||"",universityId:g?.universityId?.toString()||"",smallGroupId:g?.smallGroupId?.toString()||"",alumniGroupId:g?.alumniGroupId?.toString()||"",scope:g?.scope||"superadmin"});c.useEffect(()=>{H()},[]),c.useEffect(()=>{F.regionId?(I(Number(F.regionId)),K(Number(F.regionId))):(A([]),E([]),G(a=>({...a,universityId:"",alumniGroupId:""})))},[F.regionId]),c.useEffect(()=>{F.universityId&&F.regionId?J(Number(F.regionId),Number(F.universityId)):(C([]),G(a=>({...a,smallGroupId:""})))},[F.universityId,F.regionId]);let H=async()=>{try{console.log("Fetching regions...");let a=await e.default.get("/api/regions");console.log("Regions response:",a.data),a.data&&Array.isArray(a.data)?(x(a.data),console.log("Regions set:",a.data)):console.error("Unexpected regions response format:",a.data)}catch(a){console.error("Error fetching regions:",a)}},I=async a=>{try{let b=await e.default.get(`/api/universities?regionId=${a}`);b.data&&Array.isArray(b.data)&&A(b.data)}catch(a){console.error("Error fetching universities:",a)}},J=async(a,b)=>{try{let c=await e.default.get(`/api/small-groups?regionId=${a}&universityId=${b}`);c.data&&Array.isArray(c.data)&&C(c.data)}catch(a){console.error("Error fetching small groups:",a)}},K=async a=>{try{let b=await e.default.get(`/api/alumni-small-groups?regionId=${a}`);b.data&&Array.isArray(b.data)&&E(b.data)}catch(a){console.error("Error fetching alumni groups:",a)}},L=(a,b)=>{"scope"===a?G(a=>({...a,scope:b,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:""})):"regionId"===a?G(a=>({...a,regionId:b,universityId:"",smallGroupId:"",alumniGroupId:""})):"universityId"===a?G(a=>({...a,universityId:b,smallGroupId:""})):G(c=>({...c,[a]:b})),n[a]&&o(b=>({...b,[a]:""})),p&&q(!1)},M=async a=>{if(a.preventDefault(),(()=>{let a={};return F.scope||(a.scope="Role scope is required"),"region"!==F.scope||F.regionId||(a.regionId="Region is required for region scope"),"university"!==F.scope||F.universityId||(a.universityId="University is required for university scope"),"smallgroup"!==F.scope||F.smallGroupId||(a.smallGroupId="Small group is required for small group scope"),"alumnismallgroup"!==F.scope||F.alumniGroupId||(a.alumniGroupId="Alumni small group is required for alumni small group scope"),o(a),0===Object.keys(a).length})()){m(!0),o({});try{let a,b={userId:F.userId,scope:F.scope,regionId:F.regionId?Number(F.regionId):null,universityId:F.universityId?Number(F.universityId):null,smallGroupId:F.smallGroupId?Number(F.smallGroupId):null,alumniGroupId:F.alumniGroupId?Number(F.alumniGroupId):null};console.log("Submitting data:",b),a=g?await e.default.put("/api/user-roles",{id:g.id,...b}):await e.default.post("/api/user-roles",b),(200===a.status||201===a.status)&&(q(!0),setTimeout(()=>{h?.(),j(!1),q(!1),G({userId:d,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",scope:"superadmin"})},1500))}catch(a){if(console.error("Error assigning role:",a),console.error("Error response:",a.response?.data),a.response?.data?.details&&Array.isArray(a.response.data.details)){let b={};a.response.data.details.forEach(a=>{b[a.path[0]]=a.message}),o(b)}else o({general:a.response?.data?.error||"Failed to assign role. Please try again."})}finally{m(!1)}}},N=()=>"region"===F.scope&&F.regionId?u.find(a=>a.id.toString()===F.regionId)?.name:"university"===F.scope&&F.universityId?y.find(a=>a.id.toString()===F.universityId)?.name:"smallgroup"===F.scope&&F.smallGroupId?B.find(a=>a.id.toString()===F.smallGroupId)?.name:"alumnismallgroup"===F.scope&&F.alumniGroupId?D.find(a=>a.id.toString()===F.alumniGroupId)?.name:null,O=[{value:"superadmin",label:"Super Admin"},{value:"national",label:"National"},{value:"region",label:"Region"},{value:"university",label:"University"},{value:"smallgroup",label:"Small Group"},{value:"alumnismallgroup",label:"Alumni Small Group"}];return(0,b.jsxs)(s.Sheet,{open:i,onOpenChange:j,children:[(0,b.jsx)(s.SheetTrigger,{asChild:!0,children:a}),(0,b.jsxs)(s.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,b.jsxs)(s.SheetHeader,{className:"sticky top-0 bg-background z-10 pb-4",children:[(0,b.jsxs)(s.SheetTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(z.Shield,{className:"h-5 w-5"}),g?"Update Role for":"Assign Role to"," ",f]}),(0,b.jsx)(s.SheetDescription,{children:g?"Update user permissions and access scope.":"Configure user permissions and access scope for this user."})]}),(0,b.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,b.jsxs)(t.Card,{className:"shadow-lg",children:[(0,b.jsx)(t.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Role Assignment"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select the appropriate scope and permission level"})]})}),(0,b.jsx)(t.CardContent,{children:(0,b.jsxs)("form",{onSubmit:M,className:"flex flex-col gap-6",children:[n.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:n.general}),p&&(0,b.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:g?"Role updated successfully!":"Role assigned successfully!"}),(0,b.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"User Information"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Name:"})," ",f]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"User ID:"})," ",d]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Role Scope"}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"scope",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(z.Shield,{className:"h-4 w-4"}),"Role Scope *"]}),(0,b.jsxs)(w.Select,{value:F.scope,onValueChange:a=>L("scope",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select role scope"})}),(0,b.jsx)(w.SelectContent,{children:O.map(a=>(0,b.jsx)(w.SelectItem,{value:a.value,children:a.label},a.value))})]}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:{superadmin:"Full system access across all entities",national:"National level access and management",region:"Access limited to specific region",university:"Access limited to specific university",smallgroup:"Access limited to specific small group",alumnismallgroup:"Access limited to specific alumni small group"}[F.scope]||""}),n.scope&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.scope})]})]}),("region"===F.scope||"university"===F.scope||"smallgroup"===F.scope||"alumnismallgroup"===F.scope)&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(an.MapPin,{className:"h-4 w-4"}),"Region","region"===F.scope?" *":""]}),(0,b.jsxs)(w.Select,{value:F.regionId,onValueChange:a=>L("regionId",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select region"})}),(0,b.jsxs)(w.SelectContent,{children:[console.log("Rendering regions in dropdown:",u),u.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]}),n.regionId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.regionId})]}),("university"===F.scope||"smallgroup"===F.scope)&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(ao.Building2,{className:"h-4 w-4"}),"University","university"===F.scope?" *":""]}),(0,b.jsxs)(w.Select,{value:F.universityId,onValueChange:a=>L("universityId",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select university"})}),(0,b.jsx)(w.SelectContent,{children:y.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),n.universityId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.universityId})]}),"smallgroup"===F.scope&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4"}),"Small Group *"]}),(0,b.jsxs)(w.Select,{value:F.smallGroupId,onValueChange:a=>L("smallGroupId",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select small group"})}),(0,b.jsx)(w.SelectContent,{children:B.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),n.smallGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.smallGroupId})]}),"alumnismallgroup"===F.scope&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(v.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(ap.GraduationCap,{className:"h-4 w-4"}),"Alumni Small Group *"]}),(0,b.jsxs)(w.Select,{value:F.alumniGroupId,onValueChange:a=>L("alumniGroupId",a),children:[(0,b.jsx)(w.SelectTrigger,{className:"h-11",children:(0,b.jsx)(w.SelectValue,{placeholder:"Select alumni small group"})}),(0,b.jsx)(w.SelectContent,{children:D.map(a=>(0,b.jsx)(w.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),n.alumniGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:n.alumniGroupId})]}),(0,b.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,b.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Role Summary"}),(0,b.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"User:"})," ",f]}),(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Scope:"})," ",O.find(a=>a.value===F.scope)?.label]}),N()&&(0,b.jsxs)("p",{children:[(0,b.jsx)("strong",{children:"Entity:"})," ",N()]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t",children:[(0,b.jsx)(r.Button,{type:"submit",className:"flex-1 h-11",disabled:k,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),g?"Updating Role...":"Assigning Role..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(z.Shield,{className:"h-4 w-4 mr-2"}),g?"Update Role":"Assign Role"]})}),(0,b.jsx)(r.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{j(!1),G({userId:d,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",scope:"superadmin"}),o({}),q(!1)},disabled:k,children:"Cancel"})]})]})})]})})]})]})}var ar=a.i(42247),as=a.i(7379),at=a.i(14727);let au={active:"Active",inactive:"Inactive",suspended:"Suspended"},av={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"},aw={superadmin:"Super Admin",admin:"Admin",moderator:"Moderator",user:"User"},ax={superadmin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",moderator:"bg-yellow-100 text-yellow-800",user:"bg-gray-100 text-gray-800"};function ay(){let{data:a,status:r}=(0,d.useSession)(),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)(!0),[y,z]=(0,c.useState)(null),[A,B]=(0,c.useState)(1),[C]=(0,c.useState)(10),[E,F]=(0,c.useState)({isOpen:!1,userId:null,userName:""}),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(null);(0,c.useEffect)(()=>{K()},[A,s]);let K=async()=>{try{x(!0),z(null);let a=await e.default.get(`/api/users?page=${A}&limit=${C}&search=${s}`);v(a.data.users||[])}catch(a){console.error("Error fetching users:",a),z("Failed to fetch users. Please try again.")}finally{x(!1)}},L=()=>{F({isOpen:!1,userId:null,userName:""})},M=async()=>{if(E.userId){H(!0);try{let a=await e.default.delete(`/api/users?id=${E.userId}`);200===a.status&&(v(a=>a.filter(a=>a.id!==E.userId)),L(),console.log("User deleted successfully"))}catch(a){console.error("Error deleting user:",a),alert("Failed to delete user. Please try again.")}finally{H(!1)}}},N=u.filter(a=>{if(!s)return!0;let b=s.toLowerCase();return a.name?.toLowerCase().includes(b)||a.username?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.contact?.includes(s)||a.status?.toLowerCase().includes(b)||au[a.status]?.toLowerCase().includes(b)});return((0,c.useEffect)(()=>{B(1)},[s]),"loading"===r)?(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):"unauthenticated"!==r&&a?(0,b.jsxs)(at.SidebarProvider,{children:[(0,b.jsx)(q.AppSidebar,{}),(0,b.jsxs)(at.SidebarInset,{children:[(0,b.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,b.jsx)(at.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(as.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,b.jsx)(ar.Breadcrumb,{children:(0,b.jsxs)(ar.BreadcrumbList,{children:[(0,b.jsx)(ar.BreadcrumbItem,{className:"hidden md:block",children:(0,b.jsx)(ar.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,b.jsx)(ar.BreadcrumbSeparator,{className:"hidden md:block"}),(0,b.jsx)(ar.BreadcrumbItem,{children:(0,b.jsx)(ar.BreadcrumbLink,{href:"/links/admin/user-management",children:"Admin"})}),(0,b.jsx)(ar.BreadcrumbSeparator,{}),(0,b.jsx)(ar.BreadcrumbItem,{children:(0,b.jsx)(ar.BreadcrumbPage,{children:"User Management"})})]})})]})}),(0,b.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,b.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"User Management"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage system users and their permissions"})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search users...",value:s,onChange:a=>t(a.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,b.jsxs)("button",{onClick:K,disabled:w,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(g.RefreshCw,{className:`w-4 h-4 ${w?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:w?"Loading...":"Refresh"})]})]}),(0,b.jsx)(D,{onUserAdded:K,children:(0,b.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,b.jsx)(h.UserPlus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add New User"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Add User"})]})})]}),y&&(0,b.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,b.jsx)("span",{className:"text-sm",children:y})]}),(0,b.jsx)("button",{onClick:K,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[w?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(g.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{children:"Loading users..."})]})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Roles & Permissions"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-card divide-y divide-border",children:N.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,b.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[a.name?.[0],a.username?.[0]]})})}),(0,b.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,b.jsx)("div",{className:"text-sm font-medium text-foreground truncate",children:a.name}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,b.jsxs)("span",{children:["@",a.username]}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:a.id})]}),(0,b.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,b.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,b.jsx)(m.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.email})]}),a.contact&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(n.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.contact})]})]})]})]})}),(0,b.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,b.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,b.jsx)(m.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:a.email})]}),a.contact&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(n.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.contact})]})]}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:(0,b.jsx)("div",{className:"space-y-1",children:a.userrole&&a.userrole.length>0?a.userrole.map((a,c)=>(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${ax[a.scope]}`,children:aw[a.scope]}),a.region&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Region: ",a.region.name]}),a.university&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["University: ",a.university.name]}),a.smallgroup&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Small Group: ",a.smallgroup.name]}),a.alumnismallgroup&&(0,b.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Alumni Group: ",a.alumnismallgroup.name]})]},c)):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"No roles assigned"})})}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${av[a.status]}`,children:au[a.status]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Calendar,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:new Date(a.createdAt).toLocaleDateString()})]})]})}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{className:"text-primary hover:text-primary/80 p-1 rounded",title:"View",children:(0,b.jsx)(k.Eye,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{J(a)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,b.jsx)(i.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(aq,{userId:a.id,userName:a.name||a.username,onRoleAssigned:K,children:(0,b.jsx)("button",{className:"text-blue-600 hover:text-blue-700 p-1 rounded",title:"Assign Role",children:(0,b.jsx)(p,{className:"w-4 h-4"})})}),(0,b.jsx)("button",{onClick:()=>{F({isOpen:!0,userId:a.id,userName:a.name||a.username})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})]})})]},a.id))})]})}),!w&&0===N.length&&!y&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(l.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No users found"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:s?"No users match your search criteria.":"No users have been added yet."}),!s&&(0,b.jsx)(D,{onUserAdded:K,children:(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(h.UserPlus,{className:"w-4 h-4"}),"Add First User"]})})]})]})]})})]}),(0,b.jsx)(al,{isOpen:E.isOpen,onClose:L,onConfirm:M,userName:E.userName,isLoading:G}),(0,b.jsx)(am,{user:I,onUserUpdated:K,isOpen:null!==I,onClose:()=>{J(null)}})]}):(0,b.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"You need to be logged in to access this page."}),(0,b.jsx)("a",{href:"/",className:"text-primary hover:underline",children:"Go to Login"})]})})}}];

//# sourceMappingURL=app_links_admin_user-management_page_tsx_de99b4cd._.js.map