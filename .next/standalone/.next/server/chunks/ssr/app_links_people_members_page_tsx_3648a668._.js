module.exports=[94974,a=>{"use strict";a.s(["default",()=>$],94974);var b=a.i(87924),c=a.i(72131),d=a.i(83490),e=a.i(39793),f=a.i(87532),g=a.i(69520),h=a.i(17371),i=a.i(24569),j=a.i(81560),k=a.i(77156),l=a.i(60246),m=a.i(41675),n=a.i(24987),o=a.i(63519),p=a.i(92258),q=a.i(69769),r=a.i(67900),s=a.i(23436),t=a.i(51131),u=a.i(87853),v=a.i(19040),w=a.i(64443),x=a.i(48501),y=a.i(63743),z=a.i(46842),A=a.i(12985),B=a.i(56757);let C=B.z.object({firstname:B.z.string().min(1,"First Name is required").max(255,"First Name cannot exceed 255 characters"),secondname:B.z.string().min(1,"Second Name is required").max(255,"Second Name cannot exceed 255 characters"),gender:B.z.enum(["male","female","Male","Female"]).optional().or(B.z.literal("")).or(B.z.null()),birthdate:B.z.string().optional().or(B.z.literal("")).or(B.z.null()).transform(a=>{if(!a||""===a||null===a)return null;let b=new Date(a);return isNaN(b.getTime())?null:b}),placeOfBirthProvince:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthDistrict:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthSector:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthCell:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthVillage:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),localChurch:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),email:B.z.string().email("Invalid Email").max(255).optional().or(B.z.literal("")).or(B.z.null()),phone:B.z.string().max(20,"Phone cannot exceed 20 characters").optional().or(B.z.literal("")).or(B.z.null()),type:B.z.enum(["student","graduate","staff","volunteer","alumni","Student","Graduate","Staff","Volunteer","Alumni"]),status:B.z.enum(["active","pre_graduate","graduate","alumni","inactive","Active","Pre_graduate","Graduate","Alumni","Inactive"]).optional().default("active"),regionId:B.z.union([B.z.string().transform(a=>{if(!a||""===a||null===a)return null;let b=Number(a);return isNaN(b)?null:b}),B.z.number().int().positive(),B.z.null()]).optional(),smallGroupId:B.z.union([B.z.string().transform(a=>{if(!a||""===a||null===a)return null;let b=Number(a);return isNaN(b)?null:b}),B.z.number().int().positive(),B.z.null()]).optional(),universityId:B.z.union([B.z.string().transform(a=>{if(!a||""===a||null===a)return null;let b=Number(a);return isNaN(b)?null:b}),B.z.number().int().positive(),B.z.null()]).optional(),alumniGroupId:B.z.union([B.z.string().transform(a=>{if(!a||""===a||null===a)return null;let b=Number(a);return isNaN(b)?null:b}),B.z.number().int().positive(),B.z.null()]).optional(),graduationDate:B.z.string().optional().or(B.z.literal("")).or(B.z.null()).transform(a=>{if(!a||""===a||null===a)return null;let b=new Date(a);return isNaN(b.getTime())?null:b}),faculty:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),professionalism:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),maritalStatus:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null())});function D({children:a,onMemberAdded:d}){let[e,f]=c.useState(!1),[g,i]=c.useState(!1),[j,k]=c.useState({}),[B,D]=c.useState(!1),{userScope:E,loading:F,getVisibleFields:G,getDefaultValues:H}=(0,A.useUserScope)(),I=G(),J=c.useMemo(()=>H(),[H]),[K,L]=c.useState({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),[M,N]=c.useState([]),[O,P]=c.useState([]),[Q,R]=c.useState([]),[S,T]=c.useState([]),[U,V]=c.useState([]),[W,X]=c.useState({}),[Y,Z]=c.useState([]),[$,_]=c.useState(!1),[aa,ab]=c.useState([]),[ac,ad]=c.useState([]),[ae,af]=c.useState([]),[ag,ah]=c.useState({});c.useEffect(()=>{E&&!F&&L(a=>({...a,regionId:J.regionId||"",universityId:J.universityId||"",smallGroupId:J.smallGroupId||"",alumniGroupId:J.alumniGroupId||""}))},[E,F,J]),c.useEffect(()=>{K.universityId?aj(K.universityId):Z([])},[K.universityId]),c.useEffect(()=>{E?.scope!=="superadmin"||F||ak()},[E?.scope,F]),c.useEffect(()=>{E?.scope==="superadmin"&&K.regionId?al(K.regionId):ad([])},[K.regionId,E?.scope]),c.useEffect(()=>{E?.scope==="superadmin"&&K.regionId?am(K.regionId):af([])},[K.regionId,E?.scope]);let ai=async(a,b)=>{X(b=>({...b,[a]:!0}));try{let c=b?`/api/locations?type=${a}&parentId=${b}`:`/api/locations?type=${a}`,d=await fetch(c),e=await d.json();if(d.ok)switch(a){case"provinces":N(e);break;case"districts":P(e);break;case"sectors":R(e);break;case"cells":T(e);break;case"villages":V(e)}else console.error(`API Error for ${a}:`,e)}catch(b){console.error(`Error fetching ${a}:`,b)}finally{X(b=>({...b,[a]:!1}))}},aj=async a=>{if(!a)return void Z([]);_(!0);try{let b=await fetch(`/api/small-groups?universityId=${a}`);if(!b.ok)throw Error("Failed to fetch small groups");let c=await b.json();Z(c)}catch(a){console.error("Error fetching small groups:",a),Z([])}finally{_(!1)}},ak=async()=>{ah(a=>({...a,regions:!0}));try{let a=await fetch("/api/regions");if(!a.ok)throw Error("Failed to fetch regions");let b=await a.json();ab(b)}catch(a){console.error("Error fetching regions:",a),ab([])}finally{ah(a=>({...a,regions:!1}))}},al=async a=>{if(!a)return void ad([]);ah(a=>({...a,universities:!0}));try{let b=await fetch(`/api/universities?regionId=${a}`);if(!b.ok)throw Error("Failed to fetch universities");let c=await b.json();ad(c)}catch(a){console.error("Error fetching universities:",a),ad([])}finally{ah(a=>({...a,universities:!1}))}},am=async a=>{if(!a)return void af([]);ah(a=>({...a,alumniGroups:!0}));try{let b=await fetch(`/api/alumni-small-groups?regionId=${a}`);if(!b.ok)throw Error("Failed to fetch alumni groups");let c=await b.json();af(c)}catch(a){console.error("Error fetching alumni groups:",a),af([])}finally{ah(a=>({...a,alumniGroups:!1}))}},an=(a,b)=>{L(c=>({...c,[a]:b})),j[a]&&k(b=>({...b,[a]:""})),B&&D(!1),"placeOfBirthProvince"===a?(L(a=>({...a,placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),P([]),R([]),T([]),V([]),b&&ai("districts",b)):"placeOfBirthDistrict"===a?(L(a=>({...a,placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),R([]),T([]),V([]),b&&ai("sectors",b)):"placeOfBirthSector"===a?(L(a=>({...a,placeOfBirthCell:"",placeOfBirthVillage:""})),T([]),V([]),b&&ai("cells",b)):"placeOfBirthCell"===a&&(L(a=>({...a,placeOfBirthVillage:""})),V([]),b&&ai("villages",b))};c.useEffect(()=>{e&&(ai("provinces"),setTimeout(()=>{0===M.length&&N([{id:"1",name:"Kigali City"},{id:"2",name:"Southern Province"},{id:"3",name:"Western Province"},{id:"4",name:"Northern Province"},{id:"5",name:"Eastern Province"}])},2e3))},[e]);let ao=async a=>{if(a.preventDefault(),(()=>{try{return C.parse(K),k({}),!0}catch(b){let a={};return b&&"object"==typeof b&&"errors"in b&&Array.isArray(b.errors)&&b.errors.forEach(b=>{a[b.path[0]]=b.message}),k(a),!1}})()){i(!0);try{let a={...K,gender:K.gender||null,birthdate:K.birthdate||null,placeOfBirthProvince:K.placeOfBirthProvince||null,placeOfBirthDistrict:K.placeOfBirthDistrict||null,placeOfBirthSector:K.placeOfBirthSector||null,placeOfBirthCell:K.placeOfBirthCell||null,placeOfBirthVillage:K.placeOfBirthVillage||null,localChurch:K.localChurch||null,email:K.email||null,phone:K.phone||null,regionId:K.regionId||null,universityId:K.universityId||null,smallGroupId:K.smallGroupId||null,alumniGroupId:K.alumniGroupId||null,graduationDate:K.graduationDate||null,faculty:K.faculty||null,professionalism:K.professionalism||null,maritalStatus:K.maritalStatus||null},b=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json();b.ok?(D(!0),k({}),L({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),P([]),R([]),T([]),V([]),d&&d(),setTimeout(()=>{f(!1),D(!1)},1500)):(console.error("API Error:",c),c.details?k({general:Array.isArray(c.details)?c.details.map(a=>a.message).join(", "):c.details}):k({general:c.error||"Failed to create member"}))}catch(a){console.error("Error creating member:",a),k({general:"An unexpected error occurred"})}finally{i(!1)}}};return(0,b.jsxs)(y.Sheet,{open:e,onOpenChange:f,children:[(0,b.jsx)(y.SheetTrigger,{asChild:!0,children:a}),(0,b.jsx)(y.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,b.jsxs)(y.SheetHeader,{className:"pb-8 text-center",children:[(0,b.jsxs)(y.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(h.UserPlus,{className:"h-6 w-6 text-primary"})}),"Add New Member"]}),(0,b.jsx)(y.SheetDescription,{className:"text-lg text-muted-foreground",children:"Add a new member with personal, contact, and organizational information."})]}),(0,b.jsxs)(u.Card,{className:"shadow-lg",children:[(0,b.jsx)(u.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Member Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new member"})]})}),(0,b.jsx)(u.CardContent,{children:(0,b.jsxs)("form",{onSubmit:ao,className:"flex flex-col gap-6",children:[j.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Personal Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"firstname",className:"text-sm font-medium",children:"First Name *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(z.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{id:"firstname",placeholder:"Enter first name",className:"pl-10 h-11",value:K.firstname,onChange:a=>an("firstname",a.target.value),required:!0})]}),j.firstname&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.firstname})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"secondname",className:"text-sm font-medium",children:"Second Name *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(z.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{id:"secondname",placeholder:"Enter second name",className:"pl-10 h-11",value:K.secondname,onChange:a=>an("secondname",a.target.value),required:!0})]}),j.secondname&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.secondname})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),(0,b.jsxs)(x.Select,{value:K.gender,onValueChange:a=>an("gender",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select gender"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"male",children:"Male"}),(0,b.jsx)(x.SelectItem,{value:"female",children:"Female"})]})]}),j.gender&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.gender})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"birthdate",className:"text-sm font-medium",children:"Birth Date"}),(0,b.jsx)(v.Input,{id:"birthdate",type:"date",className:"h-11",value:K.birthdate,onChange:a=>an("birthdate",a.target.value)}),j.birthdate&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.birthdate})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"maritalStatus",className:"text-sm font-medium",children:"Marital Status"}),(0,b.jsxs)(x.Select,{value:K.maritalStatus,onValueChange:a=>an("maritalStatus",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"Single",children:"Single"}),(0,b.jsx)(x.SelectItem,{value:"Married",children:"Married"}),(0,b.jsx)(x.SelectItem,{value:"Divorced",children:"Divorced"}),(0,b.jsx)(x.SelectItem,{value:"Widowed",children:"Widowed"})]})]}),j.maritalStatus&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.maritalStatus})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(p.Mail,{className:"h-4 w-4"}),"Email"]}),(0,b.jsx)(v.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:K.email,onChange:a=>an("email",a.target.value)}),j.email&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"h-4 w-4"}),"Phone Number"]}),(0,b.jsx)(v.Input,{id:"phone",type:"tel",placeholder:"+250 788 123 456",className:"h-11",value:K.phone,onChange:a=>an("phone",a.target.value)}),j.phone&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.phone})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"localChurch",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(s.Church,{className:"h-4 w-4"}),"Local Church"]}),(0,b.jsx)(v.Input,{id:"localChurch",placeholder:"Enter local church name",className:"h-11",value:K.localChurch,onChange:a=>an("localChurch",a.target.value)}),j.localChurch&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.localChurch})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Place of Birth"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthProvince",className:"text-sm font-medium",children:"Province"}),(0,b.jsxs)(x.Select,{value:K.placeOfBirthProvince,onValueChange:a=>an("placeOfBirthProvince",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select province"})}),(0,b.jsxs)(x.SelectContent,{children:[console.log("Rendering provinces:",M),M.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))]})]}),j.placeOfBirthProvince&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthProvince})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthDistrict",className:"text-sm font-medium",children:"District"}),(0,b.jsxs)(x.Select,{value:K.placeOfBirthDistrict,onValueChange:a=>an("placeOfBirthDistrict",a),disabled:!K.placeOfBirthProvince||0===O.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:W.districts?"Loading districts...":K.placeOfBirthProvince?"Select district":"Select province first"})}),(0,b.jsx)(x.SelectContent,{children:O.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthDistrict&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthDistrict})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthSector",className:"text-sm font-medium",children:"Sector"}),(0,b.jsxs)(x.Select,{value:K.placeOfBirthSector,onValueChange:a=>an("placeOfBirthSector",a),disabled:!K.placeOfBirthDistrict||0===Q.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:W.sectors?"Loading sectors...":K.placeOfBirthDistrict?"Select sector":"Select district first"})}),(0,b.jsx)(x.SelectContent,{children:Q.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthSector&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthSector})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthCell",className:"text-sm font-medium",children:"Cell"}),(0,b.jsxs)(x.Select,{value:K.placeOfBirthCell,onValueChange:a=>an("placeOfBirthCell",a),disabled:!K.placeOfBirthSector||0===S.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:W.cells?"Loading cells...":K.placeOfBirthSector?"Select cell":"Select sector first"})}),(0,b.jsx)(x.SelectContent,{children:S.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthCell&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthCell})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthVillage",className:"text-sm font-medium",children:"Village"}),(0,b.jsxs)(x.Select,{value:K.placeOfBirthVillage,onValueChange:a=>an("placeOfBirthVillage",a),disabled:!K.placeOfBirthCell||0===U.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:W.villages?"Loading villages...":K.placeOfBirthCell?"Select village":"Select cell first"})}),(0,b.jsx)(x.SelectContent,{children:U.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthVillage&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthVillage})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Education & Professional Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"faculty",className:"text-sm font-medium",children:"Faculty"}),(0,b.jsx)(v.Input,{id:"faculty",placeholder:"Enter faculty",className:"h-11",value:K.faculty,onChange:a=>an("faculty",a.target.value)}),j.faculty&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.faculty})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"professionalism",className:"text-sm font-medium",children:"Professionalism"}),(0,b.jsx)(v.Input,{id:"professionalism",placeholder:"Enter profession",className:"h-11",value:K.professionalism,onChange:a=>an("professionalism",a.target.value)}),j.professionalism&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.professionalism})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"graduationDate",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4"}),"Graduation Date"]}),(0,b.jsx)(v.Input,{id:"graduationDate",type:"date",className:"h-11",value:K.graduationDate,onChange:a=>an("graduationDate",a.target.value)}),j.graduationDate&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.graduationDate})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Member Type & Status"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"type",className:"text-sm font-medium",children:"Member Type *"}),(0,b.jsxs)(x.Select,{value:K.type,onValueChange:a=>an("type",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select member type"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"student",children:"Student"}),(0,b.jsx)(x.SelectItem,{value:"graduate",children:"Graduate"}),(0,b.jsx)(x.SelectItem,{value:"staff",children:"Staff"}),(0,b.jsx)(x.SelectItem,{value:"volunteer",children:"Volunteer"}),(0,b.jsx)(x.SelectItem,{value:"alumni",children:"Alumni"})]})]}),j.type&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.type})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),(0,b.jsxs)(x.Select,{value:K.status,onValueChange:a=>an("status",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(x.SelectItem,{value:"pre_graduate",children:"Pre-Graduate"}),(0,b.jsx)(x.SelectItem,{value:"graduate",children:"Graduate"}),(0,b.jsx)(x.SelectItem,{value:"alumni",children:"Alumni"}),(0,b.jsx)(x.SelectItem,{value:"inactive",children:"Inactive"})]})]}),j.status&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.status})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Organization Information"}),F?(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading organization scope..."})}):(0,b.jsxs)(b.Fragment,{children:[E&&(0,b.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Current Scope:"})," ",E.scope.charAt(0).toUpperCase()+E.scope.slice(1),E.region&&` - ${E.region.name}`,E.university&&` - ${E.university.name}`,E.smallGroup&&` - ${E.smallGroup.name}`,E.alumniGroup&&` - ${E.alumniGroup.name}`]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.region&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(n.MapPin,{className:"h-4 w-4"}),"Region"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:K.regionId,onValueChange:a=>an("regionId",a),disabled:ag.regions,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ag.regions?"Loading regions...":"Select region"})}),(0,b.jsx)(x.SelectContent,{children:aa.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"regionId",type:"number",placeholder:"Enter region ID",className:"h-11",value:K.regionId,onChange:a=>an("regionId",a.target.value)}),j.regionId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.regionId})]}),I.university&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(r.Building2,{className:"h-4 w-4"}),"University"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:K.universityId,onValueChange:a=>an("universityId",a),disabled:!K.regionId||ag.universities,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ag.universities?"Loading universities...":K.regionId?"Select university":"Select region first"})}),(0,b.jsx)(x.SelectContent,{children:ac.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"universityId",type:"number",placeholder:"Enter university ID",className:"h-11",value:K.universityId,onChange:a=>an("universityId",a.target.value)}),j.universityId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.universityId})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[I.smallGroup&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4"}),"Small Group"]}),(0,b.jsxs)(x.Select,{value:K.smallGroupId,onValueChange:a=>an("smallGroupId",a),disabled:!K.universityId||$,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:$?"Loading small groups...":K.universityId?"Select small group":"Select university first"})}),(0,b.jsx)(x.SelectContent,{children:Y.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),j.smallGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.smallGroupId})]}),I.alumniGroup&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(q.GraduationCap,{className:"h-4 w-4"}),"Alumni Group"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:K.alumniGroupId,onValueChange:a=>an("alumniGroupId",a),disabled:!K.regionId||ag.alumniGroups,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ag.alumniGroups?"Loading alumni groups...":K.regionId?"Select alumni group":"Select region first"})}),(0,b.jsx)(x.SelectContent,{children:ae.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"alumniGroupId",type:"number",placeholder:"Enter alumni group ID",className:"h-11",value:K.alumniGroupId,onChange:a=>an("alumniGroupId",a.target.value)}),j.alumniGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.alumniGroupId})]})]}),!I.region&&!I.university&&!I.smallGroup&&!I.alumniGroup&&(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization fields are automatically set based on your current scope."})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,b.jsx)(t.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>f(!1),disabled:g,children:"Cancel"}),(0,b.jsx)(t.Button,{type:"submit",className:"flex-1 h-11",disabled:g||B,children:g?"Creating...":B?"✅ Created Successfully!":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(h.UserPlus,{className:"mr-2 h-4 w-4"}),"Add Member"]})})]})]})})]})]})})]})}var E=a.i(73570);function F({isOpen:a,onClose:c,onConfirm:d,memberName:e,isLoading:f=!1}){return(0,b.jsx)(y.Sheet,{open:a,onOpenChange:c,children:(0,b.jsx)(y.SheetContent,{side:"top",className:"h-auto w-full max-w-md mx-auto",children:(0,b.jsxs)("div",{className:"py-8",children:[(0,b.jsxs)(y.SheetHeader,{className:"pb-6 text-center",children:[(0,b.jsx)("div",{className:"flex justify-center mb-4",children:(0,b.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:(0,b.jsx)(E.AlertTriangle,{className:"h-8 w-8 text-destructive"})})}),(0,b.jsx)(y.SheetTitle,{className:"text-xl text-destructive",children:"Delete Member"}),(0,b.jsxs)(y.SheetDescription,{className:"text-base",children:["Are you sure you want to delete ",(0,b.jsx)("strong",{children:e}),"? This action cannot be undone."]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(j.Trash2,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,b.jsxs)("div",{className:"text-sm text-destructive",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"Warning:"}),(0,b.jsx)("p",{children:"This will permanently remove the member and all associated data from the system."})]})]})}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(t.Button,{type:"button",variant:"outline",className:"flex-1",onClick:c,disabled:f,children:"Cancel"}),(0,b.jsx)(t.Button,{type:"button",variant:"destructive",className:"flex-1",onClick:d,disabled:f,children:f?"Deleting...":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Member"]})})]})]})]})})})}function G({member:a,onMemberUpdated:d,isOpen:e,onClose:f}){let[g,h]=c.useState(!1),[j,k]=c.useState({}),[B,D]=c.useState(!1),{userScope:E,loading:F,getVisibleFields:G}=(0,A.useUserScope)(),H=G(),[I,J]=c.useState({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),[K,L]=c.useState([]),[M,N]=c.useState([]),[O,P]=c.useState([]),[Q,R]=c.useState([]),[S,T]=c.useState([]),[U,V]=c.useState({}),[W,X]=c.useState([]),[Y,Z]=c.useState(!1),[$,_]=c.useState([]),[aa,ab]=c.useState([]),[ac,ad]=c.useState([]),[ae,af]=c.useState({}),ag=async(a,b)=>{V(b=>({...b,[a]:!0}));try{let c=b?`/api/locations?type=${a}&parentId=${b}`:`/api/locations?type=${a}`,d=await fetch(c),e=await d.json();if(d.ok)switch(a){case"provinces":L(e);break;case"districts":N(e);break;case"sectors":P(e);break;case"cells":R(e);break;case"villages":T(e)}}catch(b){console.error(`Error fetching ${a}:`,b)}finally{V(b=>({...b,[a]:!1}))}},ah=async a=>{if(!a)return void X([]);Z(!0);try{let b=await fetch(`/api/small-groups?universityId=${a}`);if(!b.ok)throw Error("Failed to fetch small groups");let c=await b.json();X(c)}catch(a){console.error("Error fetching small groups:",a),X([])}finally{Z(!1)}},ai=async()=>{af(a=>({...a,regions:!0}));try{let a=await fetch("/api/regions");if(!a.ok)throw Error("Failed to fetch regions");let b=await a.json();_(b)}catch(a){console.error("Error fetching regions:",a),_([])}finally{af(a=>({...a,regions:!1}))}},aj=async a=>{if(!a)return void ab([]);af(a=>({...a,universities:!0}));try{let b=await fetch(`/api/universities?regionId=${a}`);if(!b.ok)throw Error("Failed to fetch universities");let c=await b.json();ab(c)}catch(a){console.error("Error fetching universities:",a),ab([])}finally{af(a=>({...a,universities:!1}))}},ak=async a=>{if(!a)return void ad([]);af(a=>({...a,alumniGroups:!0}));try{let b=await fetch(`/api/alumni-small-groups?regionId=${a}`);if(!b.ok)throw Error("Failed to fetch alumni groups");let c=await b.json();ad(c)}catch(a){console.error("Error fetching alumni groups:",a),ad([])}finally{af(a=>({...a,alumniGroups:!1}))}};c.useEffect(()=>{a&&J({firstname:a.firstname||"",secondname:a.secondname||"",gender:a.gender||"",birthdate:a.birthdate?new Date(a.birthdate).toISOString().split("T")[0]:"",placeOfBirthProvince:a.placeOfBirthProvince||"",placeOfBirthDistrict:a.placeOfBirthDistrict||"",placeOfBirthSector:a.placeOfBirthSector||"",placeOfBirthCell:a.placeOfBirthCell||"",placeOfBirthVillage:a.placeOfBirthVillage||"",localChurch:a.localChurch||"",email:a.email||"",phone:a.phone||"",type:a.type||"",status:a.status||"active",regionId:a.regionId?.toString()||"",universityId:a.universityId?.toString()||"",smallGroupId:a.smallGroupId?.toString()||"",alumniGroupId:a.alumniGroupId?.toString()||"",graduationDate:a.graduationDate?new Date(a.graduationDate).toISOString().split("T")[0]:"",faculty:a.faculty||"",professionalism:a.professionalism||"",maritalStatus:a.maritalStatus||""})},[a]),c.useEffect(()=>{I.universityId?ah(I.universityId):X([])},[I.universityId]),c.useEffect(()=>{E?.scope!=="superadmin"||F||ai()},[E?.scope,F]),c.useEffect(()=>{E?.scope==="superadmin"&&I.regionId?aj(I.regionId):ab([])},[I.regionId,E?.scope]),c.useEffect(()=>{E?.scope==="superadmin"&&I.regionId?ak(I.regionId):ad([])},[I.regionId,E?.scope]);let al=(a,b)=>{J(c=>({...c,[a]:b})),j[a]&&k(b=>({...b,[a]:""})),B&&D(!1),"placeOfBirthProvince"===a?(J(a=>({...a,placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),N([]),P([]),R([]),T([]),b&&ag("districts",b)):"placeOfBirthDistrict"===a?(J(a=>({...a,placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),P([]),R([]),T([]),b&&ag("sectors",b)):"placeOfBirthSector"===a?(J(a=>({...a,placeOfBirthCell:"",placeOfBirthVillage:""})),R([]),T([]),b&&ag("cells",b)):"placeOfBirthCell"===a&&(J(a=>({...a,placeOfBirthVillage:""})),T([]),b&&ag("villages",b))};c.useEffect(()=>{e&&ag("provinces")},[e]);let am=async b=>{if((b.preventDefault(),a)&&(()=>{try{return C.parse(I),k({}),!0}catch(b){let a={};return b&&"object"==typeof b&&"errors"in b&&Array.isArray(b.errors)&&b.errors.forEach(b=>{a[b.path[0]]=b.message}),k(a),!1}})()){h(!0);try{let b={...I,gender:I.gender||null,birthdate:I.birthdate||null,placeOfBirthProvince:I.placeOfBirthProvince||null,placeOfBirthDistrict:I.placeOfBirthDistrict||null,placeOfBirthSector:I.placeOfBirthSector||null,placeOfBirthCell:I.placeOfBirthCell||null,placeOfBirthVillage:I.placeOfBirthVillage||null,localChurch:I.localChurch||null,email:I.email||null,phone:I.phone||null,regionId:I.regionId||null,universityId:I.universityId||null,smallGroupId:I.smallGroupId||null,alumniGroupId:I.alumniGroupId||null,graduationDate:I.graduationDate||null,faculty:I.faculty||null,professionalism:I.professionalism||null,maritalStatus:I.maritalStatus||null},c=await fetch(`/api/members?id=${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),e=await c.json();c.ok?(D(!0),k({}),d&&d(),setTimeout(()=>{f(),D(!1)},1500)):(console.error("API Error:",e),e.details?k({general:Array.isArray(e.details)?e.details.map(a=>a.message).join(", "):e.details}):k({general:e.error||"Failed to update member"}))}catch(a){console.error("Error updating member:",a),k({general:"An unexpected error occurred"})}finally{h(!1)}}};return a?(0,b.jsx)(y.Sheet,{open:e,onOpenChange:f,children:(0,b.jsx)(y.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,b.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,b.jsxs)(y.SheetHeader,{className:"pb-8 text-center",children:[(0,b.jsxs)(y.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,b.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,b.jsx)(i.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Member"]}),(0,b.jsxs)(y.SheetDescription,{className:"text-lg text-muted-foreground",children:["Update member information for ",a.firstname," ",a.secondname,"."]})]}),(0,b.jsxs)(u.Card,{className:"shadow-lg",children:[(0,b.jsx)(u.CardHeader,{className:"pb-6",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold",children:"Member Information"}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below for this member"})]})}),(0,b.jsx)(u.CardContent,{children:(0,b.jsxs)("form",{onSubmit:am,className:"flex flex-col gap-6",children:[j.general&&(0,b.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Personal Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"firstname",className:"text-sm font-medium",children:"First Name *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(z.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{id:"firstname",placeholder:"Enter first name",className:"pl-10 h-11",value:I.firstname,onChange:a=>al("firstname",a.target.value),required:!0})]}),j.firstname&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.firstname})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"secondname",className:"text-sm font-medium",children:"Second Name *"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(z.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(v.Input,{id:"secondname",placeholder:"Enter second name",className:"pl-10 h-11",value:I.secondname,onChange:a=>al("secondname",a.target.value),required:!0})]}),j.secondname&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.secondname})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),(0,b.jsxs)(x.Select,{value:I.gender,onValueChange:a=>al("gender",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select gender"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"male",children:"Male"}),(0,b.jsx)(x.SelectItem,{value:"female",children:"Female"})]})]}),j.gender&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.gender})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"birthdate",className:"text-sm font-medium",children:"Birth Date"}),(0,b.jsx)(v.Input,{id:"birthdate",type:"date",className:"h-11",value:I.birthdate,onChange:a=>al("birthdate",a.target.value)}),j.birthdate&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.birthdate})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"maritalStatus",className:"text-sm font-medium",children:"Marital Status"}),(0,b.jsxs)(x.Select,{value:I.maritalStatus,onValueChange:a=>al("maritalStatus",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select status"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"Single",children:"Single"}),(0,b.jsx)(x.SelectItem,{value:"Married",children:"Married"}),(0,b.jsx)(x.SelectItem,{value:"Divorced",children:"Divorced"}),(0,b.jsx)(x.SelectItem,{value:"Widowed",children:"Widowed"})]})]}),j.maritalStatus&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.maritalStatus})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contact Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(p.Mail,{className:"h-4 w-4"}),"Email"]}),(0,b.jsx)(v.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:I.email,onChange:a=>al("email",a.target.value)}),j.email&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.email})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(o.Phone,{className:"h-4 w-4"}),"Phone Number"]}),(0,b.jsx)(v.Input,{id:"phone",type:"tel",placeholder:"+250 788 123 456",className:"h-11",value:I.phone,onChange:a=>al("phone",a.target.value)}),j.phone&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.phone})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"localChurch",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(s.Church,{className:"h-4 w-4"}),"Local Church"]}),(0,b.jsx)(v.Input,{id:"localChurch",placeholder:"Enter local church name",className:"h-11",value:I.localChurch,onChange:a=>al("localChurch",a.target.value)}),j.localChurch&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.localChurch})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Place of Birth"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthProvince",className:"text-sm font-medium",children:"Province"}),(0,b.jsxs)(x.Select,{value:I.placeOfBirthProvince,onValueChange:a=>al("placeOfBirthProvince",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select province"})}),(0,b.jsx)(x.SelectContent,{children:K.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthProvince&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthProvince})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthDistrict",className:"text-sm font-medium",children:"District"}),(0,b.jsxs)(x.Select,{value:I.placeOfBirthDistrict,onValueChange:a=>al("placeOfBirthDistrict",a),disabled:!I.placeOfBirthProvince||0===M.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:U.districts?"Loading districts...":I.placeOfBirthProvince?"Select district":"Select province first"})}),(0,b.jsx)(x.SelectContent,{children:M.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthDistrict&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthDistrict})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthSector",className:"text-sm font-medium",children:"Sector"}),(0,b.jsxs)(x.Select,{value:I.placeOfBirthSector,onValueChange:a=>al("placeOfBirthSector",a),disabled:!I.placeOfBirthDistrict||0===O.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:U.sectors?"Loading sectors...":I.placeOfBirthDistrict?"Select sector":"Select district first"})}),(0,b.jsx)(x.SelectContent,{children:O.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthSector&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthSector})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthCell",className:"text-sm font-medium",children:"Cell"}),(0,b.jsxs)(x.Select,{value:I.placeOfBirthCell,onValueChange:a=>al("placeOfBirthCell",a),disabled:!I.placeOfBirthSector||0===Q.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:U.cells?"Loading cells...":I.placeOfBirthSector?"Select cell":"Select sector first"})}),(0,b.jsx)(x.SelectContent,{children:Q.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthCell&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthCell})]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"placeOfBirthVillage",className:"text-sm font-medium",children:"Village"}),(0,b.jsxs)(x.Select,{value:I.placeOfBirthVillage,onValueChange:a=>al("placeOfBirthVillage",a),disabled:!I.placeOfBirthCell||0===S.length,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:U.villages?"Loading villages...":I.placeOfBirthCell?"Select village":"Select cell first"})}),(0,b.jsx)(x.SelectContent,{children:S.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id,children:a.name},a.id))})]}),j.placeOfBirthVillage&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.placeOfBirthVillage})]})})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Education & Professional Information"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"faculty",className:"text-sm font-medium",children:"Faculty"}),(0,b.jsx)(v.Input,{id:"faculty",placeholder:"Enter faculty",className:"h-11",value:I.faculty,onChange:a=>al("faculty",a.target.value)}),j.faculty&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.faculty})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"professionalism",className:"text-sm font-medium",children:"Professionalism"}),(0,b.jsx)(v.Input,{id:"professionalism",placeholder:"Enter profession",className:"h-11",value:I.professionalism,onChange:a=>al("professionalism",a.target.value)}),j.professionalism&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.professionalism})]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"graduationDate",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(m.Calendar,{className:"h-4 w-4"}),"Graduation Date"]}),(0,b.jsx)(v.Input,{id:"graduationDate",type:"date",className:"h-11",value:I.graduationDate,onChange:a=>al("graduationDate",a.target.value)}),j.graduationDate&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.graduationDate})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Member Type & Status"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"type",className:"text-sm font-medium",children:"Member Type *"}),(0,b.jsxs)(x.Select,{value:I.type,onValueChange:a=>al("type",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:"Select member type"})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"student",children:"Student"}),(0,b.jsx)(x.SelectItem,{value:"graduate",children:"Graduate"}),(0,b.jsx)(x.SelectItem,{value:"staff",children:"Staff"}),(0,b.jsx)(x.SelectItem,{value:"volunteer",children:"Volunteer"}),(0,b.jsx)(x.SelectItem,{value:"alumni",children:"Alumni"})]})]}),j.type&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.type})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(w.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),(0,b.jsxs)(x.Select,{value:I.status,onValueChange:a=>al("status",a),children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{})}),(0,b.jsxs)(x.SelectContent,{children:[(0,b.jsx)(x.SelectItem,{value:"active",children:"Active"}),(0,b.jsx)(x.SelectItem,{value:"pre_graduate",children:"Pre-Graduate"}),(0,b.jsx)(x.SelectItem,{value:"graduate",children:"Graduate"}),(0,b.jsx)(x.SelectItem,{value:"alumni",children:"Alumni"}),(0,b.jsx)(x.SelectItem,{value:"inactive",children:"Inactive"})]})]}),j.status&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.status})]})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Organization Information"}),F?(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading organization scope..."})}):(0,b.jsxs)(b.Fragment,{children:[E&&(0,b.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg",children:(0,b.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,b.jsx)("strong",{children:"Current Scope:"})," ",E.scope.charAt(0).toUpperCase()+E.scope.slice(1),E.region&&` - ${E.region.name}`,E.university&&` - ${E.university.name}`,E.smallGroup&&` - ${E.smallGroup.name}`,E.alumniGroup&&` - ${E.alumniGroup.name}`]})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[H.region&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(n.MapPin,{className:"h-4 w-4"}),"Region"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:I.regionId,onValueChange:a=>al("regionId",a),disabled:ae.regions,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ae.regions?"Loading regions...":"Select region"})}),(0,b.jsx)(x.SelectContent,{children:$.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"regionId",type:"number",placeholder:"Enter region ID",className:"h-11",value:I.regionId,onChange:a=>al("regionId",a.target.value)}),j.regionId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.regionId})]}),H.university&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(r.Building2,{className:"h-4 w-4"}),"University"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:I.universityId,onValueChange:a=>al("universityId",a),disabled:!I.regionId||ae.universities,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ae.universities?"Loading universities...":I.regionId?"Select university":"Select region first"})}),(0,b.jsx)(x.SelectContent,{children:aa.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"universityId",type:"number",placeholder:"Enter university ID",className:"h-11",value:I.universityId,onChange:a=>al("universityId",a.target.value)}),j.universityId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.universityId})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[H.smallGroup&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"h-4 w-4"}),"Small Group"]}),(0,b.jsxs)(x.Select,{value:I.smallGroupId,onValueChange:a=>al("smallGroupId",a),disabled:!I.universityId||Y,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:Y?"Loading small groups...":I.universityId?"Select small group":"Select university first"})}),(0,b.jsx)(x.SelectContent,{children:W.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}),j.smallGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.smallGroupId})]}),H.alumniGroup&&(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(w.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,b.jsx)(q.GraduationCap,{className:"h-4 w-4"}),"Alumni Group"]}),E?.scope==="superadmin"?(0,b.jsxs)(x.Select,{value:I.alumniGroupId,onValueChange:a=>al("alumniGroupId",a),disabled:!I.regionId||ae.alumniGroups,children:[(0,b.jsx)(x.SelectTrigger,{className:"h-11",children:(0,b.jsx)(x.SelectValue,{placeholder:ae.alumniGroups?"Loading alumni groups...":I.regionId?"Select alumni group":"Select region first"})}),(0,b.jsx)(x.SelectContent,{children:ac.map(a=>(0,b.jsx)(x.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]}):(0,b.jsx)(v.Input,{id:"alumniGroupId",type:"number",placeholder:"Enter alumni group ID",className:"h-11",value:I.alumniGroupId,onChange:a=>al("alumniGroupId",a.target.value)}),j.alumniGroupId&&(0,b.jsx)("p",{className:"text-sm text-red-600",children:j.alumniGroupId})]})]}),!H.region&&!H.university&&!H.smallGroup&&!H.alumniGroup&&(0,b.jsx)("div",{className:"text-center py-4",children:(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization fields are automatically set based on your current scope."})})]})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,b.jsx)(t.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:f,disabled:g,children:"Cancel"}),(0,b.jsx)(t.Button,{type:"submit",className:"flex-1 h-11",disabled:g||B,children:g?"Updating...":B?"✅ Updated Successfully!":(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(i.Edit,{className:"mr-2 h-4 w-4"}),"Update Member"]})})]})]})})]})]})})}):null}var H=a.i(68922);let I={student:"Student",graduate:"Graduate",staff:"Staff",volunteer:"Volunteer",alumni:"Alumni"},J={active:"Active",pre_graduate:"Pre-Graduate",graduate:"Graduate",alumni:"Alumni",inactive:"Inactive"},K={active:"bg-green-100 text-green-800",pre_graduate:"bg-blue-100 text-blue-800",graduate:"bg-purple-100 text-purple-800",alumni:"bg-orange-100 text-orange-800",inactive:"bg-gray-100 text-gray-800"},L={student:"bg-blue-100 text-blue-800",graduate:"bg-green-100 text-green-800",staff:"bg-purple-100 text-purple-800",volunteer:"bg-yellow-100 text-yellow-800",alumni:"bg-orange-100 text-orange-800"};function M({members:a,loading:d,error:e,onRefresh:t,refreshKey:u}){let[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(1),[z]=(0,c.useState)(5),[A,B]=(0,c.useState)({isOpen:!1,memberId:null,memberName:""}),[C,E]=(0,c.useState)(!1),[M,N]=(0,c.useState)(null),O=()=>{B({isOpen:!1,memberId:null,memberName:""})},P=async()=>{if(A.memberId){E(!0);try{let a=await fetch(`/api/members?id=${A.memberId}`,{method:"DELETE"});200===a.status&&(O(),t())}catch(a){console.error("Error deleting member:",a),alert("Failed to delete member. Please try again.")}finally{E(!1)}}},Q=a.filter(a=>{if(!v)return!0;let b=v.toLowerCase();return a.firstname?.toLowerCase().includes(b)||a.secondname?.toLowerCase().includes(b)||a.email?.toLowerCase().includes(b)||a.phone?.includes(v)||a.faculty?.toLowerCase().includes(b)||a.professionalism?.toLowerCase().includes(b)||a.localChurch?.toLowerCase().includes(b)||a.region?.name?.toLowerCase().includes(b)||a.university?.name?.toLowerCase().includes(b)||a.smallgroup?.name?.toLowerCase().includes(b)||a.alumnismallgroup?.name?.toLowerCase().includes(b)||a.type?.toLowerCase().includes(b)||a.status?.toLowerCase().includes(b)||a.gender?.toLowerCase().includes(b)||a.maritalStatus?.toLowerCase().includes(b)||I[a.type]?.toLowerCase().includes(b)||J[a.status]?.toLowerCase().includes(b)}),R=Math.ceil(Q.length/z),S=(x-1)*z,T=S+z,U=Q.slice(S,T),V=a=>{y(Math.max(1,Math.min(a,R)))};return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search members...",value:v,onChange:a=>{w(a.target.value),y(1)},className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,b.jsxs)("button",{onClick:t,disabled:d,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(g.RefreshCw,{className:`w-4 h-4 ${d?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:d?"Loading...":"Refresh"})]})]}),(0,b.jsx)(D,{onMemberAdded:t,children:(0,b.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,b.jsx)(h.UserPlus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add New Member"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Add Member"})]})})]}),e&&(0,b.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,b.jsx)("span",{className:"text-sm",children:e})]}),(0,b.jsx)("button",{onClick:t,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[d?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[(0,b.jsx)(g.RefreshCw,{className:"w-8 h-8 animate-spin text-primary"}),(0,b.jsx)("span",{className:"text-lg font-medium",children:"Loading members..."}),(0,b.jsx)("span",{className:"text-sm",children:"Please wait while we fetch the data"})]})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,b.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Member"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Organization"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden xl:table-cell",children:"Education"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type & Status"}),(0,b.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,b.jsx)("tbody",{className:"bg-card divide-y divide-border",children:U.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,b.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[a.firstname?.[0],a.secondname?.[0]]})})}),(0,b.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-foreground truncate",children:[a.firstname," ",a.secondname]}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,b.jsx)("span",{children:a.gender}),(0,b.jsx)("span",{children:"•"}),(0,b.jsx)("span",{children:a.maritalStatus}),a.birthdate&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[new Date().getFullYear()-new Date(a.birthdate).getFullYear(),"y"]})]})]}),(0,b.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,b.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.email})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.phone})]})]})]})]})}),(0,b.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,b.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:a.email})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.phone})]}),a.localChurch&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(s.Church,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:a.localChurch})]})]}),(0,b.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:[(0,b.jsx)(H.DenyOnly,{scopes:"university",children:(0,b.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,b.jsx)(n.MapPin,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:a.region?.name})]})}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(r.Building2,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:a.university?.name})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(l.Users,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:a.smallgroup?.name})]}),a.alumnismallgroup&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(q.GraduationCap,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[150px]",children:a.alumnismallgroup.name})]})]}),(0,b.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden xl:table-cell",children:[a.faculty&&(0,b.jsx)("div",{className:"text-sm text-foreground truncate max-w-[150px]",children:a.faculty}),(0,b.jsx)(H.DenyOnly,{scopes:"university",children:a.professionalism&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-[150px]",children:a.professionalism})}),a.graduationDate&&(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(m.Calendar,{className:"w-3 h-3"}),(0,b.jsxs)("span",{className:"truncate",children:["Grad: ",new Date(a.graduationDate).toLocaleDateString()]})]})]}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${L[a.type]}`,children:I[a.type]}),(0,b.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ${K[a.status]}`,children:J[a.status]}),(0,b.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(a.createdAt).toLocaleDateString()})]})}),(0,b.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{className:"text-primary hover:text-primary/80 p-1 rounded",title:"View",children:(0,b.jsx)(k.Eye,{className:"w-4 h-4"})}),(0,b.jsx)("button",{onClick:()=>{N(a)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,b.jsx)(i.Edit,{className:"w-4 h-4"})}),(0,b.jsx)(H.DenyOnly,{scopes:"university",children:(0,b.jsx)("button",{onClick:()=>{B({isOpen:!0,memberId:a.id,memberName:`${a.firstname} ${a.secondname}`})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,b.jsx)(j.Trash2,{className:"w-4 h-4"})})})]})})]},a.id))})]})}),!d&&0===U.length&&!e&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(l.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No members found"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:v?"No members match your search criteria.":"No members have been added yet."}),!v&&(0,b.jsx)(D,{onMemberAdded:t,children:(0,b.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,b.jsx)(h.UserPlus,{className:"w-4 h-4"}),"Add First Member"]})})]}),!d&&Q.length>0&&(0,b.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:[(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:S+1})," to ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:Math.min(T,Q.length)})," of ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:Q.length})," members"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{onClick:()=>{V(x-1)},disabled:1===x,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,R)},(a,c)=>{let d;return d=R<=5||x<=3?c+1:x>=R-2?R-4+c:x-2+c,(0,b.jsx)("button",{onClick:()=>V(d),className:`px-2 py-1 text-xs sm:text-sm rounded ${x===d?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:d},d)}),R>5&&x<R-2&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"..."}),(0,b.jsx)("button",{onClick:()=>V(R),className:"px-2 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded",children:R})]})]}),(0,b.jsx)("button",{onClick:()=>{V(x+1)},disabled:x===R,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),(0,b.jsx)(F,{isOpen:A.isOpen,onClose:O,onConfirm:P,memberName:A.memberName,isLoading:C}),(0,b.jsx)(G,{member:M,onMemberUpdated:t,isOpen:null!==M,onClose:()=>{N(null)}})]})}var N=a.i(42247),O=a.i(7379),P=a.i(14727),Q=a.i(97895);function R({className:a,...c}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,Q.cn)("w-full caption-bottom text-sm",a),...c})})}function S({className:a,...c}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,Q.cn)("[&_tr]:border-b",a),...c})}function T({className:a,...c}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,Q.cn)("[&_tr:last-child]:border-0",a),...c})}function U({className:a,...c}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,Q.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...c})}function V({className:a,...c}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,Q.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}function W({className:a,...c}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,Q.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...c})}var X=a.i(50944);let Y=async()=>{try{return(await d.default.get("/api/members")).data.members||[]}catch(a){throw console.error("Error fetching small group members:",a),a}};function Z({refreshKey:a}){let[d,e]=(0,c.useState)(1),[h,i]=(0,c.useState)(""),[j,k]=(0,c.useState)([]),[t,u]=(0,c.useState)(!0),[v,w]=(0,c.useState)(null),x=(0,X.useRouter)(),y=j.length>0?{name:j[0].smallgroup?.name||"Unknown Small Group",university:j[0].university?.name||"Unknown University",region:j[0].region?.name||"Unknown Region",memberCount:j.length}:null,z=async()=>{try{u(!0),w(null);let a=await Y();k(a)}catch(a){console.error("Error fetching small group members:",a),w(a instanceof Error?a.message:"Failed to fetch members")}finally{u(!1)}};(0,c.useEffect)(()=>{z()},[a]);let A=a=>a?new Date(a).toLocaleDateString():"N/A",B=(0,c.useMemo)(()=>{if(!j)return[];if(!h)return j;let a=h.toLowerCase();return j.filter(b=>[b.firstname,b.secondname,b.email,b.phone,A(b.birthdate),b.gender].filter(Boolean).join(" ").toLowerCase().includes(a))},[j,h]),C=Math.ceil(B.length/5),D=(d-1)*5,E=D+5,F=B.slice(D,E),G=a=>{e(Math.max(1,Math.min(a,C)))};return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[t?(0,b.jsx)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 rounded-lg p-4 sm:p-6 mb-6",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,b.jsx)(s.Church,{className:"w-6 h-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-6 w-32 bg-muted animate-pulse rounded mb-2"}),(0,b.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})]})]})}):y?(0,b.jsx)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 rounded-lg p-4 sm:p-6 mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,b.jsx)(s.Church,{className:"w-6 h-6 text-primary"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-foreground",children:y.name}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:"Small Group Members"})]})]}),(0,b.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(r.Building2,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"University"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:y.university})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(n.MapPin,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Region"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:y.region})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(l.Users,{className:"w-4 h-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Members"}),(0,b.jsx)("p",{className:"text-sm font-medium text-foreground",children:y.memberCount})]})]})]})]})}):null,(0,b.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,b.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,b.jsx)(f.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search members...",value:h,onChange:a=>{i(a.target.value),e(1)},className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,b.jsxs)("button",{onClick:z,disabled:t,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,b.jsx)(g.RefreshCw,{className:`w-4 h-4 ${t?"animate-spin":""}`}),(0,b.jsx)("span",{className:"hidden sm:inline",children:t?"Loading...":"Refresh"})]})]})}),v&&(0,b.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,b.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,b.jsx)("span",{className:"text-sm",children:v})]}),(0,b.jsx)("button",{onClick:z,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,b.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[t?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,b.jsx)(g.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,b.jsx)("span",{children:"Loading members..."})]})}):(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsx)("div",{className:"min-w-[1000px]",children:(0,b.jsxs)(R,{children:[(0,b.jsx)(S,{className:"bg-muted/50 border-b border-border",children:(0,b.jsxs)(U,{children:[(0,b.jsx)(V,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Member"}),(0,b.jsx)(V,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact Information"}),(0,b.jsx)(V,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Birth Information"}),(0,b.jsx)(V,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden xl:table-cell",children:"Member Details"})]})}),(0,b.jsx)(T,{className:"bg-card divide-y divide-border",children:F.map(a=>(0,b.jsxs)(U,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>x.push(`/people/members/${a.id}`),children:[(0,b.jsx)(W,{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,b.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,b.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[a.firstname?.[0],a.secondname?.[0]]})})}),(0,b.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,b.jsxs)("div",{className:"text-sm font-medium text-foreground truncate",children:[a.firstname," ",a.secondname]}),(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,b.jsx)("span",{children:a.gender}),a.birthdate&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{children:"•"}),(0,b.jsxs)("span",{children:[new Date().getFullYear()-new Date(a.birthdate).getFullYear(),"y"]})]})]}),(0,b.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,b.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:a.email})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.phone})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-full capitalize",children:a.type}),(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full capitalize",children:a.status})]})]})]})]})}),(0,b.jsxs)(W,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,b.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,b.jsx)(p.Mail,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate max-w-[200px]",children:a.email})]}),(0,b.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,b.jsx)(o.Phone,{className:"w-3 h-3"}),(0,b.jsx)("span",{children:a.phone})]})]}),(0,b.jsxs)(W,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:[(0,b.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,b.jsx)(m.Calendar,{className:"w-3 h-3"}),(0,b.jsx)("span",{className:"truncate",children:A(a.birthdate)})]}),a.gender&&(0,b.jsx)("div",{className:"text-sm text-muted-foreground capitalize",children:a.gender})]}),(0,b.jsx)(W,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden xl:table-cell",children:(0,b.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.GraduationCap,{className:"w-3 h-3 text-muted-foreground"}),(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-full capitalize",children:a.type})]}),(0,b.jsx)("div",{className:"flex items-center gap-1",children:(0,b.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full capitalize",children:a.status})}),a.faculty&&(0,b.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:a.faculty})]})})]},a.id))})]})})}),!t&&0===F.length&&!v&&(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(l.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,b.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No members found"}),(0,b.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:h?"No members match your search criteria.":"No members have been added yet."})]}),!t&&B.length>0&&(0,b.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:[(0,b.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:D+1})," to ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:Math.min(E,B.length)})," of ",(0,b.jsx)("span",{className:"font-medium text-foreground",children:B.length})," members"]}),(0,b.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,b.jsx)("button",{onClick:()=>{G(d-1)},disabled:1===d,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,C)},(a,c)=>{let e;return e=C<=5||d<=3?c+1:d>=C-2?C-4+c:d-2+c,(0,b.jsx)("button",{onClick:()=>G(e),className:`px-2 py-1 text-xs sm:text-sm rounded ${d===e?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"}`,children:e},e)}),C>5&&d<C-2&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-muted-foreground",children:"..."}),(0,b.jsx)("button",{onClick:()=>G(C),className:"px-2 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded",children:C})]})]}),(0,b.jsx)("button",{onClick:()=>{G(d+1)},disabled:d===C,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}function $(){let[a,f]=(0,c.useState)([]),[g,h]=(0,c.useState)(!0),[i,j]=(0,c.useState)(null),k=async()=>{try{h(!0),j(null);let[a]=await Promise.all([d.default.get("/api/members"),new Promise(a=>setTimeout(a,500))]);f(a.data.members||[])}catch(a){console.error("Error fetching members:",a),j("Failed to fetch members. Please try again.")}finally{h(!1)}};return(0,c.useEffect)(()=>{k()},[]),(0,b.jsxs)(P.SidebarProvider,{children:[(0,b.jsx)(e.AppSidebar,{}),(0,b.jsxs)(P.SidebarInset,{children:[(0,b.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,b.jsx)(P.SidebarTrigger,{className:"-ml-1"}),(0,b.jsx)(O.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,b.jsx)(N.Breadcrumb,{children:(0,b.jsxs)(N.BreadcrumbList,{children:[(0,b.jsx)(N.BreadcrumbItem,{className:"hidden md:block",children:(0,b.jsx)(N.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,b.jsx)(N.BreadcrumbSeparator,{className:"hidden md:block"}),(0,b.jsx)(N.BreadcrumbItem,{children:(0,b.jsx)(N.BreadcrumbLink,{href:"/links/people/members",children:"People Management"})}),(0,b.jsx)(N.BreadcrumbSeparator,{}),(0,b.jsx)(N.BreadcrumbItem,{children:(0,b.jsx)(N.BreadcrumbPage,{children:"Member Directory"})})]})})]})}),(0,b.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,b.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Member Directory"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage members and their information across all groups"})]}),(0,b.jsx)(H.AllowOnly,{scopes:["superadmin","university","region"],children:(0,b.jsx)(M,{members:a,loading:g,error:i,onRefresh:k})}),(0,b.jsx)(H.AllowOnly,{scopes:"smallgroup",children:(0,b.jsx)(Z,{})})]})})]})]})}}];

//# sourceMappingURL=app_links_people_members_page_tsx_3648a668._.js.map