(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,96633,e=>{"use strict";e.s(["default",()=>eS],96633);var s=e.i(43476),a=e.i(71645),r=e.i(17255),t=e.i(81949),l=e.i(55436),n=e.i(16715),i=e.i(79002),d=e.i(88511),c=e.i(27612),o=e.i(86536),m=e.i(61911),u=e.i(63488),x=e.i(43432),p=e.i(87316);let h=(0,e.i(75254).default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var g=e.i(60313),f=e.i(67881),j=e.i(52917),N=e.i(70065),v=e.i(23750),b=e.i(10708),y=e.i(62870),w=e.i(84614),S=e.i(70756),I=e.i(98919),C=e.i(81307);let A=C.z.object({name:C.z.string().min(1,"Name is required").max(255,"Name cannot exceed 255 characters"),username:C.z.string().min(3,"Username must be at least 3 characters").max(50,"Username cannot exceed 50 characters"),email:C.z.string().email("Invalid email address").max(255,"Email cannot exceed 255 characters"),password:C.z.string().min(6,"Password must be at least 6 characters").max(100,"Password cannot exceed 100 characters"),confirmPassword:C.z.string().min(6,"Password confirmation is required"),contact:C.z.string().max(20,"Contact cannot exceed 20 characters").optional().or(C.z.literal("")).or(C.z.null()),status:C.z.enum(["active","inactive","suspended"]).optional().default("active")}).refine(e=>e.password===e.confirmPassword,{message:"Passwords do not match",path:["confirmPassword"]}),U=C.z.object({id:C.z.string().min(1,"User ID is required"),name:C.z.string().min(1,"Name is required").max(255,"Name cannot exceed 255 characters").optional(),username:C.z.string().min(3,"Username must be at least 3 characters").max(50,"Username cannot exceed 50 characters").optional(),email:C.z.string().email("Invalid email address").max(255,"Email cannot exceed 255 characters").optional(),password:C.z.string().min(6,"Password must be at least 6 characters").max(100,"Password cannot exceed 100 characters").optional(),contact:C.z.string().max(20,"Contact cannot exceed 20 characters").optional().or(C.z.literal("")).or(C.z.null()),status:C.z.enum(["active","inactive","suspended"]).optional()});function G(e){let{children:r,onUserAdded:t}=e,[l,n]=a.useState(!1),[d,c]=a.useState(!1),[o,m]=a.useState({}),[p,h]=a.useState(!1),[g,C]=a.useState({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),U=(e,s)=>{C(a=>({...a,[e]:s})),o[e]&&m(s=>({...s,[e]:""})),p&&h(!1)},G=async e=>{if(e.preventDefault(),(()=>{try{return A.parse(g),m({}),!0}catch(s){let e={};return s.errors&&s.errors.forEach(s=>{e[s.path[0]]=s.message}),m(e),!1}})()){c(!0),m({});try{let e=await fetch("/api/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),s=await e.json();if(!e.ok){if(s.details&&Array.isArray(s.details)){let e={};s.details.forEach(s=>{e[s.path[0]]=s.message}),m(e)}else m({general:s.error||"Failed to create user"});return}h(!0),C({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),setTimeout(()=>{null==t||t(),n(!1),h(!1)},1500)}catch(e){console.error("Error creating user:",e),m({general:"Failed to create user. Please try again."})}finally{c(!1)}}};return(0,s.jsxs)(j.Sheet,{open:l,onOpenChange:n,children:[(0,s.jsx)(j.SheetTrigger,{asChild:!0,children:r}),(0,s.jsxs)(j.SheetContent,{className:"w-full sm:max-w-2xl h-full flex flex-col",children:[(0,s.jsxs)(j.SheetHeader,{className:"flex-shrink-0",children:[(0,s.jsxs)(j.SheetTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.UserPlus,{className:"h-5 w-5"}),"Add New User"]}),(0,s.jsx)(j.SheetDescription,{children:"Create a new user account with appropriate permissions and access levels."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,s.jsxs)(N.Card,{className:"shadow-lg",children:[(0,s.jsx)(N.CardHeader,{className:"pb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"User Information"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new user"})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsxs)("form",{onSubmit:G,className:"flex flex-col gap-6",children:[o.general&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o.general}),p&&(0,s.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:"User created successfully!"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"User Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(w.User,{className:"h-4 w-4"}),"Full Name *"]}),(0,s.jsx)(v.Input,{id:"name",placeholder:"Enter full name",className:"h-11",value:g.name,onChange:e=>U("name",e.target.value),required:!0}),o.name&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"username",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(w.User,{className:"h-4 w-4"}),"Username *"]}),(0,s.jsx)(v.Input,{id:"username",placeholder:"Enter username",className:"h-11",value:g.username,onChange:e=>U("username",e.target.value),required:!0}),o.username&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.username})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(u.Mail,{className:"h-4 w-4"}),"Email Address *"]}),(0,s.jsx)(v.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:g.email,onChange:e=>U("email",e.target.value),required:!0}),o.email&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"contact",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(x.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,s.jsx)(v.Input,{id:"contact",placeholder:"Enter contact number",className:"h-11",value:g.contact,onChange:e=>U("contact",e.target.value)}),o.contact&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.contact})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"status",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(I.Shield,{className:"h-4 w-4"}),"Status"]}),(0,s.jsxs)(y.Select,{value:g.status,onValueChange:e=>U("status",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(y.SelectContent,{children:[(0,s.jsx)(y.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(y.SelectItem,{value:"inactive",children:"Inactive"}),(0,s.jsx)(y.SelectItem,{value:"suspended",children:"Suspended"})]})]}),o.status&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.status})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Security"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"password",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(S.Lock,{className:"h-4 w-4"}),"Password *"]}),(0,s.jsx)(v.Input,{id:"password",type:"password",placeholder:"Enter password (min 6 characters)",className:"h-11",value:g.password,onChange:e=>U("password",e.target.value),required:!0}),o.password&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.password})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"confirmPassword",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(S.Lock,{className:"h-4 w-4"}),"Confirm Password *"]}),(0,s.jsx)(v.Input,{id:"confirmPassword",type:"password",placeholder:"Confirm password",className:"h-11",value:g.confirmPassword,onChange:e=>U("confirmPassword",e.target.value),required:!0}),o.confirmPassword&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.confirmPassword})]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,s.jsx)(f.Button,{type:"submit",className:"flex-1 h-11",disabled:d,children:d?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Creating User..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.UserPlus,{className:"h-4 w-4 mr-2"}),"Create User"]})}),(0,s.jsx)(f.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{n(!1),C({name:"",username:"",email:"",password:"",confirmPassword:"",contact:"",status:"active"}),m({}),h(!1)},disabled:d,children:"Cancel"})]})]})})]})})]})]})}C.z.object({userId:C.z.string().min(1,"User ID is required"),regionId:C.z.number().int().positive().optional().or(C.z.null()),universityId:C.z.number().int().positive().optional().or(C.z.null()),smallGroupId:C.z.number().int().positive().optional().or(C.z.null()),alumniGroupId:C.z.number().int().positive().optional().or(C.z.null()),scope:C.z.enum(["superadmin","national","region","university","smallgroup","alumnismallgroup"]).default("superadmin")});var k=e.i(30030),E=e.i(20783),P=e.i(26999),R=e.i(81140),F=e.i(91918),D="AlertDialog",[z,L]=(0,k.createContextScope)(D,[P.createDialogScope]),T=(0,P.createDialogScope)(),O=e=>{let{__scopeAlertDialog:a,...r}=e,t=T(a);return(0,s.jsx)(P.Root,{...t,...r,modal:!0})};O.displayName=D,a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,l=T(r);return(0,s.jsx)(P.Trigger,{...l,...t,ref:a})}).displayName="AlertDialogTrigger";var q=e=>{let{__scopeAlertDialog:a,...r}=e,t=T(a);return(0,s.jsx)(P.Portal,{...t,...r})};q.displayName="AlertDialogPortal";var B=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,l=T(r);return(0,s.jsx)(P.Overlay,{...l,...t,ref:a})});B.displayName="AlertDialogOverlay";var V="AlertDialogContent",[M,H]=z(V),J=(0,F.createSlottable)("AlertDialogContent"),K=a.forwardRef((e,r)=>{let{__scopeAlertDialog:t,children:l,...n}=e,i=T(t),d=a.useRef(null),c=(0,E.useComposedRefs)(r,d),o=a.useRef(null);return(0,s.jsx)(P.WarningProvider,{contentName:V,titleName:Y,docsSlug:"alert-dialog",children:(0,s.jsx)(M,{scope:t,cancelRef:o,children:(0,s.jsxs)(P.Content,{role:"alertdialog",...i,...n,ref:c,onOpenAutoFocus:(0,R.composeEventHandlers)(n.onOpenAutoFocus,e=>{var s;e.preventDefault(),null==(s=o.current)||s.focus({preventScroll:!0})}),onPointerDownOutside:e=>e.preventDefault(),onInteractOutside:e=>e.preventDefault(),children:[(0,s.jsx)(J,{children:l}),(0,s.jsx)(ee,{contentRef:d})]})})})});K.displayName=V;var Y="AlertDialogTitle",W=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,l=T(r);return(0,s.jsx)(P.Title,{...l,...t,ref:a})});W.displayName=Y;var Q="AlertDialogDescription",X=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,l=T(r);return(0,s.jsx)(P.Description,{...l,...t,ref:a})});X.displayName=Q;var Z=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,l=T(r);return(0,s.jsx)(P.Close,{...l,...t,ref:a})});Z.displayName="AlertDialogAction";var $="AlertDialogCancel",_=a.forwardRef((e,a)=>{let{__scopeAlertDialog:r,...t}=e,{cancelRef:l}=H($,r),n=T(r),i=(0,E.useComposedRefs)(a,l);return(0,s.jsx)(P.Close,{...n,...t,ref:i})});_.displayName=$;var ee=e=>{let{contentRef:s}=e,r="`".concat(V,"` requires a description for the component to be accessible for screen reader users.\n\nYou can add a description to the `").concat(V,"` by passing a `").concat(Q,"` component as a child, which also benefits sighted users by adding visible context to the dialog.\n\nAlternatively, you can use your own component as a description by assigning it an `id` and passing the same value to the `aria-describedby` prop in `").concat(V,"`. If the description is confusing or duplicative for sighted users, you can use the `@radix-ui/react-visually-hidden` primitive as a wrapper around your description component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/alert-dialog");return a.useEffect(()=>{var e;document.getElementById(null==(e=s.current)?void 0:e.getAttribute("aria-describedby"))||console.warn(r)},[r,s]),null},es=e.i(47163);let ea=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(B,{className:(0,es.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...t,ref:a})});ea.displayName=B.displayName;let er=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsxs)(q,{children:[(0,s.jsx)(ea,{}),(0,s.jsx)(K,{ref:a,className:(0,es.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...t})]})});er.displayName=K.displayName;let et=e=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:(0,es.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...r})};et.displayName="AlertDialogHeader";let el=e=>{let{className:a,...r}=e;return(0,s.jsx)("div",{className:(0,es.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...r})};el.displayName="AlertDialogFooter";let en=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(W,{ref:a,className:(0,es.cn)("text-lg font-semibold",r),...t})});en.displayName=W.displayName;let ei=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(X,{ref:a,className:(0,es.cn)("text-sm text-muted-foreground",r),...t})});ei.displayName=X.displayName;let ed=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(Z,{ref:a,className:(0,es.cn)((0,f.buttonVariants)(),r),...t})});ed.displayName=Z.displayName;let ec=a.forwardRef((e,a)=>{let{className:r,...t}=e;return(0,s.jsx)(_,{ref:a,className:(0,es.cn)((0,f.buttonVariants)({variant:"outline"}),"mt-2 sm:mt-0",r),...t})});ec.displayName=_.displayName;var eo=e.i(78894);function em(e){let{isOpen:a,onClose:r,onConfirm:t,userName:l,isLoading:n=!1}=e;return(0,s.jsx)(O,{open:a,onOpenChange:r,children:(0,s.jsxs)(er,{className:"sm:max-w-md",children:[(0,s.jsxs)(et,{children:[(0,s.jsxs)(en,{className:"flex items-center gap-2",children:[(0,s.jsx)(eo.AlertTriangle,{className:"h-5 w-5 text-destructive"}),"Delete User"]}),(0,s.jsxs)(ei,{className:"text-left",children:["Are you sure you want to delete ",(0,s.jsx)("span",{className:"font-semibold text-foreground",children:l}),"? This action cannot be undone and will permanently remove the user and all associated data."]})]}),(0,s.jsxs)(el,{className:"flex-col sm:flex-row gap-2",children:[(0,s.jsx)(ec,{onClick:r,disabled:n,className:"w-full sm:w-auto",children:"Cancel"}),(0,s.jsx)(ed,{onClick:t,disabled:n,className:"w-full sm:w-auto bg-destructive text-destructive-foreground hover:bg-destructive/90",children:n?(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Deleting..."]}):(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(c.Trash2,{className:"h-4 w-4"}),"Delete User"]})})]})]})})}function eu(e){let{user:r,onUserUpdated:t,isOpen:l,onClose:n}=e,[i,c]=a.useState(!1),[o,m]=a.useState({}),[p,h]=a.useState(!1),[g,C]=a.useState({id:"",name:"",username:"",email:"",password:"",contact:"",status:"active"});a.useEffect(()=>{r&&C({id:r.id,name:r.name||"",username:r.username||"",email:r.email||"",password:"",contact:r.contact||"",status:r.status||"active"})},[r]);let A=(e,s)=>{C(a=>({...a,[e]:s})),o[e]&&m(s=>({...s,[e]:""})),p&&h(!1)},G=async e=>{if(e.preventDefault(),(()=>{try{return U.parse(g),m({}),!0}catch(s){let e={};return s.errors&&s.errors.forEach(s=>{e[s.path[0]]=s.message}),m(e),!1}})()){c(!0),m({});try{let e=await fetch("/api/users",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),s=await e.json();if(!e.ok){if(s.details&&Array.isArray(s.details)){let e={};s.details.forEach(s=>{e[s.path[0]]=s.message}),m(e)}else m({general:s.error||"Failed to update user"});return}h(!0),setTimeout(()=>{null==t||t(),n(),h(!1)},1500)}catch(e){console.error("Error updating user:",e),m({general:"Failed to update user. Please try again."})}finally{c(!1)}}},k=()=>{n(),C({id:"",name:"",username:"",email:"",password:"",contact:"",status:"active"}),m({}),h(!1)};return r?(0,s.jsx)(j.Sheet,{open:l,onOpenChange:k,children:(0,s.jsxs)(j.SheetContent,{className:"w-full sm:max-w-2xl h-full flex flex-col",children:[(0,s.jsxs)(j.SheetHeader,{className:"flex-shrink-0",children:[(0,s.jsxs)(j.SheetTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(d.Edit,{className:"h-5 w-5"}),"Edit User"]}),(0,s.jsx)(j.SheetDescription,{children:"Update user information and permissions."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto py-4",children:(0,s.jsxs)(N.Card,{className:"shadow-lg",children:[(0,s.jsx)(N.CardHeader,{className:"pb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"User Information"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below"})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsxs)("form",{onSubmit:G,className:"flex flex-col gap-6",children:[o.general&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o.general}),p&&(0,s.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:"User updated successfully!"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"User Details"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(w.User,{className:"h-4 w-4"}),"Full Name *"]}),(0,s.jsx)(v.Input,{id:"name",placeholder:"Enter full name",className:"h-11",value:g.name,onChange:e=>A("name",e.target.value),required:!0}),o.name&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.name})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"username",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(w.User,{className:"h-4 w-4"}),"Username *"]}),(0,s.jsx)(v.Input,{id:"username",placeholder:"Enter username",className:"h-11",value:g.username,onChange:e=>A("username",e.target.value),required:!0}),o.username&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.username})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(u.Mail,{className:"h-4 w-4"}),"Email Address *"]}),(0,s.jsx)(v.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:g.email,onChange:e=>A("email",e.target.value),required:!0}),o.email&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"contact",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(x.Phone,{className:"h-4 w-4"}),"Contact Number"]}),(0,s.jsx)(v.Input,{id:"contact",placeholder:"Enter contact number",className:"h-11",value:g.contact,onChange:e=>A("contact",e.target.value)}),o.contact&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.contact})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"status",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(I.Shield,{className:"h-4 w-4"}),"Status"]}),(0,s.jsxs)(y.Select,{value:g.status,onValueChange:e=>A("status",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(y.SelectContent,{children:[(0,s.jsx)(y.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(y.SelectItem,{value:"inactive",children:"Inactive"}),(0,s.jsx)(y.SelectItem,{value:"suspended",children:"Suspended"})]})]}),o.status&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.status})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Security"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"password",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(S.Lock,{className:"h-4 w-4"}),"New Password (leave blank to keep current password)"]}),(0,s.jsx)(v.Input,{id:"password",type:"password",placeholder:"Enter new password (min 6 characters)",className:"h-11",value:g.password,onChange:e=>A("password",e.target.value)}),o.password&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.password})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-4",children:[(0,s.jsx)(f.Button,{type:"submit",className:"flex-1 h-11",disabled:i,children:i?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Updating User..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Edit,{className:"h-4 w-4 mr-2"}),"Update User"]})}),(0,s.jsx)(f.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:k,disabled:i,children:"Cancel"})]})]})})]})})]})}):null}var ex=e.i(46897),ep=e.i(7486),eh=e.i(32095);function eg(e){var r,l,n,i,d;let{children:c,userId:o,userName:u,existingRole:x,onRoleAssigned:p}=e,[h,g]=a.useState(!1),[v,w]=a.useState(!1),[S,C]=a.useState({}),[A,U]=a.useState(!1),[G,k]=a.useState([]),[E,P]=a.useState([]),[R,F]=a.useState([]),[D,z]=a.useState([]),[L,T]=a.useState({userId:o,regionId:(null==x||null==(r=x.regionId)?void 0:r.toString())||"",universityId:(null==x||null==(l=x.universityId)?void 0:l.toString())||"",smallGroupId:(null==x||null==(n=x.smallGroupId)?void 0:n.toString())||"",alumniGroupId:(null==x||null==(i=x.alumniGroupId)?void 0:i.toString())||"",scope:(null==x?void 0:x.scope)||"superadmin"});a.useEffect(()=>{O()},[]),a.useEffect(()=>{L.regionId?(q(Number(L.regionId)),V(Number(L.regionId))):(P([]),z([]),T(e=>({...e,universityId:"",alumniGroupId:""})))},[L.regionId]),a.useEffect(()=>{L.universityId&&L.regionId?B(Number(L.regionId),Number(L.universityId)):(F([]),T(e=>({...e,smallGroupId:""})))},[L.universityId,L.regionId]);let O=async()=>{try{console.log("Fetching regions...");let e=await t.default.get("/api/regions");console.log("Regions response:",e.data),e.data&&Array.isArray(e.data)?(k(e.data),console.log("Regions set:",e.data)):console.error("Unexpected regions response format:",e.data)}catch(e){console.error("Error fetching regions:",e)}},q=async e=>{try{let s=await t.default.get("/api/universities?regionId=".concat(e));s.data&&Array.isArray(s.data)&&P(s.data)}catch(e){console.error("Error fetching universities:",e)}},B=async(e,s)=>{try{let a=await t.default.get("/api/small-groups?regionId=".concat(e,"&universityId=").concat(s));a.data&&Array.isArray(a.data)&&F(a.data)}catch(e){console.error("Error fetching small groups:",e)}},V=async e=>{try{let s=await t.default.get("/api/alumni-small-groups?regionId=".concat(e));s.data&&Array.isArray(s.data)&&z(s.data)}catch(e){console.error("Error fetching alumni groups:",e)}},M=(e,s)=>{"scope"===e?T(e=>({...e,scope:s,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:""})):"regionId"===e?T(e=>({...e,regionId:s,universityId:"",smallGroupId:"",alumniGroupId:""})):"universityId"===e?T(e=>({...e,universityId:s,smallGroupId:""})):T(a=>({...a,[e]:s})),S[e]&&C(s=>({...s,[e]:""})),A&&U(!1)},H=async e=>{if(e.preventDefault(),(()=>{let e={};return L.scope||(e.scope="Role scope is required"),"region"!==L.scope||L.regionId||(e.regionId="Region is required for region scope"),"university"!==L.scope||L.universityId||(e.universityId="University is required for university scope"),"smallgroup"!==L.scope||L.smallGroupId||(e.smallGroupId="Small group is required for small group scope"),"alumnismallgroup"!==L.scope||L.alumniGroupId||(e.alumniGroupId="Alumni small group is required for alumni small group scope"),C(e),0===Object.keys(e).length})()){w(!0),C({});try{let e,s={userId:L.userId,scope:L.scope,regionId:L.regionId?Number(L.regionId):null,universityId:L.universityId?Number(L.universityId):null,smallGroupId:L.smallGroupId?Number(L.smallGroupId):null,alumniGroupId:L.alumniGroupId?Number(L.alumniGroupId):null};console.log("Submitting data:",s),e=x?await t.default.put("/api/user-roles",{id:x.id,...s}):await t.default.post("/api/user-roles",s),(200===e.status||201===e.status)&&(U(!0),setTimeout(()=>{null==p||p(),g(!1),U(!1),T({userId:o,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",scope:"superadmin"})},1500))}catch(e){var s,a,r,l,n;if(console.error("Error assigning role:",e),console.error("Error response:",null==(s=e.response)?void 0:s.data),(null==(r=e.response)||null==(a=r.data)?void 0:a.details)&&Array.isArray(e.response.data.details)){let s={};e.response.data.details.forEach(e=>{s[e.path[0]]=e.message}),C(s)}else C({general:(null==(n=e.response)||null==(l=n.data)?void 0:l.error)||"Failed to assign role. Please try again."})}finally{w(!1)}}},J=()=>{var e,s,a,r;return"region"===L.scope&&L.regionId?null==(e=G.find(e=>e.id.toString()===L.regionId))?void 0:e.name:"university"===L.scope&&L.universityId?null==(s=E.find(e=>e.id.toString()===L.universityId))?void 0:s.name:"smallgroup"===L.scope&&L.smallGroupId?null==(a=R.find(e=>e.id.toString()===L.smallGroupId))?void 0:a.name:"alumnismallgroup"===L.scope&&L.alumniGroupId?null==(r=D.find(e=>e.id.toString()===L.alumniGroupId))?void 0:r.name:null},K=[{value:"superadmin",label:"Super Admin"},{value:"national",label:"National"},{value:"region",label:"Region"},{value:"university",label:"University"},{value:"smallgroup",label:"Small Group"},{value:"alumnismallgroup",label:"Alumni Small Group"}];return(0,s.jsxs)(j.Sheet,{open:h,onOpenChange:g,children:[(0,s.jsx)(j.SheetTrigger,{asChild:!0,children:c}),(0,s.jsxs)(j.SheetContent,{className:"w-full sm:max-w-2xl overflow-y-auto",children:[(0,s.jsxs)(j.SheetHeader,{className:"sticky top-0 bg-background z-10 pb-4",children:[(0,s.jsxs)(j.SheetTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(I.Shield,{className:"h-5 w-5"}),x?"Update Role for":"Assign Role to"," ",u]}),(0,s.jsx)(j.SheetDescription,{children:x?"Update user permissions and access scope.":"Configure user permissions and access scope for this user."})]}),(0,s.jsx)("div",{className:"flex-1 overflow-y-auto",children:(0,s.jsxs)(N.Card,{className:"shadow-lg",children:[(0,s.jsx)(N.CardHeader,{className:"pb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Role Assignment"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select the appropriate scope and permission level"})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsxs)("form",{onSubmit:H,className:"flex flex-col gap-6",children:[S.general&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:S.general}),A&&(0,s.jsx)("div",{className:"p-3 text-sm text-green-600 bg-green-50 border border-green-200 rounded-md",children:x?"Role updated successfully!":"Role assigned successfully!"}),(0,s.jsxs)("div",{className:"p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"User Information"}),(0,s.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Name:"})," ",u]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"User ID:"})," ",o]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Role Scope"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"scope",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(I.Shield,{className:"h-4 w-4"}),"Role Scope *"]}),(0,s.jsxs)(y.Select,{value:L.scope,onValueChange:e=>M("scope",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select role scope"})}),(0,s.jsx)(y.SelectContent,{children:K.map(e=>(0,s.jsx)(y.SelectItem,{value:e.value,children:e.label},e.value))})]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600 dark:text-gray-400",children:{superadmin:"Full system access across all entities",national:"National level access and management",region:"Access limited to specific region",university:"Access limited to specific university",smallgroup:"Access limited to specific small group",alumnismallgroup:"Access limited to specific alumni small group"}[L.scope]||""}),S.scope&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:S.scope})]})]}),("region"===L.scope||"university"===L.scope||"smallgroup"===L.scope||"alumnismallgroup"===L.scope)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(ex.MapPin,{className:"h-4 w-4"}),"Region","region"===L.scope?" *":""]}),(0,s.jsxs)(y.Select,{value:L.regionId,onValueChange:e=>M("regionId",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select region"})}),(0,s.jsxs)(y.SelectContent,{children:[console.log("Rendering regions in dropdown:",G),G.map(e=>(0,s.jsx)(y.SelectItem,{value:e.id.toString(),children:e.name},e.id))]})]}),S.regionId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:S.regionId})]}),("university"===L.scope||"smallgroup"===L.scope)&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(ep.Building2,{className:"h-4 w-4"}),"University","university"===L.scope?" *":""]}),(0,s.jsxs)(y.Select,{value:L.universityId,onValueChange:e=>M("universityId",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select university"})}),(0,s.jsx)(y.SelectContent,{children:E.map(e=>(0,s.jsx)(y.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),S.universityId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:S.universityId})]}),"smallgroup"===L.scope&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(m.Users,{className:"h-4 w-4"}),"Small Group *"]}),(0,s.jsxs)(y.Select,{value:L.smallGroupId,onValueChange:e=>M("smallGroupId",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select small group"})}),(0,s.jsx)(y.SelectContent,{children:R.map(e=>(0,s.jsx)(y.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),S.smallGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:S.smallGroupId})]}),"alumnismallgroup"===L.scope&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(b.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(eh.GraduationCap,{className:"h-4 w-4"}),"Alumni Small Group *"]}),(0,s.jsxs)(y.Select,{value:L.alumniGroupId,onValueChange:e=>M("alumniGroupId",e),children:[(0,s.jsx)(y.SelectTrigger,{className:"h-11",children:(0,s.jsx)(y.SelectValue,{placeholder:"Select alumni small group"})}),(0,s.jsx)(y.SelectContent,{children:D.map(e=>(0,s.jsx)(y.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),S.alumniGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:S.alumniGroupId})]}),(0,s.jsxs)("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-900 dark:text-blue-100 mb-2",children:"Role Summary"}),(0,s.jsxs)("div",{className:"text-sm text-blue-800 dark:text-blue-200 space-y-1",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"User:"})," ",u]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Scope:"})," ",null==(d=K.find(e=>e.value===L.scope))?void 0:d.label]}),J()&&(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Entity:"})," ",J()]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t",children:[(0,s.jsx)(f.Button,{type:"submit",className:"flex-1 h-11",disabled:v,children:v?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),x?"Updating Role...":"Assigning Role..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.Shield,{className:"h-4 w-4 mr-2"}),x?"Update Role":"Assign Role"]})}),(0,s.jsx)(f.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{g(!1),T({userId:o,regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",scope:"superadmin"}),C({}),U(!1)},disabled:v,children:"Cancel"})]})]})})]})})]})]})}var ef=e.i(75117),ej=e.i(69035),eN=e.i(11522);let ev={active:"Active",inactive:"Inactive",suspended:"Suspended"},eb={active:"bg-green-100 text-green-800",inactive:"bg-gray-100 text-gray-800",suspended:"bg-red-100 text-red-800"},ey={superadmin:"Super Admin",admin:"Admin",moderator:"Moderator",user:"User"},ew={superadmin:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",moderator:"bg-yellow-100 text-yellow-800",user:"bg-gray-100 text-gray-800"};function eS(){let{data:e,status:f}=(0,r.useSession)(),[j,N]=(0,a.useState)(""),[v,b]=(0,a.useState)([]),[y,w]=(0,a.useState)(!0),[S,I]=(0,a.useState)(null),[C,A]=(0,a.useState)(1),[U]=(0,a.useState)(10),[k,E]=(0,a.useState)({isOpen:!1,userId:null,userName:""}),[P,R]=(0,a.useState)(!1),[F,D]=(0,a.useState)(null);(0,a.useEffect)(()=>{z()},[C,j]);let z=async()=>{try{w(!0),I(null);let e=await t.default.get("/api/users?page=".concat(C,"&limit=").concat(U,"&search=").concat(j));b(e.data.users||[])}catch(e){console.error("Error fetching users:",e),I("Failed to fetch users. Please try again.")}finally{w(!1)}},L=()=>{E({isOpen:!1,userId:null,userName:""})},T=async()=>{if(k.userId){R(!0);try{let e=await t.default.delete("/api/users?id=".concat(k.userId));200===e.status&&(b(e=>e.filter(e=>e.id!==k.userId)),L(),console.log("User deleted successfully"))}catch(e){console.error("Error deleting user:",e),alert("Failed to delete user. Please try again.")}finally{R(!1)}}},O=v.filter(e=>{var s,a,r,t,l,n;if(!j)return!0;let i=j.toLowerCase();return(null==(s=e.name)?void 0:s.toLowerCase().includes(i))||(null==(a=e.username)?void 0:a.toLowerCase().includes(i))||(null==(r=e.email)?void 0:r.toLowerCase().includes(i))||(null==(t=e.contact)?void 0:t.includes(j))||(null==(l=e.status)?void 0:l.toLowerCase().includes(i))||(null==(n=ev[e.status])?void 0:n.toLowerCase().includes(i))});return((0,a.useEffect)(()=>{A(1)},[j]),"loading"===f)?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):"unauthenticated"!==f&&e?(0,s.jsxs)(eN.SidebarProvider,{children:[(0,s.jsx)(g.AppSidebar,{}),(0,s.jsxs)(eN.SidebarInset,{children:[(0,s.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,s.jsx)(eN.SidebarTrigger,{className:"-ml-1"}),(0,s.jsx)(ej.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,s.jsx)(ef.Breadcrumb,{children:(0,s.jsxs)(ef.BreadcrumbList,{children:[(0,s.jsx)(ef.BreadcrumbItem,{className:"hidden md:block",children:(0,s.jsx)(ef.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,s.jsx)(ef.BreadcrumbSeparator,{className:"hidden md:block"}),(0,s.jsx)(ef.BreadcrumbItem,{children:(0,s.jsx)(ef.BreadcrumbLink,{href:"/links/admin/user-management",children:"Admin"})}),(0,s.jsx)(ef.BreadcrumbSeparator,{}),(0,s.jsx)(ef.BreadcrumbItem,{children:(0,s.jsx)(ef.BreadcrumbPage,{children:"User Management"})})]})})]})}),(0,s.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,s.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"User Management"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage system users and their permissions"})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(l.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search users...",value:j,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,s.jsxs)("button",{onClick:z,disabled:y,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(n.RefreshCw,{className:"w-4 h-4 ".concat(y?"animate-spin":"")}),(0,s.jsx)("span",{className:"hidden sm:inline",children:y?"Loading...":"Refresh"})]})]}),(0,s.jsx)(G,{onUserAdded:z,children:(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,s.jsx)(i.UserPlus,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Add New User"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Add User"})]})})]}),S&&(0,s.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,s.jsx)("span",{className:"text-sm",children:S})]}),(0,s.jsx)("button",{onClick:z,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,s.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[y?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(n.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Loading users..."})]})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,s.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"User"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Roles & Permissions"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-card divide-y divide-border",children:O.map(e=>{var a,r;return(0,s.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,s.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[null==(a=e.name)?void 0:a[0],null==(r=e.username)?void 0:r[0]]})})}),(0,s.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-foreground truncate",children:e.name}),(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,s.jsxs)("span",{children:["@",e.username]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:e.id})]}),(0,s.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,s.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,s.jsx)(u.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate",children:e.email})]}),e.contact&&(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(x.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.contact})]})]})]})]})}),(0,s.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,s.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,s.jsx)(u.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.email})]}),e.contact&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(x.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.contact})]})]}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:(0,s.jsx)("div",{className:"space-y-1",children:e.userrole&&e.userrole.length>0?e.userrole.map((e,a)=>(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(ew[e.scope]),children:ey[e.scope]}),e.region&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Region: ",e.region.name]}),e.university&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["University: ",e.university.name]}),e.smallgroup&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Small Group: ",e.smallgroup.name]}),e.alumnismallgroup&&(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["Alumni Group: ",e.alumnismallgroup.name]})]},a)):(0,s.jsx)("span",{className:"text-xs text-muted-foreground",children:"No roles assigned"})})}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(eb[e.status]),children:ev[e.status]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(p.Calendar,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString()})]})]})}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,s.jsx)("button",{className:"text-primary hover:text-primary/80 p-1 rounded",title:"View",children:(0,s.jsx)(o.Eye,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{D(e)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,s.jsx)(d.Edit,{className:"w-4 h-4"})}),(0,s.jsx)(eg,{userId:e.id,userName:e.name||e.username,onRoleAssigned:z,children:(0,s.jsx)("button",{className:"text-blue-600 hover:text-blue-700 p-1 rounded",title:"Assign Role",children:(0,s.jsx)(h,{className:"w-4 h-4"})})}),(0,s.jsx)("button",{onClick:()=>{E({isOpen:!0,userId:e.id,userName:e.name||e.username})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,s.jsx)(c.Trash2,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),!y&&0===O.length&&!S&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(m.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No users found"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:j?"No users match your search criteria.":"No users have been added yet."}),!j&&(0,s.jsx)(G,{onUserAdded:z,children:(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,s.jsx)(i.UserPlus,{className:"w-4 h-4"}),"Add First User"]})})]})]})]})})]}),(0,s.jsx)(em,{isOpen:k.isOpen,onClose:L,onConfirm:T,userName:k.userName,isLoading:P}),(0,s.jsx)(eu,{user:F,onUserUpdated:z,isOpen:null!==F,onClose:()=>{D(null)}})]}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"You need to be logged in to access this page."}),(0,s.jsx)("a",{href:"/",className:"text-primary hover:underline",children:"Go to Login"})]})})}}]);