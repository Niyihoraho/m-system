(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64803,e=>{"use strict";e.s(["default",()=>Z],64803);var s=e.i(43476),t=e.i(71645),l=e.i(81949),a=e.i(60313),r=e.i(55436),i=e.i(16715),n=e.i(79002),c=e.i(88511),d=e.i(27612),o=e.i(86536),m=e.i(61911),u=e.i(87316),x=e.i(46897),h=e.i(43432),p=e.i(63488),g=e.i(32095),f=e.i(7486),j=e.i(96772),v=e.i(71850),N=e.i(9956),b=e.i(86882),y=e.i(1968),S=e.i(89737),w=e.i(53300),I=e.i(84614),C=e.i(70665),B=e.i(81307);let O=B.z.object({firstname:B.z.string().min(1,"First Name is required").max(255,"First Name cannot exceed 255 characters"),secondname:B.z.string().min(1,"Second Name is required").max(255,"Second Name cannot exceed 255 characters"),gender:B.z.enum(["male","female","Male","Female"]).optional().or(B.z.literal("")).or(B.z.null()),birthdate:B.z.string().optional().or(B.z.literal("")).or(B.z.null()).transform(e=>{if(!e||""===e||null===e)return null;let s=new Date(e);return isNaN(s.getTime())?null:s}),placeOfBirthProvince:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthDistrict:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthSector:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthCell:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),placeOfBirthVillage:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),localChurch:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),email:B.z.string().email("Invalid Email").max(255).optional().or(B.z.literal("")).or(B.z.null()),phone:B.z.string().max(20,"Phone cannot exceed 20 characters").optional().or(B.z.literal("")).or(B.z.null()),type:B.z.enum(["student","graduate","staff","volunteer","alumni","Student","Graduate","Staff","Volunteer","Alumni"]),status:B.z.enum(["active","pre_graduate","graduate","alumni","inactive","Active","Pre_graduate","Graduate","Alumni","Inactive"]).optional().default("active"),regionId:B.z.union([B.z.string().transform(e=>{if(!e||""===e||null===e)return null;let s=Number(e);return isNaN(s)?null:s}),B.z.number().int().positive(),B.z.null()]).optional(),smallGroupId:B.z.union([B.z.string().transform(e=>{if(!e||""===e||null===e)return null;let s=Number(e);return isNaN(s)?null:s}),B.z.number().int().positive(),B.z.null()]).optional(),universityId:B.z.union([B.z.string().transform(e=>{if(!e||""===e||null===e)return null;let s=Number(e);return isNaN(s)?null:s}),B.z.number().int().positive(),B.z.null()]).optional(),alumniGroupId:B.z.union([B.z.string().transform(e=>{if(!e||""===e||null===e)return null;let s=Number(e);return isNaN(s)?null:s}),B.z.number().int().positive(),B.z.null()]).optional(),graduationDate:B.z.string().optional().or(B.z.literal("")).or(B.z.null()).transform(e=>{if(!e||""===e||null===e)return null;let s=new Date(e);return isNaN(s.getTime())?null:s}),faculty:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),professionalism:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null()),maritalStatus:B.z.string().max(255).optional().or(B.z.literal("")).or(B.z.null())});function D(e){let{children:l,onMemberAdded:a}=e,[r,i]=t.useState(!1),[c,d]=t.useState(!1),[o,B]=t.useState({}),[D,G]=t.useState(!1),{userScope:L,loading:V,getVisibleFields:F,getDefaultValues:E}=(0,C.useUserScope)(),P=F(),z=t.useMemo(()=>E(),[E]),[k,T]=t.useState({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),[M,A]=t.useState([]),[U,R]=t.useState([]),[_,q]=t.useState([]),[W,H]=t.useState([]),[Y,K]=t.useState([]),[J,Q]=t.useState({}),[X,Z]=t.useState([]),[$,ee]=t.useState(!1),[es,et]=t.useState([]),[el,ea]=t.useState([]),[er,ei]=t.useState([]),[en,ec]=t.useState({});t.useEffect(()=>{L&&!V&&T(e=>({...e,regionId:z.regionId||"",universityId:z.universityId||"",smallGroupId:z.smallGroupId||"",alumniGroupId:z.alumniGroupId||""}))},[L,V,z]),t.useEffect(()=>{k.universityId?eo(k.universityId):Z([])},[k.universityId]),t.useEffect(()=>{(null==L?void 0:L.scope)!=="superadmin"||V||em()},[null==L?void 0:L.scope,V]),t.useEffect(()=>{(null==L?void 0:L.scope)==="superadmin"&&k.regionId?eu(k.regionId):ea([])},[k.regionId,null==L?void 0:L.scope]),t.useEffect(()=>{(null==L?void 0:L.scope)==="superadmin"&&k.regionId?ex(k.regionId):ei([])},[k.regionId,null==L?void 0:L.scope]);let ed=async(e,s)=>{Q(s=>({...s,[e]:!0}));try{let t=s?"/api/locations?type=".concat(e,"&parentId=").concat(s):"/api/locations?type=".concat(e),l=await fetch(t),a=await l.json();if(l.ok)switch(e){case"provinces":A(a);break;case"districts":R(a);break;case"sectors":q(a);break;case"cells":H(a);break;case"villages":K(a)}else console.error("API Error for ".concat(e,":"),a)}catch(s){console.error("Error fetching ".concat(e,":"),s)}finally{Q(s=>({...s,[e]:!1}))}},eo=async e=>{if(!e)return void Z([]);ee(!0);try{let s=await fetch("/api/small-groups?universityId=".concat(e));if(!s.ok)throw Error("Failed to fetch small groups");let t=await s.json();Z(t)}catch(e){console.error("Error fetching small groups:",e),Z([])}finally{ee(!1)}},em=async()=>{ec(e=>({...e,regions:!0}));try{let e=await fetch("/api/regions");if(!e.ok)throw Error("Failed to fetch regions");let s=await e.json();et(s)}catch(e){console.error("Error fetching regions:",e),et([])}finally{ec(e=>({...e,regions:!1}))}},eu=async e=>{if(!e)return void ea([]);ec(e=>({...e,universities:!0}));try{let s=await fetch("/api/universities?regionId=".concat(e));if(!s.ok)throw Error("Failed to fetch universities");let t=await s.json();ea(t)}catch(e){console.error("Error fetching universities:",e),ea([])}finally{ec(e=>({...e,universities:!1}))}},ex=async e=>{if(!e)return void ei([]);ec(e=>({...e,alumniGroups:!0}));try{let s=await fetch("/api/alumni-small-groups?regionId=".concat(e));if(!s.ok)throw Error("Failed to fetch alumni groups");let t=await s.json();ei(t)}catch(e){console.error("Error fetching alumni groups:",e),ei([])}finally{ec(e=>({...e,alumniGroups:!1}))}},eh=(e,s)=>{T(t=>({...t,[e]:s})),o[e]&&B(s=>({...s,[e]:""})),D&&G(!1),"placeOfBirthProvince"===e?(T(e=>({...e,placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),R([]),q([]),H([]),K([]),s&&ed("districts",s)):"placeOfBirthDistrict"===e?(T(e=>({...e,placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),q([]),H([]),K([]),s&&ed("sectors",s)):"placeOfBirthSector"===e?(T(e=>({...e,placeOfBirthCell:"",placeOfBirthVillage:""})),H([]),K([]),s&&ed("cells",s)):"placeOfBirthCell"===e&&(T(e=>({...e,placeOfBirthVillage:""})),K([]),s&&ed("villages",s))};t.useEffect(()=>{r&&(ed("provinces"),setTimeout(()=>{0===M.length&&A([{id:"1",name:"Kigali City"},{id:"2",name:"Southern Province"},{id:"3",name:"Western Province"},{id:"4",name:"Northern Province"},{id:"5",name:"Eastern Province"}])},2e3))},[r]);let ep=async e=>{if(e.preventDefault(),(()=>{try{return O.parse(k),B({}),!0}catch(s){let e={};return s&&"object"==typeof s&&"errors"in s&&Array.isArray(s.errors)&&s.errors.forEach(s=>{e[s.path[0]]=s.message}),B(e),!1}})()){d(!0);try{let e={...k,gender:k.gender||null,birthdate:k.birthdate||null,placeOfBirthProvince:k.placeOfBirthProvince||null,placeOfBirthDistrict:k.placeOfBirthDistrict||null,placeOfBirthSector:k.placeOfBirthSector||null,placeOfBirthCell:k.placeOfBirthCell||null,placeOfBirthVillage:k.placeOfBirthVillage||null,localChurch:k.localChurch||null,email:k.email||null,phone:k.phone||null,regionId:k.regionId||null,universityId:k.universityId||null,smallGroupId:k.smallGroupId||null,alumniGroupId:k.alumniGroupId||null,graduationDate:k.graduationDate||null,faculty:k.faculty||null,professionalism:k.professionalism||null,maritalStatus:k.maritalStatus||null},s=await fetch("/api/members",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();s.ok?(G(!0),B({}),T({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),R([]),q([]),H([]),K([]),a&&a(),setTimeout(()=>{i(!1),G(!1)},1500)):(console.error("API Error:",t),t.details?B({general:Array.isArray(t.details)?t.details.map(e=>e.message).join(", "):t.details}):B({general:t.error||"Failed to create member"}))}catch(e){console.error("Error creating member:",e),B({general:"An unexpected error occurred"})}finally{d(!1)}}};return(0,s.jsxs)(w.Sheet,{open:r,onOpenChange:i,children:[(0,s.jsx)(w.SheetTrigger,{asChild:!0,children:l}),(0,s.jsx)(w.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,s.jsxs)(w.SheetHeader,{className:"pb-8 text-center",children:[(0,s.jsxs)(w.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,s.jsx)(n.UserPlus,{className:"h-6 w-6 text-primary"})}),"Add New Member"]}),(0,s.jsx)(w.SheetDescription,{className:"text-lg text-muted-foreground",children:"Add a new member with personal, contact, and organizational information."})]}),(0,s.jsxs)(N.Card,{className:"shadow-lg",children:[(0,s.jsx)(N.CardHeader,{className:"pb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Member Information"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new member"})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsxs)("form",{onSubmit:ep,className:"flex flex-col gap-6",children:[o.general&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o.general}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Personal Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"firstname",className:"text-sm font-medium",children:"First Name *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(b.Input,{id:"firstname",placeholder:"Enter first name",className:"pl-10 h-11",value:k.firstname,onChange:e=>eh("firstname",e.target.value),required:!0})]}),o.firstname&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.firstname})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"secondname",className:"text-sm font-medium",children:"Second Name *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(b.Input,{id:"secondname",placeholder:"Enter second name",className:"pl-10 h-11",value:k.secondname,onChange:e=>eh("secondname",e.target.value),required:!0})]}),o.secondname&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.secondname})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),(0,s.jsxs)(S.Select,{value:k.gender,onValueChange:e=>eh("gender",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select gender"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"male",children:"Male"}),(0,s.jsx)(S.SelectItem,{value:"female",children:"Female"})]})]}),o.gender&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.gender})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"birthdate",className:"text-sm font-medium",children:"Birth Date"}),(0,s.jsx)(b.Input,{id:"birthdate",type:"date",className:"h-11",value:k.birthdate,onChange:e=>eh("birthdate",e.target.value)}),o.birthdate&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.birthdate})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"maritalStatus",className:"text-sm font-medium",children:"Marital Status"}),(0,s.jsxs)(S.Select,{value:k.maritalStatus,onValueChange:e=>eh("maritalStatus",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"Single",children:"Single"}),(0,s.jsx)(S.SelectItem,{value:"Married",children:"Married"}),(0,s.jsx)(S.SelectItem,{value:"Divorced",children:"Divorced"}),(0,s.jsx)(S.SelectItem,{value:"Widowed",children:"Widowed"})]})]}),o.maritalStatus&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.maritalStatus})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(p.Mail,{className:"h-4 w-4"}),"Email"]}),(0,s.jsx)(b.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:k.email,onChange:e=>eh("email",e.target.value)}),o.email&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(h.Phone,{className:"h-4 w-4"}),"Phone Number"]}),(0,s.jsx)(b.Input,{id:"phone",type:"tel",placeholder:"+250 788 123 456",className:"h-11",value:k.phone,onChange:e=>eh("phone",e.target.value)}),o.phone&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.phone})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"localChurch",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(j.Church,{className:"h-4 w-4"}),"Local Church"]}),(0,s.jsx)(b.Input,{id:"localChurch",placeholder:"Enter local church name",className:"h-11",value:k.localChurch,onChange:e=>eh("localChurch",e.target.value)}),o.localChurch&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.localChurch})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Place of Birth"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthProvince",className:"text-sm font-medium",children:"Province"}),(0,s.jsxs)(S.Select,{value:k.placeOfBirthProvince,onValueChange:e=>eh("placeOfBirthProvince",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select province"})}),(0,s.jsxs)(S.SelectContent,{children:[console.log("Rendering provinces:",M),M.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))]})]}),o.placeOfBirthProvince&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthProvince})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthDistrict",className:"text-sm font-medium",children:"District"}),(0,s.jsxs)(S.Select,{value:k.placeOfBirthDistrict,onValueChange:e=>eh("placeOfBirthDistrict",e),disabled:!k.placeOfBirthProvince||0===U.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:J.districts?"Loading districts...":k.placeOfBirthProvince?"Select district":"Select province first"})}),(0,s.jsx)(S.SelectContent,{children:U.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthDistrict&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthDistrict})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthSector",className:"text-sm font-medium",children:"Sector"}),(0,s.jsxs)(S.Select,{value:k.placeOfBirthSector,onValueChange:e=>eh("placeOfBirthSector",e),disabled:!k.placeOfBirthDistrict||0===_.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:J.sectors?"Loading sectors...":k.placeOfBirthDistrict?"Select sector":"Select district first"})}),(0,s.jsx)(S.SelectContent,{children:_.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthSector&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthSector})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthCell",className:"text-sm font-medium",children:"Cell"}),(0,s.jsxs)(S.Select,{value:k.placeOfBirthCell,onValueChange:e=>eh("placeOfBirthCell",e),disabled:!k.placeOfBirthSector||0===W.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:J.cells?"Loading cells...":k.placeOfBirthSector?"Select cell":"Select sector first"})}),(0,s.jsx)(S.SelectContent,{children:W.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthCell&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthCell})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthVillage",className:"text-sm font-medium",children:"Village"}),(0,s.jsxs)(S.Select,{value:k.placeOfBirthVillage,onValueChange:e=>eh("placeOfBirthVillage",e),disabled:!k.placeOfBirthCell||0===Y.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:J.villages?"Loading villages...":k.placeOfBirthCell?"Select village":"Select cell first"})}),(0,s.jsx)(S.SelectContent,{children:Y.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthVillage&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthVillage})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Education & Professional Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"faculty",className:"text-sm font-medium",children:"Faculty"}),(0,s.jsx)(b.Input,{id:"faculty",placeholder:"Enter faculty",className:"h-11",value:k.faculty,onChange:e=>eh("faculty",e.target.value)}),o.faculty&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.faculty})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"professionalism",className:"text-sm font-medium",children:"Professionalism"}),(0,s.jsx)(b.Input,{id:"professionalism",placeholder:"Enter profession",className:"h-11",value:k.professionalism,onChange:e=>eh("professionalism",e.target.value)}),o.professionalism&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.professionalism})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"graduationDate",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(u.Calendar,{className:"h-4 w-4"}),"Graduation Date"]}),(0,s.jsx)(b.Input,{id:"graduationDate",type:"date",className:"h-11",value:k.graduationDate,onChange:e=>eh("graduationDate",e.target.value)}),o.graduationDate&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.graduationDate})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Member Type & Status"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"type",className:"text-sm font-medium",children:"Member Type *"}),(0,s.jsxs)(S.Select,{value:k.type,onValueChange:e=>eh("type",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select member type"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"student",children:"Student"}),(0,s.jsx)(S.SelectItem,{value:"graduate",children:"Graduate"}),(0,s.jsx)(S.SelectItem,{value:"staff",children:"Staff"}),(0,s.jsx)(S.SelectItem,{value:"volunteer",children:"Volunteer"}),(0,s.jsx)(S.SelectItem,{value:"alumni",children:"Alumni"})]})]}),o.type&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),(0,s.jsxs)(S.Select,{value:k.status,onValueChange:e=>eh("status",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(S.SelectItem,{value:"pre_graduate",children:"Pre-Graduate"}),(0,s.jsx)(S.SelectItem,{value:"graduate",children:"Graduate"}),(0,s.jsx)(S.SelectItem,{value:"alumni",children:"Alumni"}),(0,s.jsx)(S.SelectItem,{value:"inactive",children:"Inactive"})]})]}),o.status&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.status})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Organization Information"}),V?(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading organization scope..."})}):(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,s.jsx)("strong",{children:"Current Scope:"})," ",L.scope.charAt(0).toUpperCase()+L.scope.slice(1),L.region&&" - ".concat(L.region.name),L.university&&" - ".concat(L.university.name),L.smallGroup&&" - ".concat(L.smallGroup.name),L.alumniGroup&&" - ".concat(L.alumniGroup.name)]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.region&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(x.MapPin,{className:"h-4 w-4"}),"Region"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:k.regionId,onValueChange:e=>eh("regionId",e),disabled:en.regions,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:en.regions?"Loading regions...":"Select region"})}),(0,s.jsx)(S.SelectContent,{children:es.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"regionId",type:"number",placeholder:"Enter region ID",className:"h-11",value:k.regionId,onChange:e=>eh("regionId",e.target.value)}),o.regionId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.regionId})]}),P.university&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(f.Building2,{className:"h-4 w-4"}),"University"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:k.universityId,onValueChange:e=>eh("universityId",e),disabled:!k.regionId||en.universities,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:en.universities?"Loading universities...":k.regionId?"Select university":"Select region first"})}),(0,s.jsx)(S.SelectContent,{children:el.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"universityId",type:"number",placeholder:"Enter university ID",className:"h-11",value:k.universityId,onChange:e=>eh("universityId",e.target.value)}),o.universityId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.universityId})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[P.smallGroup&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(m.Users,{className:"h-4 w-4"}),"Small Group"]}),(0,s.jsxs)(S.Select,{value:k.smallGroupId,onValueChange:e=>eh("smallGroupId",e),disabled:!k.universityId||$,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:$?"Loading small groups...":k.universityId?"Select small group":"Select university first"})}),(0,s.jsx)(S.SelectContent,{children:X.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),o.smallGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.smallGroupId})]}),P.alumniGroup&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(g.GraduationCap,{className:"h-4 w-4"}),"Alumni Group"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:k.alumniGroupId,onValueChange:e=>eh("alumniGroupId",e),disabled:!k.regionId||en.alumniGroups,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:en.alumniGroups?"Loading alumni groups...":k.regionId?"Select alumni group":"Select region first"})}),(0,s.jsx)(S.SelectContent,{children:er.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"alumniGroupId",type:"number",placeholder:"Enter alumni group ID",className:"h-11",value:k.alumniGroupId,onChange:e=>eh("alumniGroupId",e.target.value)}),o.alumniGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.alumniGroupId})]})]}),!P.region&&!P.university&&!P.smallGroup&&!P.alumniGroup&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization fields are automatically set based on your current scope."})})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>i(!1),disabled:c,children:"Cancel"}),(0,s.jsx)(v.Button,{type:"submit",className:"flex-1 h-11",disabled:c||D,children:c?"Creating...":D?"âœ… Created Successfully!":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.UserPlus,{className:"mr-2 h-4 w-4"}),"Add Member"]})})]})]})})]})]})})]})}var G=e.i(78894);function L(e){let{isOpen:t,onClose:l,onConfirm:a,memberName:r,isLoading:i=!1}=e;return(0,s.jsx)(w.Sheet,{open:t,onOpenChange:l,children:(0,s.jsx)(w.SheetContent,{side:"top",className:"h-auto w-full max-w-md mx-auto",children:(0,s.jsxs)("div",{className:"py-8",children:[(0,s.jsxs)(w.SheetHeader,{className:"pb-6 text-center",children:[(0,s.jsx)("div",{className:"flex justify-center mb-4",children:(0,s.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:(0,s.jsx)(G.AlertTriangle,{className:"h-8 w-8 text-destructive"})})}),(0,s.jsx)(w.SheetTitle,{className:"text-xl text-destructive",children:"Delete Member"}),(0,s.jsxs)(w.SheetDescription,{className:"text-base",children:["Are you sure you want to delete ",(0,s.jsx)("strong",{children:r}),"? This action cannot be undone."]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(d.Trash2,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,s.jsxs)("div",{className:"text-sm text-destructive",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"Warning:"}),(0,s.jsx)("p",{children:"This will permanently remove the member and all associated data from the system."})]})]})}),(0,s.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",className:"flex-1",onClick:l,disabled:i,children:"Cancel"}),(0,s.jsx)(v.Button,{type:"button",variant:"destructive",className:"flex-1",onClick:a,disabled:i,children:i?"Deleting...":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Member"]})})]})]})]})})})}function V(e){let{member:l,onMemberUpdated:a,isOpen:r,onClose:i}=e,[n,d]=t.useState(!1),[o,B]=t.useState({}),[D,G]=t.useState(!1),{userScope:L,loading:V,getVisibleFields:F}=(0,C.useUserScope)(),E=F(),[P,z]=t.useState({firstname:"",secondname:"",gender:"",birthdate:"",placeOfBirthProvince:"",placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:"",localChurch:"",email:"",phone:"",type:"",status:"active",regionId:"",universityId:"",smallGroupId:"",alumniGroupId:"",graduationDate:"",faculty:"",professionalism:"",maritalStatus:""}),[k,T]=t.useState([]),[M,A]=t.useState([]),[U,R]=t.useState([]),[_,q]=t.useState([]),[W,H]=t.useState([]),[Y,K]=t.useState({}),[J,Q]=t.useState([]),[X,Z]=t.useState(!1),[$,ee]=t.useState([]),[es,et]=t.useState([]),[el,ea]=t.useState([]),[er,ei]=t.useState({}),en=async(e,s)=>{K(s=>({...s,[e]:!0}));try{let t=s?"/api/locations?type=".concat(e,"&parentId=").concat(s):"/api/locations?type=".concat(e),l=await fetch(t),a=await l.json();if(l.ok)switch(e){case"provinces":T(a);break;case"districts":A(a);break;case"sectors":R(a);break;case"cells":q(a);break;case"villages":H(a)}}catch(s){console.error("Error fetching ".concat(e,":"),s)}finally{K(s=>({...s,[e]:!1}))}},ec=async e=>{if(!e)return void Q([]);Z(!0);try{let s=await fetch("/api/small-groups?universityId=".concat(e));if(!s.ok)throw Error("Failed to fetch small groups");let t=await s.json();Q(t)}catch(e){console.error("Error fetching small groups:",e),Q([])}finally{Z(!1)}},ed=async()=>{ei(e=>({...e,regions:!0}));try{let e=await fetch("/api/regions");if(!e.ok)throw Error("Failed to fetch regions");let s=await e.json();ee(s)}catch(e){console.error("Error fetching regions:",e),ee([])}finally{ei(e=>({...e,regions:!1}))}},eo=async e=>{if(!e)return void et([]);ei(e=>({...e,universities:!0}));try{let s=await fetch("/api/universities?regionId=".concat(e));if(!s.ok)throw Error("Failed to fetch universities");let t=await s.json();et(t)}catch(e){console.error("Error fetching universities:",e),et([])}finally{ei(e=>({...e,universities:!1}))}},em=async e=>{if(!e)return void ea([]);ei(e=>({...e,alumniGroups:!0}));try{let s=await fetch("/api/alumni-small-groups?regionId=".concat(e));if(!s.ok)throw Error("Failed to fetch alumni groups");let t=await s.json();ea(t)}catch(e){console.error("Error fetching alumni groups:",e),ea([])}finally{ei(e=>({...e,alumniGroups:!1}))}};t.useEffect(()=>{if(l){var e,s,t,a;z({firstname:l.firstname||"",secondname:l.secondname||"",gender:l.gender||"",birthdate:l.birthdate?new Date(l.birthdate).toISOString().split("T")[0]:"",placeOfBirthProvince:l.placeOfBirthProvince||"",placeOfBirthDistrict:l.placeOfBirthDistrict||"",placeOfBirthSector:l.placeOfBirthSector||"",placeOfBirthCell:l.placeOfBirthCell||"",placeOfBirthVillage:l.placeOfBirthVillage||"",localChurch:l.localChurch||"",email:l.email||"",phone:l.phone||"",type:l.type||"",status:l.status||"active",regionId:(null==(e=l.regionId)?void 0:e.toString())||"",universityId:(null==(s=l.universityId)?void 0:s.toString())||"",smallGroupId:(null==(t=l.smallGroupId)?void 0:t.toString())||"",alumniGroupId:(null==(a=l.alumniGroupId)?void 0:a.toString())||"",graduationDate:l.graduationDate?new Date(l.graduationDate).toISOString().split("T")[0]:"",faculty:l.faculty||"",professionalism:l.professionalism||"",maritalStatus:l.maritalStatus||""})}},[l]),t.useEffect(()=>{P.universityId?ec(P.universityId):Q([])},[P.universityId]),t.useEffect(()=>{(null==L?void 0:L.scope)!=="superadmin"||V||ed()},[null==L?void 0:L.scope,V]),t.useEffect(()=>{(null==L?void 0:L.scope)==="superadmin"&&P.regionId?eo(P.regionId):et([])},[P.regionId,null==L?void 0:L.scope]),t.useEffect(()=>{(null==L?void 0:L.scope)==="superadmin"&&P.regionId?em(P.regionId):ea([])},[P.regionId,null==L?void 0:L.scope]);let eu=(e,s)=>{z(t=>({...t,[e]:s})),o[e]&&B(s=>({...s,[e]:""})),D&&G(!1),"placeOfBirthProvince"===e?(z(e=>({...e,placeOfBirthDistrict:"",placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),A([]),R([]),q([]),H([]),s&&en("districts",s)):"placeOfBirthDistrict"===e?(z(e=>({...e,placeOfBirthSector:"",placeOfBirthCell:"",placeOfBirthVillage:""})),R([]),q([]),H([]),s&&en("sectors",s)):"placeOfBirthSector"===e?(z(e=>({...e,placeOfBirthCell:"",placeOfBirthVillage:""})),q([]),H([]),s&&en("cells",s)):"placeOfBirthCell"===e&&(z(e=>({...e,placeOfBirthVillage:""})),H([]),s&&en("villages",s))};t.useEffect(()=>{r&&en("provinces")},[r]);let ex=async e=>{if((e.preventDefault(),l)&&(()=>{try{return O.parse(P),B({}),!0}catch(s){let e={};return s&&"object"==typeof s&&"errors"in s&&Array.isArray(s.errors)&&s.errors.forEach(s=>{e[s.path[0]]=s.message}),B(e),!1}})()){d(!0);try{let e={...P,gender:P.gender||null,birthdate:P.birthdate||null,placeOfBirthProvince:P.placeOfBirthProvince||null,placeOfBirthDistrict:P.placeOfBirthDistrict||null,placeOfBirthSector:P.placeOfBirthSector||null,placeOfBirthCell:P.placeOfBirthCell||null,placeOfBirthVillage:P.placeOfBirthVillage||null,localChurch:P.localChurch||null,email:P.email||null,phone:P.phone||null,regionId:P.regionId||null,universityId:P.universityId||null,smallGroupId:P.smallGroupId||null,alumniGroupId:P.alumniGroupId||null,graduationDate:P.graduationDate||null,faculty:P.faculty||null,professionalism:P.professionalism||null,maritalStatus:P.maritalStatus||null},s=await fetch("/api/members?id=".concat(l.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),t=await s.json();s.ok?(G(!0),B({}),a&&a(),setTimeout(()=>{i(),G(!1)},1500)):(console.error("API Error:",t),t.details?B({general:Array.isArray(t.details)?t.details.map(e=>e.message).join(", "):t.details}):B({general:t.error||"Failed to update member"}))}catch(e){console.error("Error updating member:",e),B({general:"An unexpected error occurred"})}finally{d(!1)}}};return l?(0,s.jsx)(w.Sheet,{open:r,onOpenChange:i,children:(0,s.jsx)(w.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,s.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,s.jsxs)(w.SheetHeader,{className:"pb-8 text-center",children:[(0,s.jsxs)(w.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,s.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,s.jsx)(c.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Member"]}),(0,s.jsxs)(w.SheetDescription,{className:"text-lg text-muted-foreground",children:["Update member information for ",l.firstname," ",l.secondname,"."]})]}),(0,s.jsxs)(N.Card,{className:"shadow-lg",children:[(0,s.jsx)(N.CardHeader,{className:"pb-6",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"Member Information"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below for this member"})]})}),(0,s.jsx)(N.CardContent,{children:(0,s.jsxs)("form",{onSubmit:ex,className:"flex flex-col gap-6",children:[o.general&&(0,s.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:o.general}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Personal Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"firstname",className:"text-sm font-medium",children:"First Name *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(b.Input,{id:"firstname",placeholder:"Enter first name",className:"pl-10 h-11",value:P.firstname,onChange:e=>eu("firstname",e.target.value),required:!0})]}),o.firstname&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.firstname})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"secondname",className:"text-sm font-medium",children:"Second Name *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(I.User,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,s.jsx)(b.Input,{id:"secondname",placeholder:"Enter second name",className:"pl-10 h-11",value:P.secondname,onChange:e=>eu("secondname",e.target.value),required:!0})]}),o.secondname&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.secondname})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"gender",className:"text-sm font-medium",children:"Gender"}),(0,s.jsxs)(S.Select,{value:P.gender,onValueChange:e=>eu("gender",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select gender"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"male",children:"Male"}),(0,s.jsx)(S.SelectItem,{value:"female",children:"Female"})]})]}),o.gender&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.gender})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"birthdate",className:"text-sm font-medium",children:"Birth Date"}),(0,s.jsx)(b.Input,{id:"birthdate",type:"date",className:"h-11",value:P.birthdate,onChange:e=>eu("birthdate",e.target.value)}),o.birthdate&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.birthdate})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"maritalStatus",className:"text-sm font-medium",children:"Marital Status"}),(0,s.jsxs)(S.Select,{value:P.maritalStatus,onValueChange:e=>eu("maritalStatus",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select status"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"Single",children:"Single"}),(0,s.jsx)(S.SelectItem,{value:"Married",children:"Married"}),(0,s.jsx)(S.SelectItem,{value:"Divorced",children:"Divorced"}),(0,s.jsx)(S.SelectItem,{value:"Widowed",children:"Widowed"})]})]}),o.maritalStatus&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.maritalStatus})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contact Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"email",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(p.Mail,{className:"h-4 w-4"}),"Email"]}),(0,s.jsx)(b.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:P.email,onChange:e=>eu("email",e.target.value)}),o.email&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.email})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"phone",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(h.Phone,{className:"h-4 w-4"}),"Phone Number"]}),(0,s.jsx)(b.Input,{id:"phone",type:"tel",placeholder:"+250 788 123 456",className:"h-11",value:P.phone,onChange:e=>eu("phone",e.target.value)}),o.phone&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.phone})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"localChurch",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(j.Church,{className:"h-4 w-4"}),"Local Church"]}),(0,s.jsx)(b.Input,{id:"localChurch",placeholder:"Enter local church name",className:"h-11",value:P.localChurch,onChange:e=>eu("localChurch",e.target.value)}),o.localChurch&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.localChurch})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Place of Birth"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthProvince",className:"text-sm font-medium",children:"Province"}),(0,s.jsxs)(S.Select,{value:P.placeOfBirthProvince,onValueChange:e=>eu("placeOfBirthProvince",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select province"})}),(0,s.jsx)(S.SelectContent,{children:k.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthProvince&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthProvince})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthDistrict",className:"text-sm font-medium",children:"District"}),(0,s.jsxs)(S.Select,{value:P.placeOfBirthDistrict,onValueChange:e=>eu("placeOfBirthDistrict",e),disabled:!P.placeOfBirthProvince||0===M.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:Y.districts?"Loading districts...":P.placeOfBirthProvince?"Select district":"Select province first"})}),(0,s.jsx)(S.SelectContent,{children:M.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthDistrict&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthDistrict})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthSector",className:"text-sm font-medium",children:"Sector"}),(0,s.jsxs)(S.Select,{value:P.placeOfBirthSector,onValueChange:e=>eu("placeOfBirthSector",e),disabled:!P.placeOfBirthDistrict||0===U.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:Y.sectors?"Loading sectors...":P.placeOfBirthDistrict?"Select sector":"Select district first"})}),(0,s.jsx)(S.SelectContent,{children:U.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthSector&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthSector})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthCell",className:"text-sm font-medium",children:"Cell"}),(0,s.jsxs)(S.Select,{value:P.placeOfBirthCell,onValueChange:e=>eu("placeOfBirthCell",e),disabled:!P.placeOfBirthSector||0===_.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:Y.cells?"Loading cells...":P.placeOfBirthSector?"Select cell":"Select sector first"})}),(0,s.jsx)(S.SelectContent,{children:_.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthCell&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthCell})]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"placeOfBirthVillage",className:"text-sm font-medium",children:"Village"}),(0,s.jsxs)(S.Select,{value:P.placeOfBirthVillage,onValueChange:e=>eu("placeOfBirthVillage",e),disabled:!P.placeOfBirthCell||0===W.length,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:Y.villages?"Loading villages...":P.placeOfBirthCell?"Select village":"Select cell first"})}),(0,s.jsx)(S.SelectContent,{children:W.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id,children:e.name},e.id))})]}),o.placeOfBirthVillage&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.placeOfBirthVillage})]})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Education & Professional Information"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"faculty",className:"text-sm font-medium",children:"Faculty"}),(0,s.jsx)(b.Input,{id:"faculty",placeholder:"Enter faculty",className:"h-11",value:P.faculty,onChange:e=>eu("faculty",e.target.value)}),o.faculty&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.faculty})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"professionalism",className:"text-sm font-medium",children:"Professionalism"}),(0,s.jsx)(b.Input,{id:"professionalism",placeholder:"Enter profession",className:"h-11",value:P.professionalism,onChange:e=>eu("professionalism",e.target.value)}),o.professionalism&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.professionalism})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"graduationDate",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(u.Calendar,{className:"h-4 w-4"}),"Graduation Date"]}),(0,s.jsx)(b.Input,{id:"graduationDate",type:"date",className:"h-11",value:P.graduationDate,onChange:e=>eu("graduationDate",e.target.value)}),o.graduationDate&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.graduationDate})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Member Type & Status"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"type",className:"text-sm font-medium",children:"Member Type *"}),(0,s.jsxs)(S.Select,{value:P.type,onValueChange:e=>eu("type",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:"Select member type"})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"student",children:"Student"}),(0,s.jsx)(S.SelectItem,{value:"graduate",children:"Graduate"}),(0,s.jsx)(S.SelectItem,{value:"staff",children:"Staff"}),(0,s.jsx)(S.SelectItem,{value:"volunteer",children:"Volunteer"}),(0,s.jsx)(S.SelectItem,{value:"alumni",children:"Alumni"})]})]}),o.type&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.type})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(y.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status"}),(0,s.jsxs)(S.Select,{value:P.status,onValueChange:e=>eu("status",e),children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{})}),(0,s.jsxs)(S.SelectContent,{children:[(0,s.jsx)(S.SelectItem,{value:"active",children:"Active"}),(0,s.jsx)(S.SelectItem,{value:"pre_graduate",children:"Pre-Graduate"}),(0,s.jsx)(S.SelectItem,{value:"graduate",children:"Graduate"}),(0,s.jsx)(S.SelectItem,{value:"alumni",children:"Alumni"}),(0,s.jsx)(S.SelectItem,{value:"inactive",children:"Inactive"})]})]}),o.status&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.status})]})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Organization Information"}),V?(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading organization scope..."})}):(0,s.jsxs)(s.Fragment,{children:[L&&(0,s.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg",children:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground",children:[(0,s.jsx)("strong",{children:"Current Scope:"})," ",L.scope.charAt(0).toUpperCase()+L.scope.slice(1),L.region&&" - ".concat(L.region.name),L.university&&" - ".concat(L.university.name),L.smallGroup&&" - ".concat(L.smallGroup.name),L.alumniGroup&&" - ".concat(L.alumniGroup.name)]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.region&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(x.MapPin,{className:"h-4 w-4"}),"Region"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:P.regionId,onValueChange:e=>eu("regionId",e),disabled:er.regions,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:er.regions?"Loading regions...":"Select region"})}),(0,s.jsx)(S.SelectContent,{children:$.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"regionId",type:"number",placeholder:"Enter region ID",className:"h-11",value:P.regionId,onChange:e=>eu("regionId",e.target.value)}),o.regionId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.regionId})]}),E.university&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(f.Building2,{className:"h-4 w-4"}),"University"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:P.universityId,onValueChange:e=>eu("universityId",e),disabled:!P.regionId||er.universities,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:er.universities?"Loading universities...":P.regionId?"Select university":"Select region first"})}),(0,s.jsx)(S.SelectContent,{children:es.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"universityId",type:"number",placeholder:"Enter university ID",className:"h-11",value:P.universityId,onChange:e=>eu("universityId",e.target.value)}),o.universityId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.universityId})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[E.smallGroup&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(m.Users,{className:"h-4 w-4"}),"Small Group"]}),(0,s.jsxs)(S.Select,{value:P.smallGroupId,onValueChange:e=>eu("smallGroupId",e),disabled:!P.universityId||X,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:X?"Loading small groups...":P.universityId?"Select small group":"Select university first"})}),(0,s.jsx)(S.SelectContent,{children:J.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),o.smallGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.smallGroupId})]}),E.alumniGroup&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)(y.Label,{htmlFor:"alumniGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,s.jsx)(g.GraduationCap,{className:"h-4 w-4"}),"Alumni Group"]}),(null==L?void 0:L.scope)==="superadmin"?(0,s.jsxs)(S.Select,{value:P.alumniGroupId,onValueChange:e=>eu("alumniGroupId",e),disabled:!P.regionId||er.alumniGroups,children:[(0,s.jsx)(S.SelectTrigger,{className:"h-11",children:(0,s.jsx)(S.SelectValue,{placeholder:er.alumniGroups?"Loading alumni groups...":P.regionId?"Select alumni group":"Select region first"})}),(0,s.jsx)(S.SelectContent,{children:el.map(e=>(0,s.jsx)(S.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}):(0,s.jsx)(b.Input,{id:"alumniGroupId",type:"number",placeholder:"Enter alumni group ID",className:"h-11",value:P.alumniGroupId,onChange:e=>eu("alumniGroupId",e.target.value)}),o.alumniGroupId&&(0,s.jsx)("p",{className:"text-sm text-red-600",children:o.alumniGroupId})]})]}),!E.region&&!E.university&&!E.smallGroup&&!E.alumniGroup&&(0,s.jsx)("div",{className:"text-center py-4",children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Organization fields are automatically set based on your current scope."})})]})]}),(0,s.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,s.jsx)(v.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:i,disabled:n,children:"Cancel"}),(0,s.jsx)(v.Button,{type:"submit",className:"flex-1 h-11",disabled:n||D,children:n?"Updating...":D?"âœ… Updated Successfully!":(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Edit,{className:"mr-2 h-4 w-4"}),"Update Member"]})})]})]})})]})]})})}):null}var F=e.i(11649);let E={student:"Student",graduate:"Graduate",staff:"Staff",volunteer:"Volunteer",alumni:"Alumni"},P={active:"Active",pre_graduate:"Pre-Graduate",graduate:"Graduate",alumni:"Alumni",inactive:"Inactive"},z={active:"bg-green-100 text-green-800",pre_graduate:"bg-blue-100 text-blue-800",graduate:"bg-purple-100 text-purple-800",alumni:"bg-orange-100 text-orange-800",inactive:"bg-gray-100 text-gray-800"},k={student:"bg-blue-100 text-blue-800",graduate:"bg-green-100 text-green-800",staff:"bg-purple-100 text-purple-800",volunteer:"bg-yellow-100 text-yellow-800",alumni:"bg-orange-100 text-orange-800"};function T(e){let{members:l,loading:a,error:v,onRefresh:N,refreshKey:b}=e,[y,S]=(0,t.useState)(""),[w,I]=(0,t.useState)(1),[C]=(0,t.useState)(5),[B,O]=(0,t.useState)({isOpen:!1,memberId:null,memberName:""}),[G,T]=(0,t.useState)(!1),[M,A]=(0,t.useState)(null),U=()=>{O({isOpen:!1,memberId:null,memberName:""})},R=async()=>{if(B.memberId){T(!0);try{let e=await fetch("/api/members?id=".concat(B.memberId),{method:"DELETE"});200===e.status&&(U(),N())}catch(e){console.error("Error deleting member:",e),alert("Failed to delete member. Please try again.")}finally{T(!1)}}},_=l.filter(e=>{var s,t,l,a,r,i,n,c,d,o,m,u,x,h,p,g,f,j,v,N,b;if(!y)return!0;let S=y.toLowerCase();return(null==(s=e.firstname)?void 0:s.toLowerCase().includes(S))||(null==(t=e.secondname)?void 0:t.toLowerCase().includes(S))||(null==(l=e.email)?void 0:l.toLowerCase().includes(S))||(null==(a=e.phone)?void 0:a.includes(y))||(null==(r=e.faculty)?void 0:r.toLowerCase().includes(S))||(null==(i=e.professionalism)?void 0:i.toLowerCase().includes(S))||(null==(n=e.localChurch)?void 0:n.toLowerCase().includes(S))||(null==(d=e.region)||null==(c=d.name)?void 0:c.toLowerCase().includes(S))||(null==(m=e.university)||null==(o=m.name)?void 0:o.toLowerCase().includes(S))||(null==(x=e.smallgroup)||null==(u=x.name)?void 0:u.toLowerCase().includes(S))||(null==(p=e.alumnismallgroup)||null==(h=p.name)?void 0:h.toLowerCase().includes(S))||(null==(g=e.type)?void 0:g.toLowerCase().includes(S))||(null==(f=e.status)?void 0:f.toLowerCase().includes(S))||(null==(j=e.gender)?void 0:j.toLowerCase().includes(S))||(null==(v=e.maritalStatus)?void 0:v.toLowerCase().includes(S))||(null==(N=E[e.type])?void 0:N.toLowerCase().includes(S))||(null==(b=P[e.status])?void 0:b.toLowerCase().includes(S))}),q=Math.ceil(_.length/C),W=(w-1)*C,H=W+C,Y=_.slice(W,H),K=e=>{I(Math.max(1,Math.min(e,q)))};return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search members...",value:y,onChange:e=>{S(e.target.value),I(1)},className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,s.jsxs)("button",{onClick:N,disabled:a,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(i.RefreshCw,{className:"w-4 h-4 ".concat(a?"animate-spin":"")}),(0,s.jsx)("span",{className:"hidden sm:inline",children:a?"Loading...":"Refresh"})]})]}),(0,s.jsx)(D,{onMemberAdded:N,children:(0,s.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,s.jsx)(n.UserPlus,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Add New Member"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Add Member"})]})})]}),v&&(0,s.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,s.jsx)("span",{className:"text-sm",children:v})]}),(0,s.jsx)("button",{onClick:N,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,s.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[a?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3 text-muted-foreground",children:[(0,s.jsx)(i.RefreshCw,{className:"w-8 h-8 animate-spin text-primary"}),(0,s.jsx)("span",{className:"text-lg font-medium",children:"Loading members..."}),(0,s.jsx)("span",{className:"text-sm",children:"Please wait while we fetch the data"})]})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,s.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Member"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Organization"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden xl:table-cell",children:"Education"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Type & Status"}),(0,s.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"bg-card divide-y divide-border",children:Y.map(e=>{var t,l,a,r,i;return(0,s.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,s.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[null==(t=e.firstname)?void 0:t[0],null==(l=e.secondname)?void 0:l[0]]})})}),(0,s.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-foreground truncate",children:[e.firstname," ",e.secondname]}),(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,s.jsx)("span",{children:e.gender}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsx)("span",{children:e.maritalStatus}),e.birthdate&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:[new Date().getFullYear()-new Date(e.birthdate).getFullYear(),"y"]})]})]}),(0,s.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,s.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,s.jsx)(p.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate",children:e.email})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.phone})]})]})]})]})}),(0,s.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,s.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,s.jsx)(p.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.email})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.phone})]}),e.localChurch&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(j.Church,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.localChurch})]})]}),(0,s.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:[(0,s.jsx)(F.DenyOnly,{scopes:"university",children:(0,s.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,s.jsx)(x.MapPin,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[150px]",children:null==(a=e.region)?void 0:a.name})]})}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(f.Building2,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[150px]",children:null==(r=e.university)?void 0:r.name})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(m.Users,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[150px]",children:null==(i=e.smallgroup)?void 0:i.name})]}),e.alumnismallgroup&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(g.GraduationCap,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[150px]",children:e.alumnismallgroup.name})]})]}),(0,s.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden xl:table-cell",children:[e.faculty&&(0,s.jsx)("div",{className:"text-sm text-foreground truncate max-w-[150px]",children:e.faculty}),(0,s.jsx)(F.DenyOnly,{scopes:"university",children:e.professionalism&&(0,s.jsx)("div",{className:"text-sm text-muted-foreground truncate max-w-[150px]",children:e.professionalism})}),e.graduationDate&&(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(u.Calendar,{className:"w-3 h-3"}),(0,s.jsxs)("span",{className:"truncate",children:["Grad: ",new Date(e.graduationDate).toLocaleDateString()]})]})]}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1 sm:gap-2",children:[(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(k[e.type]),children:E[e.type]}),(0,s.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(z[e.status]),children:P[e.status]}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]})}),(0,s.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,s.jsx)("button",{className:"text-primary hover:text-primary/80 p-1 rounded",title:"View",children:(0,s.jsx)(o.Eye,{className:"w-4 h-4"})}),(0,s.jsx)("button",{onClick:()=>{A(e)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,s.jsx)(c.Edit,{className:"w-4 h-4"})}),(0,s.jsx)(F.DenyOnly,{scopes:"university",children:(0,s.jsx)("button",{onClick:()=>{O({isOpen:!0,memberId:e.id,memberName:"".concat(e.firstname," ").concat(e.secondname)})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,s.jsx)(d.Trash2,{className:"w-4 h-4"})})})]})})]},e.id)})})]})}),!a&&0===Y.length&&!v&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(m.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No members found"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:y?"No members match your search criteria.":"No members have been added yet."}),!y&&(0,s.jsx)(D,{onMemberAdded:N,children:(0,s.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,s.jsx)(n.UserPlus,{className:"w-4 h-4"}),"Add First Member"]})})]}),!a&&_.length>0&&(0,s.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:[(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:W+1})," to ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:Math.min(H,_.length)})," of ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:_.length})," members"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,s.jsx)("button",{onClick:()=>{K(w-1)},disabled:1===w,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,q)},(e,t)=>{let l;return l=q<=5||w<=3?t+1:w>=q-2?q-4+t:w-2+t,(0,s.jsx)("button",{onClick:()=>K(l),className:"px-2 py-1 text-xs sm:text-sm rounded ".concat(w===l?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:l},l)}),q>5&&w<q-2&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"..."}),(0,s.jsx)("button",{onClick:()=>K(q),className:"px-2 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded",children:q})]})]}),(0,s.jsx)("button",{onClick:()=>{K(w+1)},disabled:w===q,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]}),(0,s.jsx)(L,{isOpen:B.isOpen,onClose:U,onConfirm:R,memberName:B.memberName,isLoading:G}),(0,s.jsx)(V,{member:M,onMemberUpdated:N,isOpen:null!==M,onClose:()=>{A(null)}})]})}var M=e.i(75117),A=e.i(69035),U=e.i(11522),R=e.i(47163);function _(e){let{className:t,...l}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,R.cn)("w-full caption-bottom text-sm",t),...l})})}function q(e){let{className:t,...l}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,R.cn)("[&_tr]:border-b",t),...l})}function W(e){let{className:t,...l}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,R.cn)("[&_tr:last-child]:border-0",t),...l})}function H(e){let{className:t,...l}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,R.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...l})}function Y(e){let{className:t,...l}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,R.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}function K(e){let{className:t,...l}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,R.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...l})}var J=e.i(18566);let Q=async()=>{try{return(await l.default.get("/api/members")).data.members||[]}catch(e){throw console.error("Error fetching small group members:",e),e}};function X(e){var l,a,n;let{refreshKey:c}=e,[d,o]=(0,t.useState)(1),[v,N]=(0,t.useState)(""),[b,y]=(0,t.useState)([]),[S,w]=(0,t.useState)(!0),[I,C]=(0,t.useState)(null),B=(0,J.useRouter)(),O=b.length>0?{name:(null==(l=b[0].smallgroup)?void 0:l.name)||"Unknown Small Group",university:(null==(a=b[0].university)?void 0:a.name)||"Unknown University",region:(null==(n=b[0].region)?void 0:n.name)||"Unknown Region",memberCount:b.length}:null,D=async()=>{try{w(!0),C(null);let e=await Q();y(e)}catch(e){console.error("Error fetching small group members:",e),C(e instanceof Error?e.message:"Failed to fetch members")}finally{w(!1)}};(0,t.useEffect)(()=>{D()},[c]);let G=e=>e?new Date(e).toLocaleDateString():"N/A",L=(0,t.useMemo)(()=>{if(!b)return[];if(!v)return b;let e=v.toLowerCase();return b.filter(s=>[s.firstname,s.secondname,s.email,s.phone,G(s.birthdate),s.gender].filter(Boolean).join(" ").toLowerCase().includes(e))},[b,v]),V=Math.ceil(L.length/5),F=(d-1)*5,E=F+5,P=L.slice(F,E),z=e=>{o(Math.max(1,Math.min(e,V)))};return(0,s.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[S?(0,s.jsx)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 rounded-lg p-4 sm:p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(j.Church,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"h-6 w-32 bg-muted animate-pulse rounded mb-2"}),(0,s.jsx)("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})]})]})}):O?(0,s.jsx)("div",{className:"bg-gradient-to-r from-primary/5 to-primary/10 border border-primary/20 rounded-lg p-4 sm:p-6 mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,s.jsx)(j.Church,{className:"w-6 h-6 text-primary"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-foreground",children:O.name}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Small Group Members"})]})]}),(0,s.jsxs)("div",{className:"flex-1 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(f.Building2,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"University"}),(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:O.university})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(x.MapPin,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Region"}),(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:O.region})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(m.Users,{className:"w-4 h-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:"Total Members"}),(0,s.jsx)("p",{className:"text-sm font-medium text-foreground",children:O.memberCount})]})]})]})]})}):null,(0,s.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,s.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,s.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,s.jsx)("input",{type:"text",placeholder:"Search members...",value:v,onChange:e=>{N(e.target.value),o(1)},className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,s.jsxs)("button",{onClick:D,disabled:S,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,s.jsx)(i.RefreshCw,{className:"w-4 h-4 ".concat(S?"animate-spin":"")}),(0,s.jsx)("span",{className:"hidden sm:inline",children:S?"Loading...":"Refresh"})]})]})}),I&&(0,s.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,s.jsx)("span",{className:"text-sm",children:I})]}),(0,s.jsx)("button",{onClick:D,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,s.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[S?(0,s.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(i.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,s.jsx)("span",{children:"Loading members..."})]})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsx)("div",{className:"min-w-[1000px]",children:(0,s.jsxs)(_,{children:[(0,s.jsx)(q,{className:"bg-muted/50 border-b border-border",children:(0,s.jsxs)(H,{children:[(0,s.jsx)(Y,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Member"}),(0,s.jsx)(Y,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden md:table-cell",children:"Contact Information"}),(0,s.jsx)(Y,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden lg:table-cell",children:"Birth Information"}),(0,s.jsx)(Y,{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider hidden xl:table-cell",children:"Member Details"})]})}),(0,s.jsx)(W,{className:"bg-card divide-y divide-border",children:P.map(e=>{var t,l;return(0,s.jsxs)(H,{className:"hover:bg-muted/50 cursor-pointer",onClick:()=>B.push("/people/members/".concat(e.id)),children:[(0,s.jsx)(K,{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,s.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-xs sm:text-sm font-medium text-muted-foreground",children:[null==(t=e.firstname)?void 0:t[0],null==(l=e.secondname)?void 0:l[0]]})})}),(0,s.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,s.jsxs)("div",{className:"text-sm font-medium text-foreground truncate",children:[e.firstname," ",e.secondname]}),(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[(0,s.jsx)("span",{children:e.gender}),e.birthdate&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsxs)("span",{children:[new Date().getFullYear()-new Date(e.birthdate).getFullYear(),"y"]})]})]}),(0,s.jsxs)("div",{className:"md:hidden mt-1 space-y-1",children:[(0,s.jsxs)("div",{className:"text-xs text-foreground flex items-center gap-1",children:[(0,s.jsx)(p.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate",children:e.email})]}),(0,s.jsxs)("div",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.phone})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-full capitalize",children:e.type}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full capitalize",children:e.status})]})]})]})]})}),(0,s.jsxs)(K,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden md:table-cell",children:[(0,s.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,s.jsx)(p.Mail,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate max-w-[200px]",children:e.email})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[(0,s.jsx)(h.Phone,{className:"w-3 h-3"}),(0,s.jsx)("span",{children:e.phone})]})]}),(0,s.jsxs)(K,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden lg:table-cell",children:[(0,s.jsxs)("div",{className:"text-sm text-foreground flex items-center gap-1",children:[(0,s.jsx)(u.Calendar,{className:"w-3 h-3"}),(0,s.jsx)("span",{className:"truncate",children:G(e.birthdate)})]}),e.gender&&(0,s.jsx)("div",{className:"text-sm text-muted-foreground capitalize",children:e.gender})]}),(0,s.jsx)(K,{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap hidden xl:table-cell",children:(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(g.GraduationCap,{className:"w-3 h-3 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-full capitalize",children:e.type})]}),(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{className:"text-xs px-2 py-1 bg-muted text-muted-foreground rounded-full capitalize",children:e.status})}),e.faculty&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground truncate",children:e.faculty})]})})]},e.id)})})]})})}),!S&&0===P.length&&!I&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(m.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No members found"}),(0,s.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:v?"No members match your search criteria.":"No members have been added yet."})]}),!S&&L.length>0&&(0,s.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:[(0,s.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:F+1})," to ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:Math.min(E,L.length)})," of ",(0,s.jsx)("span",{className:"font-medium text-foreground",children:L.length})," members"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,s.jsx)("button",{onClick:()=>{z(d-1)},disabled:1===d,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[Array.from({length:Math.min(5,V)},(e,t)=>{let l;return l=V<=5||d<=3?t+1:d>=V-2?V-4+t:d-2+t,(0,s.jsx)("button",{onClick:()=>z(l),className:"px-2 py-1 text-xs sm:text-sm rounded ".concat(d===l?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted/50"),children:l},l)}),V>5&&d<V-2&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:"..."}),(0,s.jsx)("button",{onClick:()=>z(V),className:"px-2 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground hover:bg-muted/50 rounded",children:V})]})]}),(0,s.jsx)("button",{onClick:()=>{z(d+1)},disabled:d===V,className:"px-2 sm:px-3 py-1 text-xs sm:text-sm text-muted-foreground hover:text-foreground border border-border rounded hover:bg-muted/50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})})]})]})}function Z(){let[e,r]=(0,t.useState)([]),[i,n]=(0,t.useState)(!0),[c,d]=(0,t.useState)(null),o=async()=>{try{n(!0),d(null);let[e]=await Promise.all([l.default.get("/api/members"),new Promise(e=>setTimeout(e,500))]);r(e.data.members||[])}catch(e){console.error("Error fetching members:",e),d("Failed to fetch members. Please try again.")}finally{n(!1)}};return(0,t.useEffect)(()=>{o()},[]),(0,s.jsxs)(U.SidebarProvider,{children:[(0,s.jsx)(a.AppSidebar,{}),(0,s.jsxs)(U.SidebarInset,{children:[(0,s.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,s.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,s.jsx)(U.SidebarTrigger,{className:"-ml-1"}),(0,s.jsx)(A.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,s.jsx)(M.Breadcrumb,{children:(0,s.jsxs)(M.BreadcrumbList,{children:[(0,s.jsx)(M.BreadcrumbItem,{className:"hidden md:block",children:(0,s.jsx)(M.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,s.jsx)(M.BreadcrumbSeparator,{className:"hidden md:block"}),(0,s.jsx)(M.BreadcrumbItem,{children:(0,s.jsx)(M.BreadcrumbLink,{href:"/links/people/members",children:"People Management"})}),(0,s.jsx)(M.BreadcrumbSeparator,{}),(0,s.jsx)(M.BreadcrumbItem,{children:(0,s.jsx)(M.BreadcrumbPage,{children:"Member Directory"})})]})})]})}),(0,s.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,s.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Member Directory"}),(0,s.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage members and their information across all groups"})]}),(0,s.jsx)(F.AllowOnly,{scopes:["superadmin","university","region"],children:(0,s.jsx)(T,{members:e,loading:i,error:c,onRefresh:o})}),(0,s.jsx)(F.AllowOnly,{scopes:"smallgroup",children:(0,s.jsx)(X,{})})]})})]})]})}}]);