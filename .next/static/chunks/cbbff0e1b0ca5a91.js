(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,61911,e=>{"use strict";e.s(["Users",()=>t],61911);let t=(0,e.i(75254).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},89737,e=>{"use strict";e.s(["Select",()=>n,"SelectContent",()=>c,"SelectItem",()=>m,"SelectTrigger",()=>o,"SelectValue",()=>d]);var t=e.i(43476),s=e.i(29402),a=e.i(78784),r=e.i(9797),l=e.i(54131),i=e.i(47163);function n(e){let{...a}=e;return(0,t.jsx)(s.Root,{"data-slot":"select",...a})}function d(e){let{...a}=e;return(0,t.jsx)(s.Value,{"data-slot":"select-value",...a})}function o(e){let{className:a,size:l="default",children:n,...d}=e;return(0,t.jsxs)(s.Trigger,{"data-slot":"select-trigger","data-size":l,className:(0,i.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...d,children:[n,(0,t.jsx)(s.Icon,{asChild:!0,children:(0,t.jsx)(r.ChevronDownIcon,{className:"size-4 opacity-50"})})]})}function c(e){let{className:a,children:r,position:l="popper",...n}=e;return(0,t.jsx)(s.Portal,{children:(0,t.jsxs)(s.Content,{"data-slot":"select-content",className:(0,i.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:l,...n,children:[(0,t.jsx)(u,{}),(0,t.jsx)(s.Viewport,{className:(0,i.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,t.jsx)(x,{})]})})}function m(e){let{className:r,children:l,...n}=e;return(0,t.jsxs)(s.Item,{"data-slot":"select-item",className:(0,i.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",r),...n,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(s.ItemIndicator,{children:(0,t.jsx)(a.CheckIcon,{className:"size-4"})})}),(0,t.jsx)(s.ItemText,{children:l})]})}function u(e){let{className:a,...r}=e;return(0,t.jsx)(s.ScrollUpButton,{"data-slot":"select-scroll-up-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...r,children:(0,t.jsx)(l.ChevronUpIcon,{className:"size-4"})})}function x(e){let{className:a,...l}=e;return(0,t.jsx)(s.ScrollDownButton,{"data-slot":"select-scroll-down-button",className:(0,i.cn)("flex cursor-default items-center justify-center py-1",a),...l,children:(0,t.jsx)(r.ChevronDownIcon,{className:"size-4"})})}},88511,27612,78894,e=>{"use strict";e.s(["Edit",()=>s],88511);var t=e.i(75254);let s=(0,t.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Trash2",()=>a],27612);let a=(0,t.default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["AlertTriangle",()=>r],78894);let r=(0,t.default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},46897,e=>{"use strict";e.s(["MapPin",()=>t],46897);let t=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},55436,16715,e=>{"use strict";e.s(["Search",()=>s],55436);var t=e.i(75254);let s=(0,t.default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);e.s(["RefreshCw",()=>a],16715);let a=(0,t.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},71850,e=>{"use strict";e.s(["Button",()=>i]);var t=e.i(43476),s=e.i(91918),a=e.i(25913),r=e.i(47163);let l=(0,a.cva)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function i(e){let{className:a,variant:i,size:n,asChild:d=!1,...o}=e,c=d?s.Slot:"button";return(0,t.jsx)(c,{"data-slot":"button",className:(0,r.cn)(l({variant:i,size:n,className:a})),...o})}},9956,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>i,"CardHeader",()=>r,"CardTitle",()=>l]);var t=e.i(43476),s=e.i(47163);function a(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function r(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...r})}function i(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...r})}},86882,e=>{"use strict";e.s(["Input",()=>a]);var t=e.i(43476),s=e.i(47163);function a(e){let{className:a,type:r,...l}=e;return(0,t.jsx)("input",{type:r,"data-slot":"input",className:(0,s.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...l})}},1968,e=>{"use strict";e.s(["Label",()=>r]);var t=e.i(43476),s=e.i(73741),a=e.i(47163);function r(e){let{className:r,...l}=e;return(0,t.jsx)(s.Root,{"data-slot":"label",className:(0,a.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",r),...l})}},53300,e=>{"use strict";e.s(["Sheet",()=>l,"SheetContent",()=>o,"SheetDescription",()=>u,"SheetHeader",()=>c,"SheetTitle",()=>m,"SheetTrigger",()=>i]);var t=e.i(43476),s=e.i(26999),a=e.i(95926),r=e.i(47163);function l(e){let{...a}=e;return(0,t.jsx)(s.Root,{"data-slot":"sheet",...a})}function i(e){let{...a}=e;return(0,t.jsx)(s.Trigger,{"data-slot":"sheet-trigger",...a})}function n(e){let{...a}=e;return(0,t.jsx)(s.Portal,{"data-slot":"sheet-portal",...a})}function d(e){let{className:a,...l}=e;return(0,t.jsx)(s.Overlay,{"data-slot":"sheet-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",a),...l})}function o(e){let{className:l,children:i,side:o="right",...c}=e;return(0,t.jsxs)(n,{children:[(0,t.jsx)(d,{}),(0,t.jsxs)(s.Content,{"data-slot":"sheet-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500","right"===o&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm","left"===o&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm","top"===o&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b","bottom"===o&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",l),...c,children:[i,(0,t.jsxs)(s.Close,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[(0,t.jsx)(a.XIcon,{className:"size-4"}),(0,t.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function c(e){let{className:s,...a}=e;return(0,t.jsx)("div",{"data-slot":"sheet-header",className:(0,r.cn)("flex flex-col gap-1.5 p-4",s),...a})}function m(e){let{className:a,...l}=e;return(0,t.jsx)(s.Title,{"data-slot":"sheet-title",className:(0,r.cn)("text-foreground font-semibold",a),...l})}function u(e){let{className:a,...l}=e;return(0,t.jsx)(s.Description,{"data-slot":"sheet-description",className:(0,r.cn)("text-muted-foreground text-sm",a),...l})}},14399,e=>{"use strict";e.s(["default",()=>C],14399);var t=e.i(43476),s=e.i(71645),a=e.i(81949),r=e.i(55436),l=e.i(16715),i=e.i(7233),n=e.i(88511),d=e.i(27612),o=e.i(61911),c=e.i(60313),m=e.i(71850),u=e.i(9956),x=e.i(86882),h=e.i(1968),p=e.i(89737),g=e.i(53300),f=e.i(7486),v=e.i(46897);function j(e){let{children:a,onSmallGroupAdded:r}=e,[l,n]=s.useState(!1),[d,c]=s.useState(!1),[j,b]=s.useState({}),[y,N]=s.useState(!1),[w,S]=s.useState([]),[I,C]=s.useState([]),[k,T]=s.useState({name:"",regionId:"",universityId:""});s.useEffect(()=>{l&&G()},[l]),s.useEffect(()=>{k.regionId?z(Number(k.regionId)):(C([]),T(e=>({...e,universityId:""})))},[k.regionId]);let G=async()=>{try{let e=await fetch("/api/regions"),t=await e.json();S(t)}catch(e){console.error("Error fetching regions:",e)}},z=async e=>{try{let t=await fetch("/api/universities?regionId=".concat(e)),s=await t.json();C(s)}catch(e){console.error("Error fetching universities:",e)}},E=(e,t)=>{T(s=>({...s,[e]:t})),j[e]&&b(t=>({...t,[e]:""})),y&&N(!1)},B=async e=>{if(e.preventDefault(),(()=>{let e={};return k.name.trim()||(e.name="Small group name is required"),k.regionId||(e.regionId="Region is required"),k.universityId||(e.universityId="University is required"),b(e),0===Object.keys(e).length})()){c(!0);try{let e=await fetch("/api/small-groups",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.name,regionId:Number(k.regionId),universityId:Number(k.universityId)})}),t=await e.json();e.ok?(N(!0),b({}),T({name:"",regionId:"",universityId:""}),r&&r(),setTimeout(()=>{n(!1),N(!1)},1500)):(console.error("API Error:",t),b({general:t.error||"Failed to create small group"}))}catch(e){console.error("Error creating small group:",e),b({general:"An unexpected error occurred"})}finally{c(!1)}}};return(0,t.jsxs)(g.Sheet,{open:l,onOpenChange:n,children:[(0,t.jsx)(g.SheetTrigger,{asChild:!0,children:a}),(0,t.jsx)(g.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,t.jsxs)(g.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)(g.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(i.Plus,{className:"h-6 w-6 text-primary"})}),"Add New Small Group"]}),(0,t.jsx)(g.SheetDescription,{className:"text-lg text-muted-foreground",children:"Add a new small group to your organization."})]}),(0,t.jsxs)(u.Card,{className:"shadow-lg",children:[(0,t.jsx)(u.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Small Group Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new small group"})]})}),(0,t.jsx)(u.CardContent,{children:(0,t.jsxs)("form",{onSubmit:B,className:"flex flex-col gap-6",children:[j.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Small Group Details"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(o.Users,{className:"h-4 w-4"}),"Small Group Name *"]}),(0,t.jsx)(x.Input,{id:"name",placeholder:"Enter small group name",className:"h-11",value:k.name,onChange:e=>E("name",e.target.value),required:!0}),j.name&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(v.MapPin,{className:"h-4 w-4"}),"Region *"]}),(0,t.jsxs)(p.Select,{value:k.regionId,onValueChange:e=>E("regionId",e),children:[(0,t.jsx)(p.SelectTrigger,{className:"h-11",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select a region"})}),(0,t.jsx)(p.SelectContent,{children:w.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),j.regionId&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.regionId})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(f.Building2,{className:"h-4 w-4"}),"University *"]}),(0,t.jsxs)(p.Select,{value:k.universityId,onValueChange:e=>E("universityId",e),disabled:!k.regionId,children:[(0,t.jsx)(p.SelectTrigger,{className:"h-11",children:(0,t.jsx)(p.SelectValue,{placeholder:k.regionId?"Select a university":"Select a region first"})}),(0,t.jsx)(p.SelectContent,{children:I.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),j.universityId&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.universityId})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>n(!1),disabled:d,children:"Cancel"}),(0,t.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:d||y,children:d?"Creating...":y?"✅ Created Successfully!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Plus,{className:"mr-2 h-4 w-4"}),"Add Small Group"]})})]})]})})]})]})})]})}var b=e.i(78894);function y(e){let{isOpen:s,onClose:a,onConfirm:r,smallGroupName:l,isLoading:i=!1}=e;return(0,t.jsx)(g.Sheet,{open:s,onOpenChange:a,children:(0,t.jsx)(g.SheetContent,{side:"top",className:"h-auto w-full max-w-md mx-auto",children:(0,t.jsxs)("div",{className:"py-8",children:[(0,t.jsxs)(g.SheetHeader,{className:"pb-6 text-center",children:[(0,t.jsx)("div",{className:"flex justify-center mb-4",children:(0,t.jsx)("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-destructive/10",children:(0,t.jsx)(b.AlertTriangle,{className:"h-8 w-8 text-destructive"})})}),(0,t.jsx)(g.SheetTitle,{className:"text-xl text-destructive",children:"Delete Small Group"}),(0,t.jsxs)(g.SheetDescription,{className:"text-base",children:["Are you sure you want to delete ",(0,t.jsx)("strong",{children:l}),"? This action cannot be undone."]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(d.Trash2,{className:"h-5 w-5 text-destructive mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-destructive",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"Warning:"}),(0,t.jsx)("p",{children:"This will permanently remove the small group and all associated data from the system."})]})]})}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1",onClick:a,disabled:i,children:"Cancel"}),(0,t.jsx)(m.Button,{type:"button",variant:"destructive",className:"flex-1",onClick:r,disabled:i,children:i?"Deleting...":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Small Group"]})})]})]})]})})})}function N(e){let{smallGroup:a,onSmallGroupUpdated:r,isOpen:l,onClose:i}=e,[d,c]=s.useState(!1),[j,b]=s.useState({}),[y,N]=s.useState(!1),[w,S]=s.useState([]),[I,C]=s.useState([]),[k,T]=s.useState({name:"",regionId:"",universityId:""});s.useEffect(()=>{l&&G()},[l]),s.useEffect(()=>{k.regionId?z(Number(k.regionId)):(C([]),T(e=>({...e,universityId:""})))},[k.regionId]),s.useEffect(()=>{if(a){var e,t;T({name:a.name||"",regionId:(null==(e=a.regionId)?void 0:e.toString())||"",universityId:(null==(t=a.universityId)?void 0:t.toString())||""})}},[a]);let G=async()=>{try{let e=await fetch("/api/regions"),t=await e.json();S(t)}catch(e){console.error("Error fetching regions:",e)}},z=async e=>{try{let t=await fetch("/api/universities?regionId=".concat(e)),s=await t.json();C(s)}catch(e){console.error("Error fetching universities:",e)}},E=(e,t)=>{T(s=>({...s,[e]:t})),j[e]&&b(t=>({...t,[e]:""})),y&&N(!1)},B=async e=>{if((e.preventDefault(),a)&&(()=>{let e={};return k.name.trim()||(e.name="Small group name is required"),k.regionId||(e.regionId="Region is required"),k.universityId||(e.universityId="University is required"),b(e),0===Object.keys(e).length})()){c(!0);try{let e=await fetch("/api/small-groups?id=".concat(a.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:k.name,regionId:Number(k.regionId),universityId:Number(k.universityId)})}),t=await e.json();e.ok?(N(!0),b({}),r&&r(),setTimeout(()=>{i(),N(!1)},1500)):(console.error("API Error:",t),b({general:t.error||"Failed to update small group"}))}catch(e){console.error("Error updating small group:",e),b({general:"An unexpected error occurred"})}finally{c(!1)}}};return a?(0,t.jsx)(g.Sheet,{open:l,onOpenChange:i,children:(0,t.jsx)(g.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,t.jsxs)(g.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)(g.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(n.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Small Group"]}),(0,t.jsxs)(g.SheetDescription,{className:"text-lg text-muted-foreground",children:["Update small group information for ",a.name,"."]})]}),(0,t.jsxs)(u.Card,{className:"shadow-lg",children:[(0,t.jsx)(u.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Small Group Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below for this small group"})]})}),(0,t.jsx)(u.CardContent,{children:(0,t.jsxs)("form",{onSubmit:B,className:"flex flex-col gap-6",children:[j.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:j.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Small Group Details"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(o.Users,{className:"h-4 w-4"}),"Small Group Name *"]}),(0,t.jsx)(x.Input,{id:"name",placeholder:"Enter small group name",className:"h-11",value:k.name,onChange:e=>E("name",e.target.value),required:!0}),j.name&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(v.MapPin,{className:"h-4 w-4"}),"Region *"]}),(0,t.jsxs)(p.Select,{value:k.regionId,onValueChange:e=>E("regionId",e),children:[(0,t.jsx)(p.SelectTrigger,{className:"h-11",children:(0,t.jsx)(p.SelectValue,{placeholder:"Select a region"})}),(0,t.jsx)(p.SelectContent,{children:w.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),j.regionId&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.regionId})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(f.Building2,{className:"h-4 w-4"}),"University *"]}),(0,t.jsxs)(p.Select,{value:k.universityId,onValueChange:e=>E("universityId",e),disabled:!k.regionId,children:[(0,t.jsx)(p.SelectTrigger,{className:"h-11",children:(0,t.jsx)(p.SelectValue,{placeholder:k.regionId?"Select a university":"Select a region first"})}),(0,t.jsx)(p.SelectContent,{children:I.map(e=>(0,t.jsx)(p.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]}),j.universityId&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:j.universityId})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:i,disabled:d,children:"Cancel"}),(0,t.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:d||y,children:d?"Updating...":y?"✅ Updated Successfully!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Edit,{className:"mr-2 h-4 w-4"}),"Update Small Group"]})})]})]})})]})]})})}):null}var w=e.i(75117),S=e.i(69035),I=e.i(11522);function C(){let[e,m]=(0,s.useState)(""),[u,x]=(0,s.useState)([]),[h,p]=(0,s.useState)(!0),[g,f]=(0,s.useState)(null),[v,b]=(0,s.useState)({isOpen:!1,smallGroupId:null,smallGroupName:""}),[C,k]=(0,s.useState)(!1),[T,G]=(0,s.useState)(null),z=async()=>{try{p(!0),f(null);let e=await a.default.get("/api/small-groups");x(e.data)}catch(e){console.error("Error fetching small groups:",e),f("Failed to fetch small groups. Please try again.")}finally{p(!1)}},E=()=>{b({isOpen:!1,smallGroupId:null,smallGroupName:""})},B=async()=>{if(v.smallGroupId){k(!0);try{let e=await a.default.delete("/api/small-groups?id=".concat(v.smallGroupId));200===e.status&&(x(e=>e.filter(e=>e.id!==v.smallGroupId)),E())}catch(e){console.error("Error deleting small group:",e),alert("Failed to delete small group. Please try again.")}finally{k(!1)}}};(0,s.useEffect)(()=>{z()},[]);let M=u.filter(t=>{var s,a,r,l,i;if(!e)return!0;let n=e.toLowerCase();return(null==(s=t.name)?void 0:s.toLowerCase().includes(n))||(null==(r=t.region)||null==(a=r.name)?void 0:a.toLowerCase().includes(n))||(null==(i=t.university)||null==(l=i.name)?void 0:l.toLowerCase().includes(n))});return(0,t.jsxs)(I.SidebarProvider,{children:[(0,t.jsx)(c.AppSidebar,{}),(0,t.jsxs)(I.SidebarInset,{children:[(0,t.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,t.jsx)(I.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)(S.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,t.jsx)(w.Breadcrumb,{children:(0,t.jsxs)(w.BreadcrumbList,{children:[(0,t.jsx)(w.BreadcrumbItem,{className:"hidden md:block",children:(0,t.jsx)(w.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,t.jsx)(w.BreadcrumbSeparator,{className:"hidden md:block"}),(0,t.jsx)(w.BreadcrumbItem,{children:(0,t.jsx)(w.BreadcrumbLink,{href:"/links/organization",children:"Organization"})}),(0,t.jsx)(w.BreadcrumbSeparator,{}),(0,t.jsx)(w.BreadcrumbItem,{children:(0,t.jsx)(w.BreadcrumbPage,{children:"Small Groups"})})]})})]})}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Small Groups Management"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage small groups and their information across the organization"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search small groups...",value:e,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,t.jsxs)("button",{onClick:z,disabled:h,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(l.RefreshCw,{className:"w-4 h-4 ".concat(h?"animate-spin":"")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:h?"Loading...":"Refresh"})]})]}),(0,t.jsx)(j,{onSmallGroupAdded:z,children:(0,t.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Add New Small Group"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Add Small Group"})]})})]}),g&&(0,t.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,t.jsx)("span",{className:"text-sm",children:g})]}),(0,t.jsx)("button",{onClick:z,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[h?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(l.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading small groups..."})]})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[600px]",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"ID"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Small Group Name"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"University"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Region"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-card divide-y divide-border",children:M.map(e=>{var s,a;return(0,t.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium text-foreground",children:e.id}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-foreground",children:e.name}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-muted-foreground",children:null==(s=e.university)?void 0:s.name}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-muted-foreground",children:null==(a=e.region)?void 0:a.name}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("button",{onClick:()=>{G(e)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,t.jsx)(n.Edit,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{b({isOpen:!0,smallGroupId:e.id,smallGroupName:e.name})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,t.jsx)(d.Trash2,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),!h&&0===M.length&&!g&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(o.Users,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No small groups found"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:e?"No small groups match your search criteria.":"No small groups have been added yet."}),!e&&(0,t.jsx)(j,{onSmallGroupAdded:z,children:(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),"Add First Small Group"]})})]}),!h&&M.length>0&&(0,t.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:M.length})," of ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:u.length})," small groups"]})})})]})]})})]}),(0,t.jsx)(y,{isOpen:v.isOpen,onClose:E,onConfirm:B,smallGroupName:v.smallGroupName,isLoading:C}),(0,t.jsx)(N,{smallGroup:T,onSmallGroupUpdated:z,isOpen:null!==T,onClose:()=>{G(null)}})]})}}]);