(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47459,e=>{"use strict";e.s(["default",()=>eg],47459);var t=e.i(43476),r=e.i(71645),s=e.i(81949),n=e.i(55436),a=e.i(16715),i=e.i(7233),l=e.i(88511),o=e.i(27612),d=e.i(12426),c=e.i(84614),m=e.i(60313),u=e.i(71850),x=e.i(9956),h=e.i(86882),p=e.i(1968),b=e.i(89737),g=e.i(81140),j=e.i(20783),f=e.i(30030),N=e.i(48425),v=e.i(42727),y=e.i(69340),w=e.i(86318),S=e.i(35804),C=e.i(99682),I=e.i(96626),k="Radio",[P,T]=(0,f.createContextScope)(k),[E,L]=P(k),F=r.forwardRef((e,s)=>{let{__scopeRadio:n,name:a,checked:i=!1,required:l,disabled:o,value:d="on",onCheck:c,form:m,...u}=e,[x,h]=r.useState(null),p=(0,j.useComposedRefs)(s,e=>h(e)),b=r.useRef(!1),f=!x||m||!!x.closest("form");return(0,t.jsxs)(E,{scope:n,checked:i,disabled:o,children:[(0,t.jsx)(N.Primitive.button,{type:"button",role:"radio","aria-checked":i,"data-state":M(i),"data-disabled":o?"":void 0,disabled:o,value:d,...u,ref:p,onClick:(0,g.composeEventHandlers)(e.onClick,e=>{i||null==c||c(),f&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),f&&(0,t.jsx)(D,{control:x,bubbles:!b.current,name:a,value:d,checked:i,required:l,disabled:o,form:m,style:{transform:"translateX(-100%)"}})]})});F.displayName=k;var R="RadioIndicator",A=r.forwardRef((e,r)=>{let{__scopeRadio:s,forceMount:n,...a}=e,i=L(R,s);return(0,t.jsx)(I.Presence,{present:n||i.checked,children:(0,t.jsx)(N.Primitive.span,{"data-state":M(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})})});A.displayName=R;var D=r.forwardRef((e,s)=>{let{__scopeRadio:n,control:a,checked:i,bubbles:l=!0,...o}=e,d=r.useRef(null),c=(0,j.useComposedRefs)(d,s),m=(0,C.usePrevious)(i),u=(0,S.useSize)(a);return r.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==i&&t){let r=new Event("click",{bubbles:l});t.call(e,i),e.dispatchEvent(r)}},[m,i,l]),(0,t.jsx)(N.Primitive.input,{type:"radio","aria-hidden":!0,defaultChecked:i,...o,tabIndex:-1,ref:c,style:{...o.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function M(e){return e?"checked":"unchecked"}D.displayName="RadioBubbleInput";var B=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],V="RadioGroup",[O,q]=(0,f.createContextScope)(V,[v.createRovingFocusGroupScope,T]),U=(0,v.createRovingFocusGroupScope)(),W=T(),[H,_]=O(V),G=r.forwardRef((e,r)=>{let{__scopeRadioGroup:s,name:n,defaultValue:a,value:i,required:l=!1,disabled:o=!1,orientation:d,dir:c,loop:m=!0,onValueChange:u,...x}=e,h=U(s),p=(0,w.useDirection)(c),[b,g]=(0,y.useControllableState)({prop:i,defaultProp:null!=a?a:null,onChange:u,caller:V});return(0,t.jsx)(H,{scope:s,name:n,required:l,disabled:o,value:b,onValueChange:g,children:(0,t.jsx)(v.Root,{asChild:!0,...h,orientation:d,dir:p,loop:m,children:(0,t.jsx)(N.Primitive.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":o?"":void 0,dir:p,...x,ref:r})})})});G.displayName=V;var z="RadioGroupItem",K=r.forwardRef((e,s)=>{let{__scopeRadioGroup:n,disabled:a,...i}=e,l=_(z,n),o=l.disabled||a,d=U(n),c=W(n),m=r.useRef(null),u=(0,j.useComposedRefs)(s,m),x=l.value===i.value,h=r.useRef(!1);return r.useEffect(()=>{let e=e=>{B.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,t.jsx)(v.Item,{asChild:!0,...d,focusable:!o,active:x,children:(0,t.jsx)(F,{disabled:o,required:l.required,checked:x,...c,...i,name:l.name,ref:u,onCheck:()=>l.onValueChange(i.value),onKeyDown:(0,g.composeEventHandlers)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,g.composeEventHandlers)(i.onFocus,()=>{var e;h.current&&(null==(e=m.current)||e.click())})})})});K.displayName=z;var J=r.forwardRef((e,r)=>{let{__scopeRadioGroup:s,...n}=e,a=W(s);return(0,t.jsx)(A,{...a,...n,ref:r})});J.displayName="RadioGroupIndicator";var X=e.i(60434),X=X,Y=e.i(47163);let Z=r.forwardRef((e,r)=>{let{className:s,...n}=e;return(0,t.jsx)(G,{className:(0,Y.cn)("grid gap-2",s),...n,ref:r})});Z.displayName=G.displayName;let Q=r.forwardRef((e,r)=>{let{className:s,...n}=e;return(0,t.jsx)(K,{ref:r,className:(0,Y.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...n,children:(0,t.jsx)(J,{className:"flex items-center justify-center",children:(0,t.jsx)(X.default,{className:"h-2.5 w-2.5 fill-current text-current"})})})});Q.displayName=K.displayName;var $=e.i(53300),ee=e.i(75254);(0,ee.default)("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);let et=(0,ee.default)("receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);var er=e.i(63059);let es=(0,ee.default)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var en=e.i(78745),en=en;function ea(e){let{children:s,onContributionAdded:n}=e,[a,l]=r.useState(!1),[o,d]=r.useState(!1),[c,m]=r.useState({}),[g,j]=r.useState(!1),[f,N]=r.useState(1),[v,y]=r.useState([]),[w,S]=r.useState([]),[C,I]=r.useState([]),[k,P]=r.useState({userType:"external",contributor:{name:"",email:"",phone:"",memberId:""},amount:"",method:"mobile_money",designationId:"",paymentMethod:"",paymentProvider:"",currency:"RWF"});r.useEffect(()=>{a&&(T(),E(),L())},[a]);let T=async()=>{try{let e=await fetch("/api/members"),t=await e.json();y(t.members||[])}catch(e){console.error("Error fetching members:",e)}},E=async()=>{try{let e=await fetch("/api/designations"),t=await e.json();S(t)}catch(e){console.error("Error fetching designations:",e)}},L=async()=>{try{let e=await fetch("/api/payment-providers"),t=await e.json();I(t)}catch(e){console.error("Error fetching payment providers:",e)}},F=(e,t)=>{if(e.includes(".")){let[r,s]=e.split(".");P(e=>({...e,[r]:{...e[r],[s]:t}}))}else P(r=>({...r,[e]:t}));c[e]&&m(t=>({...t,[e]:""})),g&&j(!1)},R=e=>{let t={};return 1===e?k.userType||(t.userType="Please select user type"):2===e?(k.contributor.name.trim()||(t["contributor.name"]="Name is required"),"internal"!==k.userType||k.contributor.memberId||(t["contributor.memberId"]="Please select a member for internal user"),"external"!==k.userType||k.contributor.email||(t["contributor.email"]="Email is required for external users")):3===e?((!k.amount||isNaN(Number(k.amount))||0>=Number(k.amount))&&(t.amount="Valid amount is required"),k.method||(t.method="Payment method is required")):4!==e||k.paymentProvider||(t.paymentProvider="Payment provider is required"),m(t),0===Object.keys(t).length},A=async e=>{if(e.preventDefault(),R(f)){d(!0);try{let e=await fetch("/api/contributions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userType:k.userType,contributor:{name:k.contributor.name,email:k.contributor.email||null,phone:k.contributor.phone||null,memberId:k.contributor.memberId?Number(k.contributor.memberId):null},amount:Number(k.amount),method:k.method,designationId:k.designationId?Number(k.designationId):null,status:"pending",paymentMethod:k.paymentMethod,paymentProvider:k.paymentProvider?Number(k.paymentProvider):null,currency:k.currency})}),t=await e.json();e.ok?(j(!0),m({}),P({userType:"external",contributor:{name:"",email:"",phone:"",memberId:""},amount:"",method:"mobile_money",designationId:"",paymentMethod:"",paymentProvider:"",currency:"RWF"}),N(1),n&&n(),setTimeout(()=>{l(!1),j(!1)},1500)):(console.error("API Error:",t),m({general:t.error||"Failed to create contribution"}))}catch(e){console.error("Error creating contribution:",e),m({general:"An unexpected error occurred"})}finally{d(!1)}}};return(0,t.jsxs)($.Sheet,{open:a,onOpenChange:l,children:[(0,t.jsx)($.SheetTrigger,{asChild:!0,children:s}),(0,t.jsx)($.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-4xl py-8",children:[(0,t.jsxs)($.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)($.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(i.Plus,{className:"h-6 w-6 text-primary"})}),"Add New Contribution"]}),(0,t.jsx)($.SheetDescription,{className:"text-lg text-muted-foreground",children:"Process a new contribution through our multi-step form."})]}),(0,t.jsxs)(x.Card,{className:"shadow-lg",children:[(0,t.jsxs)(x.CardHeader,{className:"pb-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Contribution Process"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Complete all steps to process the contribution"})]}),(0,t.jsx)("div",{className:"flex items-center justify-center mt-6",children:Array.from({length:4},(e,t)=>t+1).map(e=>(0,t.jsxs)(r.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium ".concat(e<=f?"bg-primary text-primary-foreground":"bg-muted text-muted-foreground"),children:e<f?(0,t.jsx)(en.default,{className:"h-4 w-4"}):e}),(0,t.jsx)("div",{className:"ml-2 text-sm font-medium",children:(e=>{switch(e){case 1:return"User Type";case 2:return"Contributor Information";case 3:return"Contribution Details";case 4:return"Payment Provider";default:return""}})(e)})]}),e<4&&(0,t.jsx)("div",{className:"flex-1 h-px bg-border mx-4 min-w-[50px]"})]},e))})]}),(0,t.jsx)(x.CardContent,{children:(0,t.jsxs)("form",{onSubmit:A,className:"flex flex-col gap-6",children:[c.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:c.general}),1===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Select User Type"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose whether this is an internal or external contributor"})]}),(0,t.jsxs)(Z,{value:k.userType,onValueChange:e=>F("userType",e),className:"flex flex-col gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,t.jsx)(Q,{value:"internal",id:"internal"}),(0,t.jsxs)(p.Label,{htmlFor:"internal",className:"flex-1 cursor-pointer",children:[(0,t.jsx)("div",{className:"font-medium",children:"Internal User"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"Existing member making a contribution"})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 p-4 border rounded-lg hover:bg-muted/50",children:[(0,t.jsx)(Q,{value:"external",id:"external"}),(0,t.jsxs)(p.Label,{htmlFor:"external",className:"flex-1 cursor-pointer",children:[(0,t.jsx)("div",{className:"font-medium",children:"External User"}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"New contributor not in our system"})]})]})]}),c.userType&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c.userType})]}),2===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Contributor Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"internal"===k.userType?"Select an existing member":"Enter contributor details"})]}),"internal"===k.userType?(0,t.jsx)("div",{className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"memberId",className:"text-sm font-medium",children:"Select Member *"}),(0,t.jsxs)(b.Select,{value:k.contributor.memberId,onValueChange:e=>F("contributor.memberId",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select a member"})}),(0,t.jsx)(b.SelectContent,{children:v.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.firstname," ",e.secondname," ",e.email&&"(".concat(e.email,")")]},e.id))})]}),c["contributor.memberId"]&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c["contributor.memberId"]})]})}):(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"name",className:"text-sm font-medium",children:"Full Name *"}),(0,t.jsx)(h.Input,{id:"name",placeholder:"Enter contributor name",className:"h-11",value:k.contributor.name,onChange:e=>F("contributor.name",e.target.value),required:!0}),c["contributor.name"]&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c["contributor.name"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"email",className:"text-sm font-medium",children:"Email Address *"}),(0,t.jsx)(h.Input,{id:"email",type:"email",placeholder:"Enter email address",className:"h-11",value:k.contributor.email,onChange:e=>F("contributor.email",e.target.value),required:!0}),c["contributor.email"]&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c["contributor.email"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"phone",className:"text-sm font-medium",children:"Phone Number"}),(0,t.jsx)(h.Input,{id:"phone",placeholder:"Enter phone number",className:"h-11",value:k.contributor.phone,onChange:e=>F("contributor.phone",e.target.value)})]})]})]}),3===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Contribution Details"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Enter the contribution amount and designation"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"amount",className:"text-sm font-medium",children:"Contribution Amount (RWF) *"}),(0,t.jsx)(h.Input,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:k.amount,onChange:e=>F("amount",e.target.value),required:!0}),c.amount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c.amount})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"method",className:"text-sm font-medium",children:"Payment Method *"}),(0,t.jsxs)(b.Select,{value:k.method,onValueChange:e=>F("method",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select payment method"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,t.jsx)(b.SelectItem,{value:"bank_transfer",children:"Bank Transfer"}),(0,t.jsx)(b.SelectItem,{value:"card",children:"Card Payment"}),(0,t.jsx)(b.SelectItem,{value:"worldremit",children:"WorldRemit"})]})]}),c.method&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c.method})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"designationId",className:"text-sm font-medium",children:"Designation (Optional)"}),(0,t.jsxs)(b.Select,{value:k.designationId,onValueChange:e=>F("designationId",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select a designation (optional)"})}),(0,t.jsx)(b.SelectContent,{children:w.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.name," ",e.targetAmount&&"(Target: ".concat(e.targetAmount.toLocaleString()," RWF)")]},e.id))})]})]})]})]}),4===f&&(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold mb-2",children:"Payment Provider"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Select the payment provider for processing"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"paymentProvider",className:"text-sm font-medium",children:"Payment Provider *"}),(0,t.jsxs)(b.Select,{value:k.paymentProvider,onValueChange:e=>F("paymentProvider",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select payment provider"})}),(0,t.jsx)(b.SelectContent,{children:C.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.name," (",e.provider,")"]},e.id))})]}),c.paymentProvider&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:c.paymentProvider})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"currency",className:"text-sm font-medium",children:"Currency"}),(0,t.jsx)(h.Input,{id:"currency",value:k.currency,onChange:e=>F("currency",e.target.value),className:"h-11",disabled:!0})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[f>1&&(0,t.jsxs)(u.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>{N(e=>Math.max(e-1,1))},disabled:o,children:[(0,t.jsx)(es,{className:"mr-2 h-4 w-4"}),"Previous"]}),f<4?(0,t.jsxs)(u.Button,{type:"button",className:"flex-1 h-11",onClick:()=>{R(f)&&N(e=>Math.min(e+1,4))},disabled:o,children:["Next",(0,t.jsx)(er.ChevronRight,{className:"ml-2 h-4 w-4"})]}):(0,t.jsx)(u.Button,{type:"submit",className:"flex-1 h-11",disabled:o||g,children:o?"Processing...":g?"✅ Contribution Created!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(et,{className:"mr-2 h-4 w-4"}),"Create Contribution"]})}),(0,t.jsx)(u.Button,{type:"button",variant:"outline",className:"h-11",onClick:()=>l(!1),disabled:o,children:"Cancel"})]})]})})]})]})})]})}var ei=e.i(78894),el=e.i(37727);function eo(e){let{isOpen:s,onClose:n,onConfirm:a,contributionAmount:i,contributorName:l,isLoading:c=!1}=e,[m,h]=r.useState(!1),p=async()=>{h(!0);try{await a()}finally{h(!1)}};return(0,t.jsx)($.Sheet,{open:s,onOpenChange:n,children:(0,t.jsx)($.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-md py-8",children:[(0,t.jsxs)($.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)($.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl text-destructive",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:(0,t.jsx)(ei.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),"Delete Contribution"]}),(0,t.jsx)($.SheetDescription,{className:"text-lg text-muted-foreground",children:"This action cannot be undone. This will permanently delete the contribution record."})]}),(0,t.jsxs)(x.Card,{className:"shadow-lg border-destructive/20",children:[(0,t.jsx)(x.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Confirm Deletion"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to delete this contribution?"})]})}),(0,t.jsx)(x.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"p-4 bg-muted/50 border border-border rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)(d.DollarSign,{className:"h-5 w-5 text-muted-foreground"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:l}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Amount: ",i.toLocaleString()," RWF"]})]})]})}),(0,t.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(ei.AlertTriangle,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:"Warning: This action cannot be undone"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete the contribution from ",(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:['"',l,'"']})," for ",(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:[i.toLocaleString()," RWF"]}),"."]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This contribution will be permanently removed from the system. Any associated receipts and payment records will also be deleted."})]})]})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(u.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:n,disabled:m||c,children:[(0,t.jsx)(el.X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,t.jsx)(u.Button,{type:"button",variant:"destructive",className:"flex-1 h-11",onClick:p,disabled:m||c,children:m||c?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Contribution"]})})]})]})})]})]})})})}function ed(e){let{contribution:s,isOpen:n,onClose:a,onContributionUpdated:i}=e,[o,m]=r.useState(!1),[g,j]=r.useState({}),[f,N]=r.useState(!1),[v,y]=r.useState([]),[w,S]=r.useState([]),[C,I]=r.useState([]),[k,P]=r.useState({amount:"",method:"mobile_money",designationId:"",status:"pending",contributor:{name:"",email:"",phone:"",memberId:""}});r.useEffect(()=>{if(s){var e,t;P({amount:s.amount.toString(),method:s.method,designationId:(null==(e=s.contributiondesignation)?void 0:e.id.toString())||"",status:s.status,contributor:{name:s.contributor.name,email:s.contributor.email||"",phone:s.contributor.phone||"",memberId:(null==(t=s.contributor.memberId)?void 0:t.toString())||""}})}},[s]),r.useEffect(()=>{n&&(T(),E(),L())},[n]);let T=async()=>{try{let e=await fetch("/api/members"),t=await e.json();y(t.members||[])}catch(e){console.error("Error fetching members:",e)}},E=async()=>{try{let e=await fetch("/api/designations"),t=await e.json();S(t)}catch(e){console.error("Error fetching designations:",e)}},L=async()=>{try{let e=await fetch("/api/payment-providers"),t=await e.json();I(t)}catch(e){console.error("Error fetching payment providers:",e)}},F=(e,t)=>{if(e.includes(".")){let[r,s]=e.split(".");P(e=>({...e,[r]:{...e[r],[s]:t}}))}else P(r=>({...r,[e]:t}));g[e]&&j(t=>({...t,[e]:""})),f&&N(!1)},R=async e=>{if((e.preventDefault(),s)&&(()=>{let e={};return(!k.amount||isNaN(Number(k.amount))||0>=Number(k.amount))&&(e.amount="Valid amount is required"),k.method||(e.method="Payment method is required"),k.status||(e.status="Status is required"),k.contributor.name.trim()||(e["contributor.name"]="Contributor name is required"),j(e),0===Object.keys(e).length})()){m(!0);try{let e=await fetch("/api/contributions/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({contributor:{id:s.contributor.id,name:k.contributor.name,email:k.contributor.email||null,phone:k.contributor.phone||null,memberId:k.contributor.memberId?Number(k.contributor.memberId):null},amount:Number(k.amount),method:k.method,designationId:k.designationId?Number(k.designationId):null,status:k.status})}),t=await e.json();e.ok?(N(!0),j({}),i&&i(),setTimeout(()=>{a(),N(!1)},1500)):(console.error("API Error:",t),j({general:t.error||"Failed to update contribution"}))}catch(e){console.error("Error updating contribution:",e),j({general:"An unexpected error occurred"})}finally{m(!1)}}};return s?(0,t.jsx)($.Sheet,{open:n,onOpenChange:a,children:(0,t.jsx)($.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,t.jsxs)($.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)($.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(l.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Contribution"]}),(0,t.jsx)($.SheetDescription,{className:"text-lg text-muted-foreground",children:"Update the contribution information below."})]}),(0,t.jsxs)(x.Card,{className:"shadow-lg",children:[(0,t.jsx)(x.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Contribution Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below to modify this contribution"})]})}),(0,t.jsx)(x.CardContent,{children:(0,t.jsxs)("form",{onSubmit:R,className:"flex flex-col gap-6",children:[g.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:g.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contribution Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"amount",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(d.DollarSign,{className:"h-4 w-4"}),"Amount (RWF) *"]}),(0,t.jsx)(h.Input,{id:"amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:k.amount,onChange:e=>F("amount",e.target.value),required:!0}),g.amount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:g.amount})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"method",className:"text-sm font-medium",children:"Payment Method *"}),(0,t.jsxs)(b.Select,{value:k.method,onValueChange:e=>F("method",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select payment method"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"mobile_money",children:"Mobile Money"}),(0,t.jsx)(b.SelectItem,{value:"bank_transfer",children:"Bank Transfer"}),(0,t.jsx)(b.SelectItem,{value:"card",children:"Card Payment"}),(0,t.jsx)(b.SelectItem,{value:"worldremit",children:"WorldRemit"})]})]}),g.method&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:g.method})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"designationId",className:"text-sm font-medium",children:"Designation (Optional)"}),(0,t.jsxs)(b.Select,{value:k.designationId,onValueChange:e=>F("designationId",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select a designation (optional)"})}),(0,t.jsx)(b.SelectContent,{children:w.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.name," ",e.targetAmount&&"(Target: ".concat(e.targetAmount.toLocaleString()," RWF)")]},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"status",className:"text-sm font-medium",children:"Status *"}),(0,t.jsxs)(b.Select,{value:k.status,onValueChange:e=>F("status",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select status"})}),(0,t.jsxs)(b.SelectContent,{children:[(0,t.jsx)(b.SelectItem,{value:"pending",children:"Pending"}),(0,t.jsx)(b.SelectItem,{value:"completed",children:"Completed"}),(0,t.jsx)(b.SelectItem,{value:"failed",children:"Failed"}),(0,t.jsx)(b.SelectItem,{value:"refunded",children:"Refunded"}),(0,t.jsx)(b.SelectItem,{value:"processing",children:"Processing"}),(0,t.jsx)(b.SelectItem,{value:"cancelled",children:"Cancelled"})]})]}),g.status&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:g.status})]})]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Contributor Information"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(p.Label,{htmlFor:"contributorName",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(c.User,{className:"h-4 w-4"}),"Contributor Name *"]}),(0,t.jsx)(h.Input,{id:"contributorName",placeholder:"Enter contributor name",className:"h-11",value:k.contributor.name,onChange:e=>F("contributor.name",e.target.value),required:!0}),g["contributor.name"]&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:g["contributor.name"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"contributorEmail",className:"text-sm font-medium",children:"Email Address"}),(0,t.jsx)(h.Input,{id:"contributorEmail",type:"email",placeholder:"Enter email address",className:"h-11",value:k.contributor.email,onChange:e=>F("contributor.email",e.target.value)})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"contributorPhone",className:"text-sm font-medium",children:"Phone Number"}),(0,t.jsx)(h.Input,{id:"contributorPhone",placeholder:"Enter phone number",className:"h-11",value:k.contributor.phone,onChange:e=>F("contributor.phone",e.target.value)})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(p.Label,{htmlFor:"memberId",className:"text-sm font-medium",children:"Associated Member (Optional)"}),(0,t.jsxs)(b.Select,{value:k.contributor.memberId,onValueChange:e=>F("contributor.memberId",e),children:[(0,t.jsx)(b.SelectTrigger,{className:"h-11",children:(0,t.jsx)(b.SelectValue,{placeholder:"Select a member (optional)"})}),(0,t.jsx)(b.SelectContent,{children:v.map(e=>(0,t.jsxs)(b.SelectItem,{value:e.id.toString(),children:[e.firstname," ",e.secondname," ",e.email&&"(".concat(e.email,")")]},e.id))})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,t.jsx)(u.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:a,disabled:o,children:"Cancel"}),(0,t.jsx)(u.Button,{type:"submit",className:"flex-1 h-11",disabled:o||f,children:o?"Updating...":f?"✅ Updated Successfully!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Edit,{className:"mr-2 h-4 w-4"}),"Update Contribution"]})})]})]})})]})]})})}):null}var ec=e.i(75117),em=e.i(69035),eu=e.i(11522);let ex={mobile_money:"Mobile Money",bank_transfer:"Bank Transfer",card:"Card Payment",worldremit:"WorldRemit"},eh={pending:"Pending",completed:"Completed",failed:"Failed",refunded:"Refunded",processing:"Processing",cancelled:"Cancelled"},ep={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20 dark:text-yellow-400",completed:"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400",failed:"bg-red-100 text-red-800 dark:bg-red-900/20 dark:text-red-400",refunded:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 dark:text-blue-400",processing:"bg-purple-100 text-purple-800 dark:bg-purple-900/20 dark:text-purple-400",cancelled:"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"},eb={mobile_money:"bg-blue-100 text-blue-800",bank_transfer:"bg-green-100 text-green-800",card:"bg-purple-100 text-purple-800",worldremit:"bg-orange-100 text-orange-800"};function eg(){let[e,u]=(0,r.useState)(""),[x,h]=(0,r.useState)([]),[p,b]=(0,r.useState)(!0),[g,j]=(0,r.useState)(null),[f,N]=(0,r.useState)({isOpen:!1,contributionId:null,contributorName:"",contributionAmount:0}),[v,y]=(0,r.useState)(!1),[w,S]=(0,r.useState)(null),C=async()=>{try{b(!0),j(null);let e=await s.default.get("/api/contributions");h(e.data)}catch(e){console.error("Error fetching contributions:",e),j("Failed to fetch contributions. Please try again.")}finally{b(!1)}},I=()=>{N({isOpen:!1,contributionId:null,contributorName:"",contributionAmount:0})},k=async()=>{if(f.contributionId){y(!0);try{let e=await s.default.delete("/api/contributions/".concat(f.contributionId));200===e.status&&(h(e=>e.filter(e=>e.id!==f.contributionId)),I())}catch(e){console.error("Error deleting contribution:",e),alert("Failed to delete contribution. Please try again.")}finally{y(!1)}}};(0,r.useEffect)(()=>{C()},[]);let P=x.filter(t=>{var r,s,n,a,i,l,o,d,c,m,u,x,h,p,b,g,j,f,N;if(!e)return!0;let v=e.toLowerCase();return(null==(r=t.contributor.name)?void 0:r.toLowerCase().includes(v))||(null==(s=t.contributor.email)?void 0:s.toLowerCase().includes(v))||(null==(n=t.contributor.phone)?void 0:n.includes(e))||(null==(i=t.contributiondesignation)||null==(a=i.name)?void 0:a.toLowerCase().includes(v))||(null==(o=t.member)||null==(l=o.firstname)?void 0:l.toLowerCase().includes(v))||(null==(c=t.member)||null==(d=c.secondname)?void 0:d.toLowerCase().includes(v))||(null==(u=t.member)||null==(m=u.email)?void 0:m.toLowerCase().includes(v))||(null==(x=t.transactionId)?void 0:x.toLowerCase().includes(v))||(null==(p=t.paymenttransaction)||null==(h=p.externalId)?void 0:h.toLowerCase().includes(v))||(null==(j=t.paymenttransaction)||null==(g=j.paymentgateway)||null==(b=g.name)?void 0:b.toLowerCase().includes(v))||(null==(f=ex[t.method])?void 0:f.toLowerCase().includes(v))||(null==(N=eh[t.status])?void 0:N.toLowerCase().includes(v))});return(0,t.jsxs)(eu.SidebarProvider,{children:[(0,t.jsx)(m.AppSidebar,{}),(0,t.jsxs)(eu.SidebarInset,{children:[(0,t.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,t.jsx)(eu.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)(em.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,t.jsx)(ec.Breadcrumb,{children:(0,t.jsxs)(ec.BreadcrumbList,{children:[(0,t.jsx)(ec.BreadcrumbItem,{className:"hidden md:block",children:(0,t.jsx)(ec.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,t.jsx)(ec.BreadcrumbSeparator,{className:"hidden md:block"}),(0,t.jsx)(ec.BreadcrumbItem,{children:(0,t.jsx)(ec.BreadcrumbLink,{href:"/links/financial",children:"Financial Management"})}),(0,t.jsx)(ec.BreadcrumbSeparator,{}),(0,t.jsx)(ec.BreadcrumbItem,{children:(0,t.jsx)(ec.BreadcrumbPage,{children:"Contributions"})})]})})]})}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Contributions Management"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage financial contributions and their processing across the organization"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(n.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search contributions...",value:e,onChange:e=>u(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,t.jsxs)("button",{onClick:C,disabled:p,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(a.RefreshCw,{className:"w-4 h-4 ".concat(p?"animate-spin":"")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:p?"Loading...":"Refresh"})]})]}),(0,t.jsx)(ea,{onContributionAdded:C,children:(0,t.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Add New Contribution"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Add Contribution"})]})})]}),g&&(0,t.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,t.jsx)("span",{className:"text-sm",children:g})]}),(0,t.jsx)("button",{onClick:C,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[p?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(a.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading contributions..."})]})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Contributor"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amount & Method"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Designation"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-card divide-y divide-border",children:P.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("div",{className:"flex-shrink-0 h-8 w-8 sm:h-10 sm:w-10",children:(0,t.jsx)("div",{className:"h-8 w-8 sm:h-10 sm:w-10 rounded-full bg-muted flex items-center justify-center",children:(0,t.jsx)(c.User,{className:"h-4 w-4 text-muted-foreground"})})}),(0,t.jsxs)("div",{className:"ml-2 sm:ml-4 min-w-0 flex-1",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-foreground truncate",children:e.contributor.name}),(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground flex items-center gap-1 truncate",children:[e.contributor.email&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:e.contributor.email}),(0,t.jsx)("span",{children:"•"})]}),(0,t.jsx)("span",{children:e.contributor.phone})]}),e.member&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Member: ",e.member.firstname," ",e.member.secondname]})]})]})}),(0,t.jsxs)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:[(0,t.jsxs)("div",{className:"text-sm font-medium text-foreground flex items-center gap-1",children:[(0,t.jsx)(d.DollarSign,{className:"w-3 h-3"}),(0,t.jsxs)("span",{children:[e.amount.toLocaleString()," RWF"]})]}),(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:ex[e.method]}),(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 whitespace-nowrap",children:e.contributiondesignation?(0,t.jsxs)("div",{className:"text-sm text-foreground",children:[(0,t.jsx)("div",{className:"font-medium",children:e.contributiondesignation.name}),e.contributiondesignation.targetAmount&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Target: ",e.contributiondesignation.targetAmount.toLocaleString()," RWF"]})]}):(0,t.jsx)("div",{className:"text-sm text-muted-foreground",children:"No designation"})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4",children:(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(ep[e.status]),children:eh[e.status]}),(0,t.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full w-fit ".concat(eb[e.method]),children:ex[e.method]})]})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("button",{onClick:()=>{S(e)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,t.jsx)(l.Edit,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void N({isOpen:!0,contributionId:t,contributorName:e.contributor.name,contributionAmount:e.amount})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,t.jsx)(o.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]})}),!p&&0===P.length&&!g&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(d.DollarSign,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No contributions found"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:e?"No contributions match your search criteria.":"No contributions have been recorded yet."}),!e&&(0,t.jsx)(ea,{onContributionAdded:C,children:(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),"Add First Contribution"]})})]}),!p&&P.length>0&&(0,t.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:P.length})," contributions"]})})})]})]})})]}),(0,t.jsx)(eo,{isOpen:f.isOpen,onClose:I,onConfirm:k,contributorName:f.contributorName,contributionAmount:f.contributionAmount,isLoading:v}),(0,t.jsx)(ed,{contribution:w,onContributionUpdated:C,isOpen:null!==w,onClose:()=>{S(null)}})]})}}]);