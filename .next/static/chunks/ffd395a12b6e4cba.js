(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,49720,e=>{"use strict";e.s(["default",()=>E],49720);var t=e.i(43476),s=e.i(71645),n=e.i(81949),r=e.i(55436),a=e.i(16715),i=e.i(7233),l=e.i(88511),d=e.i(27612),o=e.i(20278),c=e.i(60313),m=e.i(71850),u=e.i(9956),x=e.i(86882),h=e.i(1968),g=e.i(89737),p=e.i(22560),j=e.i(53300),f=e.i(46897),N=e.i(7486),v=e.i(61911),b=e.i(12426),y=e.i(78583);function S(e){let{children:n,onDesignationAdded:r}=e,[a,l]=s.useState(!1),[d,c]=s.useState(!1),[S,A]=s.useState({}),[w,I]=s.useState(!1),[C,D]=s.useState([]),[T,k]=s.useState([]),[E,L]=s.useState([]),[O,F]=s.useState({name:"",description:"",targetAmount:"",currentAmount:"",regionId:"",universityId:"",smallGroupId:"",isActive:!0});s.useEffect(()=>{a&&G()},[a]),s.useEffect(()=>{O.regionId?B(Number(O.regionId)):(k([]),F(e=>({...e,universityId:"",smallGroupId:""})))},[O.regionId]),s.useEffect(()=>{O.universityId?P(Number(O.universityId)):(L([]),F(e=>({...e,smallGroupId:""})))},[O.universityId]);let G=async()=>{try{let e=await fetch("/api/regions"),t=await e.json();D(t)}catch(e){console.error("Error fetching regions:",e)}},B=async e=>{try{let t=await fetch("/api/universities?regionId=".concat(e)),s=await t.json();k(s)}catch(e){console.error("Error fetching universities:",e)}},P=async e=>{try{let t=await fetch("/api/small-groups?universityId=".concat(e)),s=await t.json();L(s)}catch(e){console.error("Error fetching small groups:",e)}},U=(e,t)=>{F(s=>({...s,[e]:t})),S[e]&&A(t=>({...t,[e]:""})),w&&I(!1)},V=async e=>{if(e.preventDefault(),(()=>{let e={};return O.name.trim()||(e.name="Designation name is required"),O.targetAmount&&isNaN(Number(O.targetAmount))&&(e.targetAmount="Target amount must be a valid number"),O.currentAmount&&isNaN(Number(O.currentAmount))&&(e.currentAmount="Current amount must be a valid number"),0>Number(O.targetAmount)&&(e.targetAmount="Target amount must be non-negative"),0>Number(O.currentAmount)&&(e.currentAmount="Current amount must be non-negative"),A(e),0===Object.keys(e).length})()){c(!0);try{let e=await fetch("/api/designations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O.name,description:O.description||null,targetAmount:O.targetAmount?Number(O.targetAmount):null,currentAmount:O.currentAmount?Number(O.currentAmount):0,regionId:O.regionId?Number(O.regionId):null,universityId:O.universityId?Number(O.universityId):null,smallGroupId:O.smallGroupId?Number(O.smallGroupId):null,isActive:O.isActive})}),t=await e.json();e.ok?(I(!0),A({}),F({name:"",description:"",targetAmount:"",currentAmount:"",regionId:"",universityId:"",smallGroupId:"",isActive:!0}),r&&r(),setTimeout(()=>{l(!1),I(!1)},1500)):(console.error("API Error:",t),A({general:t.error||"Failed to create designation"}))}catch(e){console.error("Error creating designation:",e),A({general:"An unexpected error occurred"})}finally{c(!1)}}};return(0,t.jsxs)(j.Sheet,{open:a,onOpenChange:l,children:[(0,t.jsx)(j.SheetTrigger,{asChild:!0,children:n}),(0,t.jsx)(j.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,t.jsxs)(j.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)(j.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(i.Plus,{className:"h-6 w-6 text-primary"})}),"Add New Designation"]}),(0,t.jsx)(j.SheetDescription,{className:"text-lg text-muted-foreground",children:"Add a new contribution designation to your organization."})]}),(0,t.jsxs)(u.Card,{className:"shadow-lg",children:[(0,t.jsx)(u.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Designation Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Fill in the details below to add a new designation"})]})}),(0,t.jsx)(u.CardContent,{children:(0,t.jsxs)("form",{onSubmit:V,className:"flex flex-col gap-6",children:[S.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:S.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Designation Details"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(o.Target,{className:"h-4 w-4"}),"Designation Name *"]}),(0,t.jsx)(x.Input,{id:"name",placeholder:"Enter designation name",className:"h-11",value:O.name,onChange:e=>U("name",e.target.value),required:!0}),S.name&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"description",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(y.FileText,{className:"h-4 w-4"}),"Description (Optional)"]}),(0,t.jsx)(x.Input,{id:"description",placeholder:"Enter designation description",className:"h-11",value:O.description,onChange:e=>U("description",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"targetAmount",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(b.DollarSign,{className:"h-4 w-4"}),"Target Amount (Optional)"]}),(0,t.jsx)(x.Input,{id:"targetAmount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:O.targetAmount,onChange:e=>U("targetAmount",e.target.value)}),S.targetAmount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.targetAmount})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"currentAmount",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(b.DollarSign,{className:"h-4 w-4"}),"Current Amount (Optional)"]}),(0,t.jsx)(x.Input,{id:"currentAmount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:O.currentAmount,onChange:e=>U("currentAmount",e.target.value)}),S.currentAmount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.currentAmount})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(f.MapPin,{className:"h-4 w-4"}),"Region (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.regionId,onValueChange:e=>U("regionId",e),children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:"Select a region (optional)"})}),(0,t.jsx)(g.SelectContent,{children:C.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(N.Building2,{className:"h-4 w-4"}),"University (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.universityId,onValueChange:e=>U("universityId",e),disabled:!O.regionId,children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:O.regionId?"Select a university (optional)":"Select a region first"})}),(0,t.jsx)(g.SelectContent,{children:T.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(v.Users,{className:"h-4 w-4"}),"Small Group (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.smallGroupId,onValueChange:e=>U("smallGroupId",e),disabled:!O.universityId,children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:O.universityId?"Select a small group (optional)":"Select a university first"})}),(0,t.jsx)(g.SelectContent,{children:E.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"isActive",checked:O.isActive,onCheckedChange:e=>U("isActive",e)}),(0,t.jsx)(h.Label,{htmlFor:"isActive",className:"text-sm font-medium",children:"Designation is active"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:()=>l(!1),disabled:d,children:"Cancel"}),(0,t.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:d||w,children:d?"Creating...":w?"âœ… Created Successfully!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.Plus,{className:"mr-2 h-4 w-4"}),"Add Designation"]})})]})]})})]})]})})]})}var A=e.i(78894),w=e.i(37727);function I(e){let{isOpen:n,onClose:r,onConfirm:a,designationName:i,isLoading:l=!1}=e,[o,c]=s.useState(!1),x=async()=>{c(!0);try{await a()}finally{c(!1)}};return(0,t.jsx)(j.Sheet,{open:n,onOpenChange:r,children:(0,t.jsx)(j.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-md py-8",children:[(0,t.jsxs)(j.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)(j.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl text-destructive",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-destructive/10",children:(0,t.jsx)(A.AlertTriangle,{className:"h-6 w-6 text-destructive"})}),"Delete Designation"]}),(0,t.jsx)(j.SheetDescription,{className:"text-lg text-muted-foreground",children:"This action cannot be undone. This will permanently delete the designation."})]}),(0,t.jsxs)(u.Card,{className:"shadow-lg border-destructive/20",children:[(0,t.jsx)(u.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-destructive",children:"Confirm Deletion"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Are you sure you want to delete this designation?"})]})}),(0,t.jsx)(u.CardContent,{children:(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)("div",{className:"p-4 bg-destructive/5 border border-destructive/20 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(A.AlertTriangle,{className:"h-5 w-5 text-destructive mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:"Warning: This action cannot be undone"}),(0,t.jsxs)("p",{className:"text-sm text-muted-foreground",children:["You are about to delete the designation: ",(0,t.jsxs)("span",{className:"font-semibold text-foreground",children:['"',i,'"']})]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"This designation will be permanently removed from the system. If there are any contributions associated with this designation, the deletion will be prevented."})]})]})}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:r,disabled:o||l,children:[(0,t.jsx)(w.X,{className:"mr-2 h-4 w-4"}),"Cancel"]}),(0,t.jsx)(m.Button,{type:"button",variant:"destructive",className:"flex-1 h-11",onClick:x,disabled:o||l,children:o||l?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Deleting..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Trash2,{className:"mr-2 h-4 w-4"}),"Delete Designation"]})})]})]})})]})]})})})}function C(e){let{designation:n,isOpen:r,onClose:a,onDesignationUpdated:i}=e,[d,c]=s.useState(!1),[S,A]=s.useState({}),[w,I]=s.useState(!1),[C,D]=s.useState([]),[T,k]=s.useState([]),[E,L]=s.useState([]),[O,F]=s.useState({name:"",description:"",targetAmount:"",currentAmount:"",regionId:"",universityId:"",smallGroupId:"",isActive:!0});s.useEffect(()=>{if(n){var e,t,s,r,a;F({name:n.name||"",description:n.description||"",targetAmount:(null==(e=n.targetAmount)?void 0:e.toString())||"",currentAmount:(null==(t=n.currentAmount)?void 0:t.toString())||"",regionId:(null==(s=n.regionId)?void 0:s.toString())||"",universityId:(null==(r=n.universityId)?void 0:r.toString())||"",smallGroupId:(null==(a=n.smallGroupId)?void 0:a.toString())||"",isActive:n.isActive})}},[n]),s.useEffect(()=>{r&&G()},[r]),s.useEffect(()=>{O.regionId?B(Number(O.regionId)):(k([]),F(e=>({...e,universityId:"",smallGroupId:""})))},[O.regionId]),s.useEffect(()=>{O.universityId?P(Number(O.universityId)):(L([]),F(e=>({...e,smallGroupId:""})))},[O.universityId]);let G=async()=>{try{let e=await fetch("/api/regions"),t=await e.json();D(t)}catch(e){console.error("Error fetching regions:",e)}},B=async e=>{try{let t=await fetch("/api/universities?regionId=".concat(e)),s=await t.json();k(s)}catch(e){console.error("Error fetching universities:",e)}},P=async e=>{try{let t=await fetch("/api/small-groups?universityId=".concat(e)),s=await t.json();L(s)}catch(e){console.error("Error fetching small groups:",e)}},U=(e,t)=>{F(s=>({...s,[e]:t})),S[e]&&A(t=>({...t,[e]:""})),w&&I(!1)},V=async e=>{if((e.preventDefault(),n)&&(()=>{let e={};return O.name.trim()||(e.name="Designation name is required"),O.targetAmount&&isNaN(Number(O.targetAmount))&&(e.targetAmount="Target amount must be a valid number"),O.currentAmount&&isNaN(Number(O.currentAmount))&&(e.currentAmount="Current amount must be a valid number"),0>Number(O.targetAmount)&&(e.targetAmount="Target amount must be non-negative"),0>Number(O.currentAmount)&&(e.currentAmount="Current amount must be non-negative"),A(e),0===Object.keys(e).length})()){c(!0);try{let e=await fetch("/api/designations/".concat(n.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:O.name,description:O.description||null,targetAmount:O.targetAmount?Number(O.targetAmount):null,currentAmount:O.currentAmount?Number(O.currentAmount):0,regionId:O.regionId?Number(O.regionId):null,universityId:O.universityId?Number(O.universityId):null,smallGroupId:O.smallGroupId?Number(O.smallGroupId):null,isActive:O.isActive})}),t=await e.json();e.ok?(I(!0),A({}),i&&i(),setTimeout(()=>{a(),I(!1)},1500)):(console.error("API Error:",t),A({general:t.error||"Failed to update designation"}))}catch(e){console.error("Error updating designation:",e),A({general:"An unexpected error occurred"})}finally{c(!1)}}};return n?(0,t.jsx)(j.Sheet,{open:r,onOpenChange:a,children:(0,t.jsx)(j.SheetContent,{side:"top",className:"h-full w-full max-w-none overflow-y-auto",children:(0,t.jsxs)("div",{className:"container mx-auto max-w-2xl py-8",children:[(0,t.jsxs)(j.SheetHeader,{className:"pb-8 text-center",children:[(0,t.jsxs)(j.SheetTitle,{className:"flex items-center justify-center gap-3 text-2xl",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-lg bg-primary/10",children:(0,t.jsx)(l.Edit,{className:"h-6 w-6 text-primary"})}),"Edit Designation"]}),(0,t.jsx)(j.SheetDescription,{className:"text-lg text-muted-foreground",children:"Update the designation information below."})]}),(0,t.jsxs)(u.Card,{className:"shadow-lg",children:[(0,t.jsx)(u.CardHeader,{className:"pb-6",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold",children:"Designation Information"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Update the details below to modify this designation"})]})}),(0,t.jsx)(u.CardContent,{children:(0,t.jsxs)("form",{onSubmit:V,className:"flex flex-col gap-6",children:[S.general&&(0,t.jsx)("div",{className:"p-3 text-sm text-red-600 bg-red-50 border border-red-200 rounded-md",children:S.general}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-md font-semibold text-foreground border-b pb-2",children:"Designation Details"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"name",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(o.Target,{className:"h-4 w-4"}),"Designation Name *"]}),(0,t.jsx)(x.Input,{id:"name",placeholder:"Enter designation name",className:"h-11",value:O.name,onChange:e=>U("name",e.target.value),required:!0}),S.name&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.name})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"description",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(y.FileText,{className:"h-4 w-4"}),"Description (Optional)"]}),(0,t.jsx)(x.Input,{id:"description",placeholder:"Enter designation description",className:"h-11",value:O.description,onChange:e=>U("description",e.target.value)})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"targetAmount",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(b.DollarSign,{className:"h-4 w-4"}),"Target Amount (Optional)"]}),(0,t.jsx)(x.Input,{id:"targetAmount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:O.targetAmount,onChange:e=>U("targetAmount",e.target.value)}),S.targetAmount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.targetAmount})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"currentAmount",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(b.DollarSign,{className:"h-4 w-4"}),"Current Amount (Optional)"]}),(0,t.jsx)(x.Input,{id:"currentAmount",type:"number",step:"0.01",min:"0",placeholder:"0.00",className:"h-11",value:O.currentAmount,onChange:e=>U("currentAmount",e.target.value)}),S.currentAmount&&(0,t.jsx)("p",{className:"text-sm text-red-600",children:S.currentAmount})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"regionId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(f.MapPin,{className:"h-4 w-4"}),"Region (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.regionId,onValueChange:e=>U("regionId",e),children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:"Select a region (optional)"})}),(0,t.jsx)(g.SelectContent,{children:C.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"universityId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(N.Building2,{className:"h-4 w-4"}),"University (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.universityId,onValueChange:e=>U("universityId",e),disabled:!O.regionId,children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:O.regionId?"Select a university (optional)":"Select a region first"})}),(0,t.jsx)(g.SelectContent,{children:T.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(h.Label,{htmlFor:"smallGroupId",className:"text-sm font-medium flex items-center gap-2",children:[(0,t.jsx)(v.Users,{className:"h-4 w-4"}),"Small Group (Optional)"]}),(0,t.jsxs)(g.Select,{value:O.smallGroupId,onValueChange:e=>U("smallGroupId",e),disabled:!O.universityId,children:[(0,t.jsx)(g.SelectTrigger,{className:"h-11",children:(0,t.jsx)(g.SelectValue,{placeholder:O.universityId?"Select a small group (optional)":"Select a university first"})}),(0,t.jsx)(g.SelectContent,{children:E.map(e=>(0,t.jsx)(g.SelectItem,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(p.Checkbox,{id:"isActive",checked:O.isActive,onCheckedChange:e=>U("isActive",e)}),(0,t.jsx)(h.Label,{htmlFor:"isActive",className:"text-sm font-medium",children:"Designation is active"})]})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-6 border-t",children:[(0,t.jsx)(m.Button,{type:"button",variant:"outline",className:"flex-1 h-11",onClick:a,disabled:d,children:"Cancel"}),(0,t.jsx)(m.Button,{type:"submit",className:"flex-1 h-11",disabled:d||w,children:d?"Updating...":w?"âœ… Updated Successfully!":(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.Edit,{className:"mr-2 h-4 w-4"}),"Update Designation"]})})]})]})})]})]})})}):null}var D=e.i(75117),T=e.i(69035),k=e.i(11522);function E(){let[e,m]=(0,s.useState)(""),[u,x]=(0,s.useState)([]),[h,g]=(0,s.useState)(!0),[p,j]=(0,s.useState)(null),[f,N]=(0,s.useState)({isOpen:!1,designationId:null,designationName:""}),[v,b]=(0,s.useState)(!1),[y,A]=(0,s.useState)(null),w=async()=>{try{g(!0),j(null);let e=await n.default.get("/api/designations");x(e.data)}catch(e){console.error("Error fetching designations:",e),j("Failed to fetch designations. Please try again.")}finally{g(!1)}},E=()=>{N({isOpen:!1,designationId:null,designationName:""})},L=async()=>{if(f.designationId){b(!0);try{let e=await n.default.delete("/api/designations/".concat(f.designationId));200===e.status&&(x(e=>e.filter(e=>e.id!==f.designationId)),E())}catch(e){console.error("Error deleting designation:",e),alert("Failed to delete designation. Please try again.")}finally{b(!1)}}};(0,s.useEffect)(()=>{w()},[]);let O=u.filter(t=>{var s,n,r,a,i,l,d,o;if(!e)return!0;let c=e.toLowerCase();return(null==(s=t.name)?void 0:s.toLowerCase().includes(c))||(null==(n=t.description)?void 0:n.toLowerCase().includes(c))||(null==(a=t.region)||null==(r=a.name)?void 0:r.toLowerCase().includes(c))||(null==(l=t.university)||null==(i=l.name)?void 0:i.toLowerCase().includes(c))||(null==(o=t.smallgroup)||null==(d=o.name)?void 0:d.toLowerCase().includes(c))});return(0,t.jsxs)(k.SidebarProvider,{children:[(0,t.jsx)(c.AppSidebar,{}),(0,t.jsxs)(k.SidebarInset,{children:[(0,t.jsx)("header",{className:"flex h-16 shrink-0 items-center gap-2 transition-[width,height] ease-linear group-has-data-[collapsible=icon]/sidebar-wrapper:h-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 px-4",children:[(0,t.jsx)(k.SidebarTrigger,{className:"-ml-1"}),(0,t.jsx)(T.Separator,{orientation:"vertical",className:"mr-2 data-[orientation=vertical]:h-4"}),(0,t.jsx)(D.Breadcrumb,{children:(0,t.jsxs)(D.BreadcrumbList,{children:[(0,t.jsx)(D.BreadcrumbItem,{className:"hidden md:block",children:(0,t.jsx)(D.BreadcrumbLink,{href:"/dashboard",children:"Dashboard"})}),(0,t.jsx)(D.BreadcrumbSeparator,{className:"hidden md:block"}),(0,t.jsx)(D.BreadcrumbItem,{children:(0,t.jsx)(D.BreadcrumbLink,{href:"/links/activities",children:"Activities"})}),(0,t.jsx)(D.BreadcrumbSeparator,{}),(0,t.jsx)(D.BreadcrumbItem,{children:(0,t.jsx)(D.BreadcrumbPage,{children:"Designations"})})]})})]})}),(0,t.jsx)("div",{className:"flex flex-1 flex-col gap-4 p-2 sm:p-4 pt-0",children:(0,t.jsxs)("div",{className:"max-w-7xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"mb-4 sm:mb-6 lg:mb-8",children:[(0,t.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-foreground mb-1 sm:mb-2",children:"Designation Management"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-muted-foreground",children:"Manage contribution designations and their information across the organization"})]}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:gap-4 items-stretch sm:items-center justify-between mb-4 sm:mb-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 flex-1",children:[(0,t.jsxs)("div",{className:"relative flex-1 max-w-md",children:[(0,t.jsx)(r.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),(0,t.jsx)("input",{type:"text",placeholder:"Search designations...",value:e,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 sm:py-2.5 bg-muted/30 border border-border/20 rounded-lg focus:ring-2 focus:ring-primary/20 focus:border-primary/50 focus:bg-muted/50 transition-all duration-200 text-foreground placeholder:text-muted-foreground text-sm sm:text-base"})]}),(0,t.jsxs)("button",{onClick:w,disabled:h,className:"flex items-center justify-center gap-2 px-3 sm:px-4 py-2 sm:py-2.5 text-foreground bg-muted/30 hover:bg-muted/50 border border-border/20 hover:border-border/40 rounded-lg transition-all duration-200 text-sm sm:text-base disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)(a.RefreshCw,{className:"w-4 h-4 ".concat(h?"animate-spin":"")}),(0,t.jsx)("span",{className:"hidden sm:inline",children:h?"Loading...":"Refresh"})]})]}),(0,t.jsx)(S,{onDesignationAdded:w,children:(0,t.jsxs)("button",{className:"flex items-center justify-center gap-2 px-4 sm:px-6 py-2 sm:py-2.5 bg-muted text-foreground hover:bg-muted/80 rounded-md transition-all duration-200 shadow-sm text-sm sm:text-base",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"Add New Designation"}),(0,t.jsx)("span",{className:"sm:hidden",children:"Add Designation"})]})})]}),p&&(0,t.jsxs)("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-4 mb-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-destructive",children:[(0,t.jsx)("span",{className:"text-sm font-medium",children:"Error:"}),(0,t.jsx)("span",{className:"text-sm",children:p})]}),(0,t.jsx)("button",{onClick:w,className:"mt-2 text-sm text-destructive hover:text-destructive/80 underline",children:"Try again"})]}),(0,t.jsxs)("div",{className:"bg-card rounded-lg shadow-sm border border-border overflow-hidden",children:[h?(0,t.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,t.jsx)(a.RefreshCw,{className:"w-4 h-4 animate-spin"}),(0,t.jsx)("span",{children:"Loading designations..."})]})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full min-w-[800px]",children:[(0,t.jsx)("thead",{className:"bg-muted/50 border-b border-border",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"ID"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Designation Name"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Description"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Amounts"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Organization"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Status"}),(0,t.jsx)("th",{className:"px-3 sm:px-6 py-3 text-left text-xs font-medium text-muted-foreground uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-card divide-y divide-border",children:O.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-muted/50",children:[(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium text-foreground",children:e.id}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-foreground",children:(0,t.jsx)("div",{className:"font-medium",children:e.name})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-muted-foreground",children:(0,t.jsx)("div",{className:"max-w-xs truncate",children:e.description||"No description"})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-muted-foreground",children:(0,t.jsxs)("div",{className:"space-y-1",children:[e.targetAmount&&(0,t.jsxs)("div",{className:"text-xs",children:["Target: ",(0,t.jsxs)("span",{className:"font-medium",children:["$",e.targetAmount.toLocaleString()]})]}),(0,t.jsxs)("div",{className:"text-xs",children:["Current: ",(0,t.jsxs)("span",{className:"font-medium",children:["$",e.currentAmount.toLocaleString()]})]}),e.targetAmount&&(0,t.jsxs)("div",{className:"text-xs",children:["Progress: ",(0,t.jsxs)("span",{className:"font-medium",children:[Math.round(e.currentAmount/e.targetAmount*100),"%"]})]})]})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm text-muted-foreground",children:(0,t.jsxs)("div",{className:"space-y-1",children:[e.region&&(0,t.jsx)("div",{className:"font-medium",children:e.region.name}),e.university&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["University: ",e.university.name]}),e.smallgroup&&(0,t.jsxs)("div",{className:"text-xs text-muted-foreground",children:["Small Group: ",e.smallgroup.name]}),!e.region&&!e.university&&!e.smallgroup&&(0,t.jsx)("div",{className:"text-xs text-muted-foreground",children:"Global"})]})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm",children:(0,t.jsx)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(e.isActive?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"bg-gray-100 text-gray-800 dark:bg-gray-900/20 dark:text-gray-400"),children:e.isActive?"Active":"Inactive"})}),(0,t.jsx)("td",{className:"px-3 sm:px-6 py-3 sm:py-4 text-sm font-medium",children:(0,t.jsxs)("div",{className:"flex items-center gap-1 sm:gap-2",children:[(0,t.jsx)("button",{onClick:()=>{A(e)},className:"text-muted-foreground hover:text-foreground p-1 rounded",title:"Edit",children:(0,t.jsx)(l.Edit,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{N({isOpen:!0,designationId:e.id,designationName:e.name})},className:"text-destructive hover:text-destructive/80 p-1 rounded",title:"Delete",children:(0,t.jsx)(d.Trash2,{className:"w-4 h-4"})})]})})]},e.id))})]})}),!h&&0===O.length&&!p&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(o.Target,{className:"w-12 h-12 text-muted-foreground mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-medium text-foreground mb-2",children:"No designations found"}),(0,t.jsx)("p",{className:"text-muted-foreground text-center mb-4",children:e?"No designations match your search criteria.":"No designations have been added yet."}),!e&&(0,t.jsx)(S,{onDesignationAdded:w,children:(0,t.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-primary text-primary-foreground rounded-md hover:bg-primary/90 transition-colors",children:[(0,t.jsx)(i.Plus,{className:"w-4 h-4"}),"Add First Designation"]})})]}),!h&&O.length>0&&(0,t.jsx)("div",{className:"bg-muted/50 px-3 sm:px-6 py-3 border-t border-border",children:(0,t.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-2 sm:gap-0",children:(0,t.jsxs)("div",{className:"text-xs sm:text-sm text-muted-foreground text-center sm:text-left",children:["Showing ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:O.length})," of ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:u.length})," designations"]})})})]})]})})]}),(0,t.jsx)(I,{isOpen:f.isOpen,onClose:E,onConfirm:L,designationName:f.designationName,isLoading:v}),(0,t.jsx)(C,{designation:y,onDesignationUpdated:w,isOpen:null!==y,onClose:()=>{A(null)}})]})}}]);